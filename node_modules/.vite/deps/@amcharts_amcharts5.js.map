{
  "version": 3,
  "sources": ["../../src/.internal/core/util/ResizeSensor.ts", "../../src/.internal/core/util/InterfaceColors.ts", "../../src/.internal/core/render/PointedRectangle.ts", "../../src/.internal/core/render/Tooltip.ts", "../../src/.internal/core/util/NumberFormatter.ts", "../../src/.internal/core/util/Timezone.ts", "../../src/.internal/core/util/DateFormatter.ts", "../../src/.internal/core/util/DurationFormatter.ts", "../../src/locales/en.ts", "../../src/.internal/core/util/Language.ts", "../../src/.internal/core/util/Matrix.ts", "../../svg-arc-to-cubic-bezier/modules/index.js", "../../src/.internal/core/render/backend/CanvasRenderer.ts", "../../src/.internal/core/Root.ts", "../../src/.internal/core/util/Modal.ts", "../../src/.internal/core/render/Bullet.ts", "../../src/.internal/core/render/Circle.ts", "../../src/.internal/core/render/Ellipse.ts", "../../src/.internal/core/render/Star.ts", "../../src/.internal/core/render/gradients/Gradient.ts", "../../src/.internal/core/render/gradients/LinearGradient.ts", "../../src/.internal/core/render/HeatLegend.ts", "../../src/.internal/core/render/Legend.ts", "../../src/.internal/core/util/Draw.ts", "../../src/.internal/core/render/Line.ts", "../../src/.internal/core/render/Picture.ts", "../../src/.internal/core/render/RadialText.ts", "../../src/.internal/core/render/RadialLabel.ts", "../../src/.internal/core/render/Triangle.ts", "../../src/.internal/core/render/Scrollbar.ts", "../../src/.internal/core/render/Slider.ts", "../../d3-path/src/path.js", "../../d3-shape/src/constant.js", "../../d3-shape/src/math.js", "../../d3-shape/src/arc.js", "../../d3-shape/src/array.js", "../../d3-shape/src/curve/linear.js", "../../d3-shape/src/curve/radial.js", "../../d3-shape/src/symbol/asterisk.js", "../../d3-shape/src/symbol/diamond.js", "../../d3-shape/src/symbol/star.js", "../../d3-shape/src/symbol/triangle.js", "../../d3-shape/src/symbol/triangle2.js", "../../d3-shape/src/symbol/wye.js", "../../d3-shape/src/noop.js", "../../d3-shape/src/curve/basis.js", "../../d3-shape/src/curve/basisClosed.js", "../../d3-shape/src/curve/basisOpen.js", "../../d3-shape/src/curve/bundle.js", "../../d3-shape/src/curve/cardinal.js", "../../d3-shape/src/curve/cardinalClosed.js", "../../d3-shape/src/curve/cardinalOpen.js", "../../d3-shape/src/curve/catmullRom.js", "../../d3-shape/src/curve/catmullRomClosed.js", "../../d3-shape/src/curve/catmullRomOpen.js", "../../d3-shape/src/curve/linearClosed.js", "../../d3-shape/src/curve/monotone.js", "../../d3-shape/src/curve/natural.js", "../../d3-shape/src/curve/step.js", "../../src/.internal/core/render/Slice.ts", "../../src/.internal/core/render/Tick.ts", "../../src/.internal/core/render/gradients/RadialGradient.ts", "../../src/.internal/core/render/patterns/CirclePattern.ts", "../../src/.internal/core/render/patterns/LinePattern.ts", "../../src/.internal/core/render/patterns/RectanglePattern.ts", "../../src/.internal/core/util/ColorSet.ts", "../../src/.internal/core/util/DataParser.ts", "../../src/.internal/core/util/DataProcessor.ts", "../../src/.internal/core/render/SpriteResizer.ts", "../../src/.internal/core/util/Net.ts"],
  "sourcesContent": ["/** @ignore *//** */\n\nimport type { IDisposer } from \"./Disposer\";\nimport * as $array from \"./Array\";\nimport * as $utils from \"./Utils\";\n\n/**\n * @ignore\n */\ninterface Sensor {\n\taddTarget(target: Element, callback: () => void): void;\n\tremoveTarget(target: Element): void;\n}\n\n/**\n * @ignore\n */\ndeclare const ResizeObserver: any;\n\n/**\n * @ignore\n */\nclass Native implements Sensor {\n\tprivate _observer: any;\n\tprivate _targets: Array<{ target: Element, callback: () => void }> = [];\n\n\tconstructor() {\n\t\tthis._observer = new ResizeObserver((entries: Array<any>) => {\n\t\t\t$array.each(entries, (entry) => {\n\t\t\t\t$array.each(this._targets, (x) => {\n\t\t\t\t\tif (x.target === entry.target) {\n\t\t\t\t\t\tx.callback();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\taddTarget(target: Element, callback: () => void) {\n\t\tthis._observer.observe(target, { box: \"border-box\" });\n\t\tthis._targets.push({ target, callback });\n\t}\n\n\tremoveTarget(target: Element) {\n\t\tthis._observer.unobserve(target);\n\n\t\t$array.keepIf(this._targets, (x) => {\n\t\t\treturn x.target !== target;\n\t\t});\n\t}\n}\n\n/**\n * @ignore\n */\ninterface ClientBounds {\n\twidth: number,\n\theight: number,\n\tleft: number,\n\tright: number,\n\ttop: number,\n\tbottom: number,\n\tx: number,\n\ty: number\n}\n\n\n/**\n * @ignore\n */\nclass Raf implements Sensor {\n\tpublic static delay: number = 200;\n\n\tprivate _timer: number | null = null;\n\tprivate _targets: Array<{ target: Element, callback: () => void, size: ClientRect | DOMRect | ClientBounds }> = [];\n\n\taddTarget(target: Element, callback: () => void) {\n\t\tif (this._timer === null) {\n\t\t\tlet lastTime: number | null = null;\n\n\t\t\tconst loop = () => {\n\t\t\t\tconst currentTime = Date.now();\n\n\t\t\t\tif (lastTime === null || currentTime > (lastTime + Raf.delay)) {\n\t\t\t\t\tlastTime = currentTime;\n\n\t\t\t\t\t$array.each(this._targets, (x) => {\n\t\t\t\t\t\tlet newSize = x.target.getBoundingClientRect();\n\n\t\t\t\t\t\tif (newSize.width !== x.size.width || newSize.height !== x.size.height) {\n\t\t\t\t\t\t\tx.size = newSize;\n\t\t\t\t\t\t\tx.callback();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (this._targets.length === 0) {\n\t\t\t\t\tthis._timer = null;\n\n\t\t\t\t} else {\n\t\t\t\t\tthis._timer = requestAnimationFrame(loop);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis._timer = requestAnimationFrame(loop);\n\t\t}\n\n\t\t// We start off with fake bounds so that sensor always kicks in\n\t\tlet size = { width: 0, height: 0, left: 0, right: 0, top: 0, bottom: 0, x: 0, y: 0 };\n\t\tthis._targets.push({ target, callback, size });\n\t}\n\n\tremoveTarget(target: Element) {\n\t\t$array.keepIf(this._targets, (x) => {\n\t\t\treturn x.target !== target;\n\t\t});\n\n\t\tif (this._targets.length === 0) {\n\t\t\tif (this._timer !== null) {\n\t\t\t\tcancelAnimationFrame(this._timer);\n\t\t\t\tthis._timer = null;\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n/**\n * @ignore\n */\nlet observer: Sensor | null = null;\n\n/**\n * @ignore\n */\nfunction makeSensor(): Sensor {\n\tif (observer === null) {\n\t\tif (typeof ResizeObserver !== \"undefined\") {\n\t\t\tobserver = new Native();\n\n\t\t} else {\n\t\t\tobserver = new Raf();\n\t\t}\n\t}\n\n\treturn observer;\n}\n\n/**\n * @ignore\n */\nexport class ResizeSensor implements IDisposer {\n\tprivate _sensor: Sensor;\n\tprivate _element: Element;\n\tprivate _listener: IDisposer;\n\tprivate _disposed: boolean = false;\n\n\tconstructor(element: Element, callback: () => void) {\n\t\tthis._sensor = makeSensor();\n\t\tthis._element = element;\n\n\t\t// This is needed because we need to know when the window is zoomed\n\t\tthis._listener = $utils.onZoom(callback);\n\n\t\tthis._sensor.addTarget(element, callback);\n\t}\n\n\tpublic isDisposed() {\n\t\treturn this._disposed;\n\t}\n\n\tpublic dispose() {\n\t\tif (!this._disposed) {\n\t\t\tthis._disposed = true;\n\t\t\tthis._sensor.removeTarget(this._element);\n\t\t\tthis._listener.dispose();\n\t\t}\n\t}\n\n\tpublic get sensor(): Sensor {\n\t\treturn this._sensor;\n\t}\n}\n", "import type { Color } from \"./Color\"\n\nimport { Entity, IEntitySettings } from \"./Entity\"\n\n\nexport interface IInterfaceColorsSettings extends IEntitySettings {\n\n\t/**\n\t * Used for generic outlines.\n\t */\n\tstroke?: Color,\n\n\t/**\n\t * Used for generic fills.\n\t */\n\tfill?: Color,\n\n\t/**\n\t * Primary button fill color.\n\t */\n\tprimaryButton?: Color,\n\n\t/**\n\t * Primary button fill color on hover.\n\t */\n\tprimaryButtonHover?: Color,\n\n\t/**\n\t * Primary button fill color when pressing down on it.\n\t */\n\tprimaryButtonDown?: Color,\n\n\t/**\n\t * Primary button fill color when it is set as active.\n\t */\n\tprimaryButtonActive?: Color,\n\n\t/**\n\t * Primary button text color.\n\t */\n\tprimaryButtonText?: Color,\n\n\t/**\n\t * Primary button stroke (outline) color.\n\t */\n\tprimaryButtonStroke?: Color,\n\n\t/**\n\t * Secondary button fill color.\n\t */\n\tsecondaryButton?: Color,\n\n\t/**\n\t * Secondary button fill color on hover.\n\t */\n\tsecondaryButtonHover?: Color,\n\n\t/**\n\t * Secondary button fill color when pressing down on it.\n\t */\n\tsecondaryButtonDown?: Color,\n\n\t/**\n\t * Secondary button fill color when it is set as active.\n\t */\n\tsecondaryButtonActive?: Color,\n\n\t/**\n\t * Secondary button text color.\n\t */\n\tsecondaryButtonText?: Color,\n\n\t/**\n\t * Secondary button stroke (outline) color.\n\t */\n\tsecondaryButtonStroke?: Color,\n\n\t/**\n\t * Grid color.\n\t */\n\tgrid?: Color,\n\n\t/**\n\t * Chart background color.\n\t */\n\tbackground?: Color,\n\n\t/**\n\t * Alternative background, for elements that need to contrast with primary\n\t * background.\n\t */\n\talternativeBackground?: Color,\n\n\t/**\n\t * Label text color.\n\t */\n\ttext?: Color,\n\n\t/**\n\t * Alternative text color, used for inverted (dark) backgrounds.\n\t * @type {[type]}\n\t */\n\talternativeText?: Color,\n\n\t/**\n\t * Color for disabled elements.\n\t */\n\tdisabled?: Color,\n\n\t/**\n\t * Color to indicate positive value.\n\t */\n\tpositive?: Color,\n\n\t/**\n\t * Color to indicate negative value.\n\t */\n\tnegative?: Color\n\n}\n\n\n/**\n * Presets for common UI elements.\n */\nexport class InterfaceColors extends Entity {\n\tpublic static className: string = \"InterfaceColors\";\n\tpublic static classNames: Array<string> = Entity.classNames.concat([InterfaceColors.className]);\n\n\tdeclare public _settings: IInterfaceColorsSettings;\n}\n", "import { Graphics, IGraphicsSettings, IGraphicsPrivate } from \"./Graphics\";\nimport * as $math from \"../util/Math\";\n\nexport interface IPointedRectangleSettings extends IGraphicsSettings {\n\n\t/**\n\t * A width of the pinter's (stem's) thick end (base) in pixels.\n\t */\n\tpointerBaseWidth?: number;\n\n\t/**\n\t * A length of the pinter (stem) in pixels.\n\t */\n\tpointerLength?: number;\n\n\t/**\n\t * X coordinate the shape is pointing to.\n\t */\n\tpointerX?: number;\n\n\t/**\n\t * Y coordinate the shape is pointing to.\n\t */\n\tpointerY?: number;\n\n\t/**\n\t * Corner radius in pixels.\n\t */\n\tcornerRadius?: number;\n}\n\nexport interface IPointedRectanglePrivate extends IGraphicsPrivate {\n}\n\n/**\n * Draws a rectangle with a pointer.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\n * @important\n */\nexport class PointedRectangle extends Graphics {\n\n\tdeclare public _settings: IPointedRectangleSettings;\n\tdeclare public _privateSettings: IPointedRectanglePrivate;\n\n\tpublic static className: string = \"PointedRectangle\";\n\tpublic static classNames: Array<string> = Graphics.classNames.concat([PointedRectangle.className]);\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tif (this.isDirty(\"pointerBaseWidth\") || this.isDirty(\"cornerRadius\") || this.isDirty(\"pointerLength\") || this.isDirty(\"pointerX\") || this.isDirty(\"pointerY\") || this.isDirty(\"width\") || this.isDirty(\"height\")) {\n\t\t\tthis._clear = true;\n\t\t}\n\t}\n\n\tpublic _changed() {\n\t\tsuper._changed();\n\n\t\tif (this._clear) {\n\n\t\t\tthis.markDirtyBounds();\n\n\t\t\tlet w = this.width();\n\t\t\tlet h = this.height();\n\n\t\t\tif (w > 0 && h > 0) {\n\t\t\t\tlet cr = this.get(\"cornerRadius\", 8);\n\t\t\t\tcr = $math.fitToRange(cr, 0, Math.min(w / 2, h / 2));\n\n\t\t\t\tlet x = this.get(\"pointerX\", 0);\n\t\t\t\tlet y = this.get(\"pointerY\", 0);\n\t\t\t\tlet bwh = this.get(\"pointerBaseWidth\", 15) / 2;\n\n\t\t\t\t// corner coordinates\n\t\t\t\t// top left\n\t\t\t\tlet xtl = 0;\n\t\t\t\tlet ytl = 0;\n\t\t\t\t// top right\n\t\t\t\tlet xtr = w;\n\t\t\t\tlet ytr = 0;\n\t\t\t\t// bottom right\n\t\t\t\tlet xbr = w;\n\t\t\t\tlet ybr = h;\n\t\t\t\t// bottom left\n\t\t\t\tlet xbl = 0;\n\t\t\t\tlet ybl = h;\n\n\t\t\t\t// find stem base side: http://$math.stackexchange.com/questions/274712/calculate-on-which-side-of-straign-line-is-dot-located\n\t\t\t\t// d=(x−x1)(y2−y1)−(y−y1)(x2−x1)\n\t\t\t\tlet d1 = (x - xtl) * (ybr - ytl) - (y - ytl) * (xbr - xtl);\n\t\t\t\tlet d2 = (x - xbl) * (ytr - ybl) - (y - ybl) * (xtr - xbl);\n\n\t\t\t\tconst display = this._display;\n\t\t\t\t// top\n\t\t\t\tdisplay.moveTo(cr, 0);\n\n\t\t\t\tif (d1 > 0 && d2 > 0) {\n\t\t\t\t\tlet stemX = Math.round($math.fitToRange(x, cr + bwh, w - bwh - cr));\n\t\t\t\t\ty = $math.fitToRange(y, -Infinity, 0);\n\n\t\t\t\t\tdisplay.lineTo(stemX - bwh, 0);\n\t\t\t\t\tdisplay.lineTo(x, y);\n\t\t\t\t\tdisplay.lineTo(stemX + bwh, 0);\n\t\t\t\t}\n\n\t\t\t\tdisplay.lineTo(w - cr, 0);\n\t\t\t\tdisplay.arcTo(w, 0, w, cr, cr);\n\n\t\t\t\t// right\n\t\t\t\tif (d1 > 0 && d2 < 0) {\n\t\t\t\t\tlet stemY = Math.round($math.fitToRange(y, cr + bwh, h - bwh - cr));\n\t\t\t\t\tx = $math.fitToRange(x, w, Infinity);\n\t\t\t\t\tdisplay.lineTo(w, cr);\n\t\t\t\t\tdisplay.lineTo(w, Math.max(stemY - bwh, cr));\n\t\t\t\t\tdisplay.lineTo(x, y);\n\t\t\t\t\tdisplay.lineTo(w, stemY + bwh);\n\t\t\t\t}\n\t\t\t\tdisplay.lineTo(w, h - cr);\n\t\t\t\tdisplay.arcTo(w, h, w - cr, h, cr);\n\n\t\t\t\t// bottom\n\t\t\t\tif (d1 < 0 && d2 < 0) {\n\t\t\t\t\tlet stemX = Math.round($math.fitToRange(x, cr + bwh, w - bwh - cr));\n\t\t\t\t\ty = $math.fitToRange(y, h, Infinity);\n\n\t\t\t\t\tdisplay.lineTo(w - cr, h);\n\t\t\t\t\tdisplay.lineTo(stemX + bwh, h);\n\t\t\t\t\tdisplay.lineTo(x, y);\n\t\t\t\t\tdisplay.lineTo(stemX - bwh, h);\n\t\t\t\t}\n\t\t\t\tdisplay.lineTo(cr, h)\n\t\t\t\tdisplay.arcTo(0, h, 0, h - cr, cr);\n\n\n\t\t\t\t// left\n\t\t\t\tif (d1 < 0 && d2 > 0) {\n\t\t\t\t\tlet stemY = Math.round($math.fitToRange(y, cr + bwh, h - cr - bwh));\n\t\t\t\t\tx = $math.fitToRange(x, -Infinity, 0);\n\t\t\t\t\tdisplay.lineTo(0, h - cr);\n\t\t\t\t\tdisplay.lineTo(0, stemY + bwh);\n\t\t\t\t\tdisplay.lineTo(x, y);\n\t\t\t\t\tdisplay.lineTo(0, Math.max(stemY - bwh, cr));\n\t\t\t\t}\n\t\t\t\tdisplay.lineTo(0, cr);\n\t\t\t\tdisplay.arcTo(0, 0, cr, 0, cr);\n\t\t\t}\n\t\t}\n\t}\n}\n", "import type { IBounds } from \"../util/IBounds\";\nimport type { IPoint } from \"../util/IPoint\";\nimport type { Pattern } from \"../render/patterns/Pattern\";\nimport type { Time } from \"../util/Animation\";\nimport type { Sprite } from \"../render/Sprite\";\n\nimport { MultiDisposer, IDisposer } from \"../util/Disposer\";\nimport { Label } from \"../render/Label\";\nimport { PointedRectangle } from \"../render/PointedRectangle\";\nimport { Container, IContainerPrivate, IContainerSettings } from \"./Container\";\nimport { Percent } from \"../util/Percent\";\nimport { Color } from \"../util/Color\";\n\nimport * as $math from \"../util/Math\";\nimport * as $array from \"../util/Array\";\nimport * as $utils from \"../util/Utils\";\n//import * as $utils from \"../util/Utils\";\nimport type { DataItem, IComponentDataItem } from \"./Component\";\n\n\nexport interface ITooltipSettings extends IContainerSettings {\n\n\t/**\n\t * Text to use for tooltip's label.\n\t */\n\tlabelText?: string\n\n\t/**\n\t * HTML content to use for tooltip's label.\n\t *\n\t * @since 5.2.11\n\t */\n\tlabelHTML?: string\n\n\t/**\n\t * A direction of the tooltip pointer.\n\t *\n\t * https://www.amcharts.com/docs/v5/concepts/common-elements/tooltips/#Orientation\n\t */\n\tpointerOrientation?: \"left\" | \"right\" | \"up\" | \"down\" | \"vertical\" | \"horizontal\";\n\n\t/**\n\t * If set to `true` will use the same `fill` color for its background as\n\t * its `tooltipTarget`.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/tooltips/#Colors} for more info\n\t * @default false\n\t */\n\tgetFillFromSprite?: boolean;\n\n\t/**\n\t * If set to `true` will use the same `fill` color as its `tooltipTarget`.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/tooltips/#Colors} for more info\n\t * @default false\n\t */\n\tgetLabelFillFromSprite?: boolean;\n\n\t/**\n\t * If set to `true` will use the same `stroke` color as its `tooltipTarget`.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/tooltips/#Colors} for more info\n\t * @default false\n\t */\n\tgetStrokeFromSprite?: boolean;\n\n\t/**\n\t * Scree bounds to constring tooltip within.\n\t */\n\tbounds?: IBounds;\n\n\t/**\n\t * If set to `true` tooltip will adjust its text color for better visibility\n\t * on its background.\n\t *\n\t * @default true\n\t */\n\tautoTextColor?: boolean;\n\n\t/**\n\t * Screen coordinates the tooltip show point to.\n\t */\n\tpointTo?: IPoint;\n\n\t/**\n\t * Duration in milliseconds for tooltip position change, e.g. when tooltip\n\t * is jumping from one target to another.\n\t */\n\tanimationDuration?: number;\n\n\t/**\n\t * Easing function for tooltip animation.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/animations/#Easing_functions} for more info\n\t */\n\tanimationEasing?: (t: Time) => Time;\n\n\t/**\n\t * A target element tooltip is shown fow.\n\t */\n\ttooltipTarget?: Sprite;\n\n\t/**\n\t * If set to `true`, tooltip's target element will considered to be hovered\n\t * when mouse pointer is over tooltip itself.\n\t *\n\t * @since 5.2.14\n\t */\n\tkeepTargetHover?: boolean;\n\n}\n\nexport interface ITooltipPrivate extends IContainerPrivate {\n}\n\n/**\n * Creates a tooltip.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/tooltips/} for more info\n * @important\n */\nexport class Tooltip extends Container {\n\n\tprotected _arrangeDisposer: MultiDisposer | undefined;\n\n\tpublic _fx: number = 0;\n\tpublic _fy: number = 0;\n\n\tdeclare public _settings: ITooltipSettings;\n\tdeclare public _privateSettings: ITooltipPrivate;\n\n\tprotected _label!: Label;\n\tpublic static className: string = \"Tooltip\";\n\tpublic static classNames: Array<string> = Container.classNames.concat([Tooltip.className]);\n\n\tprotected _fillDp: IDisposer | undefined;\n\tprotected _strokeDp: IDisposer | undefined;\n\tprotected _labelDp: IDisposer | undefined;\n\n\tprotected _w: number = 0;\n\tprotected _h: number = 0;\n\n\tprotected _keepHoverDp: MultiDisposer | undefined;\n\n\tprotected _afterNew() {\n\t\tthis._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"tooltip\"]);\n\n\t\tsuper._afterNew();\n\n\t\tthis.set(\"background\", PointedRectangle.new(this._root, {\n\t\t\tthemeTags: [\"tooltip\", \"background\"]\n\t\t}));\n\n\t\tthis._label = this.children.push(Label.new(this._root, {}));\n\n\t\tthis._disposers.push(this._label.events.on(\"boundschanged\", () => {\n\t\t\tthis._updateBackground();\n\t\t}))\n\n\t\tthis.on(\"bounds\", () => {\n\t\t\tthis._updateBackground();\n\t\t})\n\n\t\tthis._updateTextColor();\n\n\t\tthis._root.tooltipContainer.children.push(this);\n\t\tthis.hide(0);\n\n\t\tthis._root._tooltips.push(this);\n\t}\n\n\t/**\n\t * A [[Label]] element for the tooltip.\n\t *\n\t * @readonly\n\t * @return Label\n\t */\n\tpublic get label(): Label {\n\t\treturn this._label;\n\t}\n\n\t/**\n\t * Permanently disposes the tooltip.\n\t */\n\tpublic dispose() {\n\t\tsuper.dispose();\n\t\t$array.remove(this._root._tooltips, this);\n\t}\n\n\tpublic _updateChildren() {\n\t\tsuper._updateChildren();\n\t\tconst labelText = this.get(\"labelText\");\n\t\tif (labelText != null) {\n\t\t\tthis.label.set(\"text\", this.get(\"labelText\"));\n\t\t}\n\t\tconst labelHTML = this.get(\"labelHTML\");\n\t\tif (labelHTML != null) {\n\t\t\tthis.label.set(\"html\", this.get(\"labelHTML\"));\n\t\t}\n\t}\n\n\tpublic _changed() {\n\t\tsuper._changed();\n\n\t\tif (this.isDirty(\"pointTo\")) {\n\t\t\t// can't compare to previous, as sometimes pointTo is set twice (when pointer moves, so the position won't be udpated)\n\t\t\tthis._updateBackground();\n\t\t}\n\n\t\tif (this.isDirty(\"tooltipTarget\")) {\n\t\t\tthis.updateBackgroundColor();\n\t\t}\n\n\t\tif (this.isDirty(\"keepTargetHover\")) {\n\t\t\tconst keephover = this.get(\"keepTargetHover\");\n\t\t\tif (keephover) {\n\t\t\t\tconst bg = this.get(\"background\")!;\n\t\t\t\tthis._keepHoverDp = new MultiDisposer([\n\t\t\t\t\tbg.events.on(\"pointerover\", (_ev) => {\n\t\t\t\t\t\tconst target = this.get(\"tooltipTarget\");\n\t\t\t\t\t\tif (target) {\n\t\t\t\t\t\t\ttarget.hover();\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tbg.events.on(\"pointerout\", (_ev) => {\n\t\t\t\t\t\tconst target = this.get(\"tooltipTarget\");\n\t\t\t\t\t\tif (target) {\n\t\t\t\t\t\t\ttarget.unhover();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (this._keepHoverDp) {\n\t\t\t\t\tthis._keepHoverDp.dispose();\n\t\t\t\t\tthis._keepHoverDp = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _onShow() {\n\t\tsuper._onShow();\n\t\tthis.updateBackgroundColor();\n\t}\n\n\n\tpublic updateBackgroundColor() {\n\t\tlet tooltipTarget = this.get(\"tooltipTarget\");\n\t\tconst background = this.get(\"background\");\n\t\tlet fill: Color | undefined;\n\t\tlet stroke: Color | undefined;\n\n\n\t\tif (tooltipTarget && background) {\n\n\t\t\tfill = tooltipTarget.get(\"fill\" as any);\n\t\t\tstroke = tooltipTarget.get(\"stroke\" as any);\n\n\t\t\tif (fill == null) {\n\t\t\t\tfill = stroke;\n\t\t\t}\n\n\t\t\tif (this.get(\"getFillFromSprite\")) {\n\n\t\t\t\tif (this._fillDp) {\n\t\t\t\t\tthis._fillDp.dispose();\n\t\t\t\t}\n\n\t\t\t\tif (fill != null) {\n\t\t\t\t\tbackground.set(\"fill\", fill as any);\n\t\t\t\t}\n\n\t\t\t\tthis._fillDp = tooltipTarget.on(\"fill\" as any, (fill) => {\n\t\t\t\t\tif (fill != null) {\n\t\t\t\t\t\tbackground.set(\"fill\", fill as any);\n\t\t\t\t\t\tthis._updateTextColor(fill);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tif (this.get(\"getStrokeFromSprite\")) {\n\n\t\t\t\tif (this._strokeDp) {\n\t\t\t\t\tthis._strokeDp.dispose();\n\t\t\t\t}\n\n\t\t\t\tif (fill != null) {\n\t\t\t\t\tbackground.set(\"stroke\", fill as any);\n\t\t\t\t}\n\n\t\t\t\tthis._strokeDp = tooltipTarget.on(\"fill\" as any, (fill) => {\n\t\t\t\t\tif (fill != null) {\n\t\t\t\t\t\tbackground.set(\"stroke\", fill as any);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tif (this.get(\"getLabelFillFromSprite\")) {\n\n\t\t\t\tif (this._labelDp) {\n\t\t\t\t\tthis._labelDp.dispose();\n\t\t\t\t}\n\n\t\t\t\tif (fill != null) {\n\t\t\t\t\tthis.label.set(\"fill\", fill as any);\n\t\t\t\t}\n\n\t\t\t\tthis._labelDp = tooltipTarget.on(\"fill\" as any, (fill) => {\n\t\t\t\t\tif (fill != null) {\n\t\t\t\t\t\tthis.label.set(\"fill\", fill as any);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\tthis._updateTextColor(fill);\n\t}\n\n\n\tprotected _updateTextColor(fill?: Color | Pattern) {\n\t\tif (this.get(\"autoTextColor\")) {\n\t\t\tif (fill == null) {\n\t\t\t\tfill = this.get(\"background\")!.get(\"fill\") as Color;\n\t\t\t}\n\n\t\t\tif (fill == null) {\n\t\t\t\tfill = this._root.interfaceColors.get(\"background\");\n\t\t\t}\n\n\t\t\tif (fill instanceof Color) {\n\t\t\t\tthis.label.set(\"fill\", Color.alternative(fill, this._root.interfaceColors.get(\"alternativeText\"), this._root.interfaceColors.get(\"text\")));\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _setDataItem(dataItem?: DataItem<IComponentDataItem>): void {\n\t\tsuper._setDataItem(dataItem);\n\t\tthis.label._setDataItem(dataItem);\n\t}\n\n\n\tprotected _updateBackground() {\n\t\tsuper.updateBackground();\n\t\tconst parent = this._root.container;\n\n\t\tif (parent) {\n\n\t\t\tlet cw = 0.5;\n\t\t\tlet ch = 0.5;\n\n\t\t\tlet centerX = this.get(\"centerX\");\n\t\t\tif (centerX instanceof Percent) {\n\t\t\t\tcw = centerX.value;\n\t\t\t}\n\n\t\t\tlet centerY = this.get(\"centerY\");\n\t\t\tif (centerY instanceof Percent) {\n\t\t\t\tch = centerY.value;\n\t\t\t}\n\n\t\t\tlet parentW = parent.width();\n\t\t\tlet parentH = parent.height();\n\n\t\t\tconst bounds = this.get(\"bounds\", { left: 0, top: 0, right: parentW, bottom: parentH });\n\n\t\t\tthis._updateBounds();\n\n\t\t\tlet w = this.width();\n\t\t\tlet h = this.height();\n\n\t\t\t// use old w and h,as when tooltip is hidden, these are 0 and unneeded animation happens\n\t\t\tif (w === 0) {\n\t\t\t\tw = this._w;\n\t\t\t}\n\n\t\t\tif (h === 0) {\n\t\t\t\th = this._h;\n\t\t\t}\n\n\t\t\tlet pointTo = this.get(\"pointTo\", { x: parentW / 2, y: parentH / 2 });\n\t\t\tlet x = pointTo.x;\n\t\t\tlet y = pointTo.y;\n\n\t\t\tlet pointerOrientation = this.get(\"pointerOrientation\");\n\n\t\t\tlet background = this.get(\"background\");\n\t\t\tlet pointerLength = 0;\n\t\t\tlet bgStrokeSizeY = 0;\n\t\t\tlet bgStrokeSizeX = 0;\n\n\t\t\tif (background instanceof PointedRectangle) {\n\t\t\t\tpointerLength = background.get(\"pointerLength\", 0);\n\t\t\t\tbgStrokeSizeY = background.get(\"strokeWidth\", 0) / 2;\n\t\t\t\tbgStrokeSizeX = bgStrokeSizeY;\n\t\t\t}\n\n\t\t\tlet pointerX = 0;\n\t\t\tlet pointerY = 0;\n\n\t\t\tlet boundsW = bounds.right - bounds.left;\n\t\t\tlet boundsH = bounds.bottom - bounds.top;\n\n\n\n\t\t\t// horizontal\n\t\t\tif (pointerOrientation == \"horizontal\" || pointerOrientation == \"left\" || pointerOrientation == \"right\") {\n\t\t\t\tbgStrokeSizeY = 0;\n\t\t\t\tif (pointerOrientation == \"horizontal\") {\n\t\t\t\t\tif (x > bounds.left + boundsW / 2) {\n\t\t\t\t\t\tx -= (w * (1 - cw) + pointerLength);\n\t\t\t\t\t\tbgStrokeSizeX *= -1;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tx += (w * cw + pointerLength);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (pointerOrientation == \"left\") {\n\t\t\t\t\tx += (w * (1 - cw) + pointerLength);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tx -= (w * cw + pointerLength);\n\t\t\t\t\tbgStrokeSizeX *= -1;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// vertical pointer\n\t\t\telse {\n\t\t\t\tbgStrokeSizeX = 0;\n\t\t\t\tif (pointerOrientation == \"vertical\") {\n\t\t\t\t\tif (y > bounds.top + h / 2 + pointerLength) {\n\t\t\t\t\t\ty -= (h * (1 - ch) + pointerLength);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\ty += (h * ch + pointerLength);\n\t\t\t\t\t\tbgStrokeSizeY *= -1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (pointerOrientation == \"down\") {\n\t\t\t\t\ty -= (h * (1 - ch) + pointerLength);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ty += (h * ch + pointerLength);\n\t\t\t\t\tbgStrokeSizeY *= -1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tx = $math.fitToRange(x, bounds.left + w * cw, bounds.left + boundsW - w * (1 - cw)) + bgStrokeSizeX;\n\t\t\ty = $math.fitToRange(y, bounds.top + h * ch, bounds.top + boundsH - h * (1 - ch)) - bgStrokeSizeY;\n\n\t\t\tpointerX = pointTo.x - x + w * cw + bgStrokeSizeX;\n\t\t\tpointerY = pointTo.y - y + h * ch - bgStrokeSizeY;\n\n\t\t\tthis._fx = x;\n\t\t\tthis._fy = y;\n\n\t\t\tconst animationDuration = this.get(\"animationDuration\", 0);\n\n\t\t\tif (animationDuration > 0 && this.get(\"visible\") && this.get(\"opacity\") > 0.1) {\n\t\t\t\tconst animationEasing = this.get(\"animationEasing\");\n\t\t\t\tthis.animate({ key: \"x\", to: x, duration: animationDuration, easing: animationEasing });\n\t\t\t\tthis.animate({ key: \"y\", to: y, duration: animationDuration, easing: animationEasing });\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.set(\"x\", x);\n\t\t\t\tthis.set(\"y\", y);\n\t\t\t}\n\n\t\t\tif (background instanceof PointedRectangle) {\n\t\t\t\tbackground.set(\"pointerX\", pointerX);\n\t\t\t\tbackground.set(\"pointerY\", pointerY);\n\t\t\t}\n\n\t\t\tif (w > 0) {\n\t\t\t\tthis._w = w;\n\t\t\t}\n\t\t\tif (h > 0) {\n\t\t\t\tthis._h = h;\n\t\t\t}\n\t\t}\n\t}\n}\n", "import type { Language } from \"./Language\";\n\nimport { Entity, IEntitySettings, IEntityPrivate } from \"./Entity\"\nimport { TextFormatter } from \"./TextFormatter\";\n\nimport * as $object from \"./Object\";\nimport * as $utils from \"./Utils\";\nimport * as $type from \"./Type\";\n\n/**\n * @ignore\n */\nexport interface INumberSuffix {\n\tnumber: number;\n\tsuffix: string;\n}\n\nexport interface INumberFormatterSettings extends IEntitySettings {\n\n\t/**\n\t * Number format to be used when formatting numbers.\n\t *\n\t * @default \"#,###.#####\"\n\t */\n\tnumberFormat?: string | Intl.NumberFormatOptions;\n\n\t/**\n\t * A threshold value for negative numbers.\n\t *\n\t * @default 0\n\t */\n\tnegativeBase?: number;\n\n\t/**\n\t * Prefixes and thresholds to group big numbers into, e.g. 1M.\n\t *\n\t * Used in conjunction with `a` modifier of the number format.\n\t */\n\tbigNumberPrefixes?: INumberSuffix[];\n\n\t/**\n\t * Prefixes and thresholds to group small numbers into, e.g. 1m.\n\t *\n\t * Used in conjunction with `a` modifier of the number format.\n\t */\n\tsmallNumberPrefixes?: INumberSuffix[];\n\n\t/**\n\t * All numbers below this value are considered small.\n\t *\n\t * @default 1\n\t */\n\tsmallNumberThreshold?: number;\n\n\t/**\n\t * Prefixes to and thresholds to use when grouping data size numbers, e.g. 1MB.\n\t *\n\t * Used in conjunction with `b` modifier of the number format.\n\t */\n\tbytePrefixes?: INumberSuffix[];\n\n\t/**\n\t * Indicates which fields in data should be considered numeric.\n\t *\n\t * It is used when formatting data placeholder values.\n\t */\n\tnumericFields?: string[];\n\n\t/**\n\t * Locales if you are using date formats in `Intl.NumberFormatOptions` syntax.\n\t *\n\t * @see (@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat) about using Intl for number formatting\n\t * @param value Locales\n\t */\n\tintlLocales?: string;\n\n}\n\nexport interface INumberFormatterPrivate extends IEntityPrivate {\n}\n\n/**\n * Number formatter\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-numbers/} for more info\n * @important\n */\nexport class NumberFormatter extends Entity {\n\tdeclare public _settings: INumberFormatterSettings;\n\tdeclare public _privateSettings: INumberFormatterPrivate;\n\n\tprotected _setDefaults() {\n\t\t// Defaults\n\t\tthis._setDefault(\"negativeBase\", 0);\n\t\tthis._setDefault(\"numberFormat\", \"#,###.#####\");\n\t\tthis._setDefault(\"smallNumberThreshold\", 1.00);\n\n\t\tconst bns = \"_big_number_suffix_\";\n\t\tconst sns = \"_small_number_suffix_\";\n\t\tconst bs = \"_byte_suffix_\";\n\n\t\tthis._setDefault(\"bigNumberPrefixes\", [\n\t\t\t{ \"number\": 1e+3, \"suffix\": this._t(bns + \"3\") },\n\t\t\t{ \"number\": 1e+6, \"suffix\": this._t(bns + \"6\") },\n\t\t\t{ \"number\": 1e+9, \"suffix\": this._t(bns + \"9\") },\n\t\t\t{ \"number\": 1e+12, \"suffix\": this._t(bns + \"12\") },\n\t\t\t{ \"number\": 1e+15, \"suffix\": this._t(bns + \"15\") },\n\t\t\t{ \"number\": 1e+18, \"suffix\": this._t(bns + \"18\") },\n\t\t\t{ \"number\": 1e+21, \"suffix\": this._t(bns + \"21\") },\n\t\t\t{ \"number\": 1e+24, \"suffix\": this._t(bns + \"24\") }\n\t\t]);\n\n\t\tthis._setDefault(\"smallNumberPrefixes\", [\n\t\t\t{ \"number\": 1e-24, \"suffix\": this._t(sns + \"24\") },\n\t\t\t{ \"number\": 1e-21, \"suffix\": this._t(sns + \"21\") },\n\t\t\t{ \"number\": 1e-18, \"suffix\": this._t(sns + \"18\") },\n\t\t\t{ \"number\": 1e-15, \"suffix\": this._t(sns + \"15\") },\n\t\t\t{ \"number\": 1e-12, \"suffix\": this._t(sns + \"12\") },\n\t\t\t{ \"number\": 1e-9, \"suffix\": this._t(sns + \"9\") },\n\t\t\t{ \"number\": 1e-6, \"suffix\": this._t(sns + \"6\") },\n\t\t\t{ \"number\": 1e-3, \"suffix\": this._t(sns + \"3\") }\n\t\t]);\n\n\t\tthis._setDefault(\"bytePrefixes\", [\n\t\t\t{ \"number\": 1, suffix: this._t(bs + \"B\") },\n\t\t\t{ \"number\": 1024, suffix: this._t(bs + \"KB\") },\n\t\t\t{ \"number\": 1048576, suffix: this._t(bs + \"MB\") },\n\t\t\t{ \"number\": 1073741824, suffix: this._t(bs + \"GB\") },\n\t\t\t{ \"number\": 1099511627776, suffix: this._t(bs + \"TB\") },\n\t\t\t{ \"number\": 1125899906842624, suffix: this._t(bs + \"PB\") }\n\t\t]);\n\n\t\tsuper._setDefaults();\n\t}\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\t}\n\n\t/**\n\t * Formats the number according to specific format.\n\t *\n\t * @param value   Value to format\n\t * @param format  Format to apply\n\t * @return Formatted number\n\t */\n\tpublic format(value: number | string, format?: string | Intl.NumberFormatOptions, precision?: number): string {\n\n\t\t// no format passed in or \"Number\"\n\t\tif (format == null || ($type.isString(format) && format.toLowerCase() === \"number\")) {\n\t\t\tformat = this.get(\"numberFormat\", \"\");\n\t\t}\n\n\t\t// Init return value\n\t\tlet formatted;\n\n\t\t// Cast to number just in case\n\t\t// TODO: maybe use better casting\n\t\tlet source: number = Number(value);\n\n\t\t// Is it a built-in format or Intl.NumberFormatOptions\n\t\tif ($type.isObject(format)) {\n\t\t\ttry {\n\t\t\t\tif (this.get(\"intlLocales\")) {\n\t\t\t\t\treturn new Intl.NumberFormat(this.get(\"intlLocales\"), <Intl.NumberFormatOptions>format).format(source);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn new Intl.NumberFormat(undefined, <Intl.NumberFormatOptions>format).format(source);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\treturn \"Invalid\";\n\t\t\t}\n\n\t\t}\n\t\telse {\n\n\t\t\t// Clean format\n\t\t\tformat = $utils.cleanFormat(format!);\n\n\t\t\t// Get format info (it will also deal with parser caching)\n\t\t\tlet info = this.parseFormat(format, this._root.language);\n\n\n\t\t\t// format and replace the number\n\t\t\tlet details;\n\t\t\tif (source > this.get(\"negativeBase\")) {\n\t\t\t\tdetails = info.positive;\n\t\t\t}\n\t\t\telse if (source < this.get(\"negativeBase\")) {\n\t\t\t\tdetails = info.negative;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdetails = info.zero;\n\t\t\t}\n\n\t\t\t// Adjust precision\n\t\t\tif (precision != null && !details.mod) {\n\t\t\t\tdetails = $object.copy(details);\n\t\t\t\tdetails.decimals.active = source == 0 ? 0 : precision;\n\t\t\t}\n\n\t\t\t// Format\n\t\t\tformatted = details.template.split($type.PLACEHOLDER).join(this.applyFormat(source, details));\n\n\t\t}\n\n\t\treturn formatted;\n\t}\n\n\t/**\n\t * Parses supplied format into structured object which can be used to format\n\t * the number.\n\t *\n\t * @param format Format string, i.e. \"#,###.00\"\n\t * @param language Language\n\t * @ignore\n\t */\n\tprotected parseFormat(format: string, language: Language): any {\n\n\t\t// Check cache\n\t\t// TODO\n\t\t// let cached = this.getCache(format);\n\t\t// if (cached != null) {\n\t\t// \treturn cached;\n\t\t// }\n\n\t\tconst thousandSeparator = language.translateEmpty(\"_thousandSeparator\");\n\t\tconst decimalSeparator = language.translateEmpty(\"_decimalSeparator\")\n\n\t\t// init format parse info holder\n\t\tlet info: any = {\n\t\t\t\"positive\": {\n\t\t\t\t\"thousands\": {\n\t\t\t\t\t\"active\": -1,\n\t\t\t\t\t\"passive\": -1,\n\t\t\t\t\t\"interval\": -1,\n\t\t\t\t\t\"separator\": thousandSeparator\n\t\t\t\t},\n\t\t\t\t\"decimals\": {\n\t\t\t\t\t\"active\": -1,\n\t\t\t\t\t\"passive\": -1,\n\t\t\t\t\t\"separator\": decimalSeparator\n\t\t\t\t},\n\t\t\t\t\"template\": \"\",\n\t\t\t\t\"source\": \"\",\n\t\t\t\t\"parsed\": false\n\t\t\t},\n\t\t\t\"negative\": {\n\t\t\t\t\"thousands\": {\n\t\t\t\t\t\"active\": -1,\n\t\t\t\t\t\"passive\": -1,\n\t\t\t\t\t\"interval\": -1,\n\t\t\t\t\t\"separator\": thousandSeparator\n\t\t\t\t},\n\t\t\t\t\"decimals\": {\n\t\t\t\t\t\"active\": -1,\n\t\t\t\t\t\"passive\": -1,\n\t\t\t\t\t\"separator\": decimalSeparator\n\t\t\t\t},\n\t\t\t\t\"template\": \"\",\n\t\t\t\t\"source\": \"\",\n\t\t\t\t\"parsed\": false\n\t\t\t},\n\t\t\t\"zero\": {\n\t\t\t\t\"thousands\": {\n\t\t\t\t\t\"active\": -1,\n\t\t\t\t\t\"passive\": -1,\n\t\t\t\t\t\"interval\": -1,\n\t\t\t\t\t\"separator\": thousandSeparator\n\t\t\t\t},\n\t\t\t\t\"decimals\": {\n\t\t\t\t\t\"active\": -1,\n\t\t\t\t\t\"passive\": -1,\n\t\t\t\t\t\"separator\": decimalSeparator\n\t\t\t\t},\n\t\t\t\t\"template\": \"\",\n\t\t\t\t\"source\": \"\",\n\t\t\t\t\"parsed\": false\n\t\t\t}\n\t\t};\n\n\t\t// Escape double vertical bars (that mean display one vertical bar)\n\t\tformat = format.replace(\"||\", $type.PLACEHOLDER2);\n\n\t\t// Split it up and deal with different formats\n\t\tlet parts = format.split(\"|\");\n\t\tinfo.positive.source = parts[0];\n\n\t\tif (typeof parts[2] === \"undefined\") {\n\t\t\tinfo.zero = info.positive;\n\t\t}\n\t\telse {\n\t\t\tinfo.zero.source = parts[2];\n\t\t}\n\n\t\tif (typeof parts[1] === \"undefined\") {\n\t\t\tinfo.negative = info.positive;\n\t\t}\n\t\telse {\n\t\t\tinfo.negative.source = parts[1];\n\t\t}\n\n\t\t// Parse each\n\t\t$object.each(info, (_part, item) => {\n\t\t\t// Already parsed\n\t\t\tif (item.parsed) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Check cached\n\t\t\t// TODO\n\t\t\t// if (typeof this.getCache(item.source) !== \"undefined\") {\n\t\t\t// \tinfo[part] = this.getCache(item.source);\n\t\t\t// \treturn;\n\t\t\t// }\n\n\t\t\t// Begin parsing\n\t\t\tlet partFormat = item.source;\n\n\t\t\t// Just \"Number\"?\n\t\t\tif (partFormat.toLowerCase() === \"number\") {\n\t\t\t\tpartFormat = this.get(\"numberFormat\", \"#,###.#####\");\n\t\t\t}\n\n\t\t\t// Let TextFormatter split into chunks\n\t\t\tlet chunks = TextFormatter.chunk(partFormat, true);\n\t\t\tfor (let i: number = 0; i < chunks.length; i++) {\n\t\t\t\tlet chunk = chunks[i];\n\n\t\t\t\t// replace back double vertical bar\n\t\t\t\tchunk.text = chunk.text.replace($type.PLACEHOLDER2, \"|\");\n\n\t\t\t\tif (chunk.type === \"value\") {\n\t\t\t\t\t// Parse format\n\n\t\t\t\t\t// Look for codes\n\t\t\t\t\tlet matches: string[] | null = chunk.text.match(/[#0.,]+[ ]?[abespABESP%!]?[abespABESP‰!]?/);\n\n\t\t\t\t\tif (matches) {\n\t\t\t\t\t\tif (matches === null || matches[0] === \"\") {\n\t\t\t\t\t\t\t// no codes here - assume string\n\t\t\t\t\t\t\t// nothing to do here\n\t\t\t\t\t\t\titem.template += chunk.text;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\n\t\t\t\t\t\t\t// look for the format modifiers at the end\n\t\t\t\t\t\t\tlet mods: string[] | null = matches[0].match(/[abespABESP%‰!]{2}|[abespABESP%‰]{1}$/);\n\n\t\t\t\t\t\t\tif (mods) {\n\t\t\t\t\t\t\t\titem.mod = mods[0].toLowerCase();\n\t\t\t\t\t\t\t\titem.modSpacing = matches[0].match(/[ ]{1}[abespABESP%‰!]{1}$/) ? true : false;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// break the format up\n\t\t\t\t\t\t\tlet a = matches[0].split(\".\");\n\n\t\t\t\t\t\t\t// Deal with thousands\n\t\t\t\t\t\t\tif (a[0] === \"\") {\n\t\t\t\t\t\t\t\t// No directives for thousands\n\t\t\t\t\t\t\t\t// Leave default settings (no formatting)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t// Counts\n\t\t\t\t\t\t\t\titem.thousands.active = (a[0].match(/0/g) || []).length;\n\t\t\t\t\t\t\t\titem.thousands.passive = (a[0].match(/\\#/g) || []).length + item.thousands.active;\n\n\t\t\t\t\t\t\t\t// Separator interval\n\t\t\t\t\t\t\t\tlet b = a[0].split(\",\");\n\t\t\t\t\t\t\t\tif (b.length === 1) {\n\t\t\t\t\t\t\t\t\t// No thousands separators\n\t\t\t\t\t\t\t\t\t// Do nothing\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t// Use length fo the last chunk as thousands length\n\t\t\t\t\t\t\t\t\titem.thousands.interval = (b.pop() || \"\").length;\n\n\t\t\t\t\t\t\t\t\tif (item.thousands.interval === 0) {\n\t\t\t\t\t\t\t\t\t\titem.thousands.interval = -1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Deal with decimals\n\t\t\t\t\t\t\tif (typeof (a[1]) === \"undefined\") {\n\t\t\t\t\t\t\t\t// No directives for decimals\n\t\t\t\t\t\t\t\t// Leave at defaults (no formatting)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t// Counts\n\t\t\t\t\t\t\t\titem.decimals.active = (a[1].match(/0/g) || []).length;\n\t\t\t\t\t\t\t\titem.decimals.passive = (a[1].match(/\\#/g) || []).length + item.decimals.active;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Add special code to template\n\t\t\t\t\t\t\titem.template += chunk.text.split(matches[0]).join($type.PLACEHOLDER);\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Quoted string - take it as it is\n\t\t\t\t\titem.template += chunk.text;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Apply style formatting\n\t\t\t//item.template = getTextFormatter().format(item.template, this.outputFormat);\n\n\t\t\t// Save cache\n\t\t\t// TODO\n\t\t\t//this.setCache(item.source, item);\n\n\t\t\t// Mark this as parsed\n\t\t\titem.parsed = true;\n\n\t\t});\n\n\t\t// Save cache (the whole thing)\n\t\t// TODO\n\t\t//this.setCache(format, info);\n\n\t\treturn info;\n\t}\n\n\t/**\n\t * Applies parsed format to a numeric value.\n\t *\n\t * @param value    Value\n\t * @param details  Parsed format as returned by parseFormat()\n\t * @return Formatted number\n\t * @ignore\n\t */\n\tprotected applyFormat(value: number, details: any): string {\n\n\t\t// Use absolute values\n\t\tlet negative: boolean = value < 0;\n\t\tvalue = Math.abs(value);\n\n\t\t// Recalculate according to modifier\n\t\tlet prefix: string = \"\", suffix: string = \"\";\n\t\tlet mods: string[] = details.mod ? details.mod.split(\"\") : [];\n\t\tif (mods.indexOf(\"b\") !== -1) {\n\t\t\tlet a = this.applyPrefix(value, this.get(\"bytePrefixes\")!, mods.indexOf(\"!\") !== -1);\n\t\t\tvalue = a[0];\n\t\t\tprefix = a[1];\n\t\t\tsuffix = a[2];\n\t\t\tif (details.modSpacing) {\n\t\t\t\tsuffix = \" \" + suffix;\n\t\t\t}\n\t\t}\n\t\telse if (mods.indexOf(\"a\") !== -1) {\n\t\t\tlet a = this.applyPrefix(value, value < this.get(\"smallNumberThreshold\")! ? this.get(\"smallNumberPrefixes\")! : this.get(\"bigNumberPrefixes\")!, mods.indexOf(\"!\") !== -1);\n\t\t\tvalue = a[0];\n\t\t\tprefix = a[1];\n\t\t\tsuffix = a[2];\n\t\t\tif (details.modSpacing) {\n\t\t\t\tsuffix = \" \" + suffix;\n\t\t\t}\n\t\t}\n\t\telse if (mods.indexOf(\"p\") !== -1) {\n\t\t\tlet ol = Math.min(value.toString().length + 2, 21);\n\t\t\t//value *= 100;\n\t\t\tvalue = parseFloat(value.toPrecision(ol));\n\t\t\tprefix = this._root.language.translate(\"_percentPrefix\");\n\t\t\tsuffix = this._root.language.translate(\"_percentSuffix\");\n\t\t\tif (prefix == \"\" && suffix == \"\") {\n\t\t\t\tsuffix = \"%\";\n\t\t\t}\n\t\t}\n\t\telse if (mods.indexOf(\"%\") !== -1) {\n\t\t\tlet ol = Math.min(value.toString().length + 2, 21);\n\t\t\tvalue *= 100;\n\t\t\tvalue = parseFloat(value.toPrecision(ol));\n\t\t\tsuffix = \"%\";\n\t\t}\n\t\telse if (mods.indexOf(\"‰\") !== -1) {\n\t\t\tlet ol = Math.min(value.toString().length + 3, 21);\n\t\t\tvalue *= 1000;\n\t\t\tvalue = parseFloat(value.toPrecision(ol));\n\t\t\tsuffix = \"‰\";\n\t\t}\n\n\t\t// Round to passive\n\t\tif (mods.indexOf(\"e\") !== -1) {\n\t\t\t// convert the value to exponential\n\t\t\tlet exp: string[];\n\t\t\tif (details.decimals.passive >= 0) {\n\t\t\t\texp = value.toExponential(details.decimals.passive).split(\"e\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\texp = value.toExponential().split(\"e\");\n\t\t\t}\n\t\t\tvalue = Number(exp[0]);\n\t\t\tsuffix = \"e\" + exp[1];\n\t\t\tif (details.modSpacing) {\n\t\t\t\tsuffix = \" \" + suffix;\n\t\t\t}\n\t\t}\n\t\telse if (details.decimals.passive === 0) {\n\t\t\tvalue = Math.round(value);\n\t\t}\n\t\telse if (details.decimals.passive > 0) {\n\t\t\tlet d: number = Math.pow(10, details.decimals.passive);\n\t\t\tvalue = Math.round(value * d) / d;\n\t\t}\n\n\t\t// Init return value\n\t\tlet res: string = \"\";\n\n\t\t// Calc integer and decimal parts\n\t\tlet a = $type.numberToString(value).split(\".\");\n\n\t\t// Format integers\n\t\tlet ints = a[0];\n\n\t\t// Pad integers to active length\n\t\tif (ints.length < details.thousands.active) {\n\t\t\tints = Array(details.thousands.active - ints.length + 1).join(\"0\") + ints;\n\t\t}\n\n\t\t// Insert thousands separators\n\t\tif (details.thousands.interval > 0) {\n\t\t\tlet ip: string[] = [];\n\t\t\tlet intsr: string = ints.split(\"\").reverse().join(\"\");\n\t\t\tfor (let i = 0, len = ints.length; i <= len; i += details.thousands.interval) {\n\t\t\t\tlet c: string = intsr.substr(i, details.thousands.interval).split(\"\").reverse().join(\"\");\n\t\t\t\tif (c !== \"\") {\n\t\t\t\t\tip.unshift(c);\n\t\t\t\t}\n\t\t\t}\n\t\t\tints = ip.join(details.thousands.separator);\n\t\t}\n\n\t\t// Add integers\n\t\tres += ints;\n\n\t\t// Add decimals\n\t\tif (a.length === 1) {\n\t\t\ta.push(\"\");\n\t\t}\n\t\tlet decs: string = a[1];\n\n\t\t// Fill zeros?\n\t\tif (decs.length < details.decimals.active) {\n\t\t\tdecs += Array(details.decimals.active - decs.length + 1).join(\"0\");\n\t\t}\n\n\t\tif (decs !== \"\") {\n\t\t\tres += details.decimals.separator + decs;\n\t\t}\n\n\t\t// Can't have empty return value\n\t\tif (res === \"\") {\n\t\t\tres = \"0\";\n\t\t}\n\n\t\t// Add minus sign back\n\t\tif (value !== 0 && negative && (mods.indexOf(\"s\") === -1)) {\n\t\t\tres = \"-\" + res;\n\t\t}\n\n\t\t// Add suffixes/prefixes\n\t\tif (prefix) {\n\t\t\tres = prefix + res;\n\t\t}\n\t\tif (suffix) {\n\t\t\tres += suffix;\n\t\t}\n\n\t\treturn res;\n\t}\n\n\n\tprotected applyPrefix(value: number, prefixes: any[], force: boolean = false): any[] {\n\t\tlet newvalue = value;\n\t\tlet prefix = \"\";\n\t\tlet suffix = \"\";\n\t\tlet applied = false;\n\t\tlet k = 1;\n\n\t\tfor (let i = 0, len = prefixes.length; i < len; i++) {\n\t\t\tif (prefixes[i].number <= value) {\n\t\t\t\tif (prefixes[i].number === 0) {\n\t\t\t\t\tnewvalue = 0;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnewvalue = value / prefixes[i].number;\n\t\t\t\t\tk = prefixes[i].number;\n\t\t\t\t}\n\t\t\t\tprefix = prefixes[i].prefix;\n\t\t\t\tsuffix = prefixes[i].suffix;\n\t\t\t\tapplied = true;\n\t\t\t}\n\t\t}\n\n\n\t\tif (!applied && force && prefixes.length && value != 0) {\n\t\t\t// Prefix was not applied. Use the first prefix.\n\t\t\tnewvalue = value / prefixes[0].number;\n\t\t\tprefix = prefixes[0].prefix;\n\t\t\tsuffix = prefixes[0].suffix;\n\t\t\tapplied = true;\n\t\t}\n\n\t\tif (applied) {\n\t\t\tnewvalue = parseFloat(\n\t\t\t\tnewvalue.toPrecision(\n\t\t\t\t\tMath.min(k.toString().length + Math.floor(newvalue).toString().replace(/[^0-9]*/g, \"\").length, 21)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t\treturn [newvalue, prefix, suffix];\n\t}\n\n\t/**\n\t * Replaces brackets with temporary placeholders.\n\t *\n\t * @ignore Exclude from docs\n\t * @param text  Input text\n\t * @return Escaped text\n\t */\n\tpublic escape(text: string): string {\n\t\treturn text.replace(\"||\", $type.PLACEHOLDER2);\n\t}\n\n\t/**\n\t * Replaces placeholders back to brackets.\n\t *\n\t * @ignore Exclude from docs\n\t * @param text  Escaped text\n\t * @return Unescaped text\n\t */\n\tpublic unescape(text: string): string {\n\t\treturn text.replace($type.PLACEHOLDER2, \"|\");\n\t}\n\n}\n", "interface ParsedDate {\n\tyear: number,\n\tmonth: number,\n\tday: number,\n\thour: number,\n\tminute: number,\n\tsecond: number,\n\tmillisecond: number,\n\tweekday: number\n}\n\nfunction parseDate(timezone: Intl.DateTimeFormat, date: Date): ParsedDate {\n\tlet year = 0;\n\tlet month = 0;\n\tlet day = 1;\n\tlet hour = 0;\n\tlet minute = 0;\n\tlet second = 0;\n\tlet millisecond = 0;\n\tlet weekday = 0;\n\n\ttimezone.formatToParts(date).forEach((x) => {\n\t\tswitch (x.type) {\n\t\t\tcase \"year\":\n\t\t\t\tyear = +x.value;\n\t\t\t\tbreak;\n\t\t\tcase \"month\":\n\t\t\t\tmonth = (+x.value) - 1;\n\t\t\t\tbreak;\n\t\t\tcase \"day\":\n\t\t\t\tday = +x.value;\n\t\t\t\tbreak;\n\t\t\tcase \"hour\":\n\t\t\t\thour = +x.value;\n\t\t\t\tbreak;\n\t\t\tcase \"minute\":\n\t\t\t\tminute = +x.value;\n\t\t\t\tbreak;\n\t\t\tcase \"second\":\n\t\t\t\tsecond = +x.value;\n\t\t\t\tbreak;\n\t\t\tcase \"fractionalSecond\" as any:\n\t\t\t\tmillisecond = +x.value;\n\t\t\t\tbreak;\n\t\t\tcase \"weekday\":\n\t\t\t\tswitch (x.value) {\n\t\t\t\t\tcase \"Sun\":\n\t\t\t\t\t\tweekday = 0;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Mon\":\n\t\t\t\t\t\tweekday = 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Tue\":\n\t\t\t\t\t\tweekday = 2;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Wed\":\n\t\t\t\t\t\tweekday = 3;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Thu\":\n\t\t\t\t\t\tweekday = 4;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Fri\":\n\t\t\t\t\t\tweekday = 5;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Sat\":\n\t\t\t\t\t\tweekday = 6;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t}\n\t});\n\n\tif (hour === 24) {\n\t\thour = 0;\n\t}\n\n\treturn { year, month, day, hour, minute, second, millisecond, weekday };\n}\n\n\nfunction toUTCDate(timezone: Intl.DateTimeFormat, date: Date): number {\n\tconst { year, month, day, hour, minute, second, millisecond } = parseDate(timezone, date);\n\treturn Date.UTC(year, month, day, hour, minute, second, millisecond);\n}\n\n\nexport class Timezone {\n\tprivate _utc: Intl.DateTimeFormat;\n\tprivate _dtf: Intl.DateTimeFormat;\n\n\tpublic readonly name: string | undefined;\n\n\t/**\n\t * Use this method to create an instance of this class.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/getting-started/#New_element_syntax} for more info\n\t * @param   timezone  IANA timezone\n\t * @return            Instantiated object\n\t */\n\tstatic new<C extends typeof Timezone, T extends InstanceType<C>>(this: C, timezone: string | undefined): T {\n\t\treturn (new this(timezone, true)) as T;\n\t}\n\n\tconstructor(timezone: string | undefined, isReal: boolean) {\n\t\tif (!isReal) {\n\t\t\tthrow new Error(\"You cannot use `new Class()`, instead use `Class.new()`\");\n\t\t}\n\n\t\tthis.name = timezone;\n\n\t\tthis._utc = new Intl.DateTimeFormat(\"UTC\", {\n\t\t\thour12: false,\n\t\t\ttimeZone: \"UTC\",\n\t\t\tyear: \"numeric\",\n\t\t\tmonth: \"2-digit\",\n\t\t\tday: \"2-digit\",\n\t\t\thour: \"2-digit\",\n\t\t\tminute: \"2-digit\",\n\t\t\tsecond: \"2-digit\",\n\t\t\tweekday: \"short\",\n\t\t\tfractionalSecondDigits: 3,\n\t\t} as any);\n\n\t\tthis._dtf = new Intl.DateTimeFormat(\"UTC\", {\n\t\t\thour12: false,\n\t\t\ttimeZone: timezone,\n\t\t\tyear: \"numeric\",\n\t\t\tmonth: \"2-digit\",\n\t\t\tday: \"2-digit\",\n\t\t\thour: \"2-digit\",\n\t\t\tminute: \"2-digit\",\n\t\t\tsecond: \"2-digit\",\n\t\t\tweekday: \"short\",\n\t\t\tfractionalSecondDigits: 3,\n\t\t} as any);\n\t}\n\n\tconvertLocal(date: Date): Date {\n\t\tconst offset = this.offsetUTC(date);\n\t\tconst userOffset = date.getTimezoneOffset();\n\t\tconst output = new Date(date);\n\t\toutput.setUTCMinutes(output.getUTCMinutes() - (offset - userOffset));\n\n\t\tconst newUserOffset = output.getTimezoneOffset();\n\n\t\tif (userOffset != newUserOffset) {\n\t\t\toutput.setUTCMinutes(output.getUTCMinutes() + newUserOffset - userOffset)\n\t\t}\n\n\t\treturn output;\n\t}\n\n\toffsetUTC(date: Date): number {\n\t\tconst utc = toUTCDate(this._utc, date);\n\t\tconst dtf = toUTCDate(this._dtf, date);\n\t\treturn (utc - dtf) / 60000;\n\t}\n\n\tparseDate(date: Date): ParsedDate {\n\t\treturn parseDate(this._dtf, date)\n\t}\n}\n", "import type { ILocaleSettings } from \"./Language\"\n\nimport { Entity, IEntitySettings, IEntityPrivate } from \"./Entity\"\nimport { TextFormatter } from \"./TextFormatter\"\nimport { Timezone } from \"./Timezone\"\n\nimport * as $type from \"./Type\"\nimport * as $utils from \"./Utils\";\n\n/**\n * Interface describing parsed date format definition.\n *\n * @ignore\n */\nexport interface DateFormatInfo {\n\t\"template\": string;\n\t\"parts\": any[];\n}\n\nexport interface IDateFormatterSettings extends IEntitySettings {\n\n\t/**\n\t * Should the first letter of the formatted date be capitalized?\n\t *\n\t * @default true\n\t */\n\tcapitalize?: boolean;\n\n\t/**\n\t * A date format to be used when formatting dates.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/} for more info\n\t */\n\tdateFormat?: string | Intl.DateTimeFormatOptions;\n\n\t/**\n\t * An array of data fields that hold date values and should be formatted\n\t * with a [[DateFormatter]].\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/data-placeholders/#Formatting_placeholders} for more info\n\t */\n\tdateFields?: string[];\n\n\t/**\n\t * Locales to use when formatting using `Intl.DateFormatter`.\n\t */\n\tintlLocales?: string;\n\n}\n\nexport interface IDateFormatterPrivate extends IEntityPrivate {\n}\n\ntype Months = \"January\" | \"February\" | \"March\" | \"April\" | \"May\" | \"June\" | \"July\" | \"August\" | \"September\" | \"October\" | \"November\" | \"December\";\ntype ShortMonths = \"Jan\" | \"Feb\" | \"Mar\" | \"Apr\" | \"May(short)\" | \"Jun\" | \"Jul\" | \"Aug\" | \"Sep\" | \"Oct\" | \"Nov\" | \"Dec\";\ntype Weekdays = \"Sunday\" | \"Monday\" | \"Tuesday\" | \"Wednesday\" | \"Thursday\" | \"Friday\" | \"Saturday\";\ntype ShortWeekdays = \"Sun\" | \"Mon\" | \"Tue\" | \"Wed\" | \"Thu\" | \"Fri\" | \"Sat\";\n\nexport class DateFormatter extends Entity {\n\tdeclare public _settings: IDateFormatterSettings;\n\tdeclare public _privateSettings: IDateFormatterPrivate;\n\n\tprotected _setDefaults() {\n\t\t// Defaults\n\t\tthis._setDefault(\"capitalize\", true);\n\t\tthis._setDefault(\"dateFormat\", \"yyyy-MM-dd\");\n\n\t\tsuper._setDefaults();\n\t}\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\t}\n\n\tpublic format(source: any, format?: string | Intl.DateTimeFormatOptions): string {\n\n\t\t// Locale?\n\t\t// TODO\n\n\t\t// No format passed in or it's empty\n\t\tif (typeof format === \"undefined\" || format === \"\") {\n\t\t\tformat = this.get(\"dateFormat\", \"yyyy-MM-dd\");\n\t\t}\n\n\t\t// Init return value\n\t\tlet formatted;\n\n\t\t// Cast?\n\t\t// TODO: decide if we need to cast\n\t\tlet date: Date = source;\n\n\t\t// Is it a built-in format or Intl.DateTimeFormat\n\t\tif ($type.isObject(format)) {\n\n\t\t\ttry {\n\t\t\t\tconst locales = this.get(\"intlLocales\");\n\t\t\t\tif (locales) {\n\t\t\t\t\treturn new Intl.DateTimeFormat(locales, <Intl.DateTimeFormatOptions>format).format(date);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn new Intl.DateTimeFormat(undefined, <Intl.DateTimeFormatOptions>format).format(date);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\treturn \"Invalid\";\n\t\t\t}\n\n\t\t}\n\n\t\t// get format info (it will also deal with parser caching)\n\t\tlet info = this.parseFormat(format);\n\n\t\t// Should we apply custom time zone?\n\t\tconst timezone = this._root.timezone;\n\t\tif (timezone && !this._root.utc) {\n\t\t\tdate = timezone.convertLocal(date);\n\t\t}\n\n\n\t\t// Check if it's a valid date\n\t\tif (!$type.isNumber(date.getTime())) {\n\t\t\t// TODO translation\n\t\t\t//return this._t(\"Invalid date\");\n\t\t\treturn \"Invalid date\";\n\t\t}\n\n\t\t// Apply format\n\t\tformatted = this.applyFormat(date, info);\n\n\t\t// Capitalize\n\t\tif (this.get(\"capitalize\")) {\n\t\t\tformatted = formatted.replace(\n\t\t\t\t/^.{1}/, formatted.substr(0, 1).toUpperCase()\n\t\t\t);\n\t\t}\n\n\t\t// We're done\n\t\treturn formatted;\n\t}\n\n\t/**\n\t * Applies format to Date.\n\t *\n\t * @param date      Date object\n\t * @param info      Parsed format information\n\t * @return Formatted date string\n\t */\n\tprotected applyFormat(date: Date, info: DateFormatInfo): string {\n\n\t\t// Init return value\n\t\tlet res = info.template;\n\n\t\t// Get values\n\t\tlet fullYear: number,\n\t\t\tmonth: number,\n\t\t\tweekday: number,\n\t\t\tday: number,\n\t\t\thours: number,\n\t\t\tminutes: number,\n\t\t\tseconds: number,\n\t\t\tmilliseconds: number,\n\t\t\ttimestamp: number = date.getTime();\n\t\tif (this._root.utc) {\n\t\t\tfullYear = date.getUTCFullYear();\n\t\t\tmonth = date.getUTCMonth();\n\t\t\tweekday = date.getUTCDay();\n\t\t\tday = date.getUTCDate();\n\t\t\thours = date.getUTCHours();\n\t\t\tminutes = date.getUTCMinutes();\n\t\t\tseconds = date.getUTCSeconds();\n\t\t\tmilliseconds = date.getUTCMilliseconds();\n\t\t}\n\t\telse {\n\t\t\tfullYear = date.getFullYear();\n\t\t\tmonth = date.getMonth();\n\t\t\tweekday = date.getDay();\n\t\t\tday = date.getDate();\n\t\t\thours = date.getHours();\n\t\t\tminutes = date.getMinutes();\n\t\t\tseconds = date.getSeconds();\n\t\t\tmilliseconds = date.getMilliseconds();\n\t\t}\n\n\t\t// Go through each part and format/replace it in template\n\t\tfor (let i = 0, len = info.parts.length; i < len; i++) {\n\t\t\tlet value: string = \"\";\n\t\t\tswitch (info.parts[i]) {\n\n\t\t\t\tcase \"G\":\n\t\t\t\t\tvalue = this._t(\n\t\t\t\t\t\tfullYear < 0\n\t\t\t\t\t\t\t? \"_era_bc\"\n\t\t\t\t\t\t\t: \"_era_ad\"\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"yyyy\":\n\t\t\t\t\tvalue = Math.abs(fullYear).toString();\n\t\t\t\t\tif (fullYear < 0) {\n\t\t\t\t\t\tvalue += this._t(\"_era_bc\");\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"yyy\":\n\t\t\t\tcase \"yy\":\n\t\t\t\tcase \"y\":\n\t\t\t\t\tvalue = Math.abs(fullYear).toString().substr(-info.parts[i].length);\n\t\t\t\t\tif (fullYear < 0) {\n\t\t\t\t\t\tvalue += this._t(\"_era_bc\");\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"YYYY\":\n\t\t\t\tcase \"YYY\":\n\t\t\t\tcase \"YY\":\n\t\t\t\tcase \"Y\":\n\t\t\t\t\tlet week = $utils.getWeek(date);\n\t\t\t\t\tlet year = fullYear;\n\t\t\t\t\tif (week == 1 && (weekday > 4)) {\n\t\t\t\t\t\tyear--;\n\t\t\t\t\t}\n\t\t\t\t\tif (info.parts[i] == \"YYYY\") {\n\t\t\t\t\t\tvalue = Math.abs(year).toString();\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvalue = Math.abs(year).toString().substr(-info.parts[i].length);\n\t\t\t\t\t}\n\t\t\t\t\tif (year < 0) {\n\t\t\t\t\t\tvalue += this._t(\"_era_bc\");\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"u\":\n\t\t\t\t\t// @todo\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"q\":\n\t\t\t\t\tvalue = \"\" + Math.ceil((date.getMonth() + 1) / 3);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"MMMMM\":\n\t\t\t\t\tvalue = this._t(this._getMonth(month)).substr(0, 1);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"MMMM\":\n\t\t\t\t\tvalue = this._t(this._getMonth(month));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"MMM\":\n\t\t\t\t\tvalue = this._t(this._getShortMonth(month));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"MM\":\n\t\t\t\t\tvalue = $utils.padString(month + 1, 2, \"0\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"M\":\n\t\t\t\t\tvalue = (month + 1).toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ww\":\n\t\t\t\t\tvalue = $utils.padString($utils.getWeek(date, this._root.utc), 2, \"0\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"w\":\n\t\t\t\t\tvalue = $utils.getWeek(date, this._root.utc).toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"W\":\n\t\t\t\t\tvalue = $utils.getMonthWeek(date, this._root.utc).toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"dd\":\n\t\t\t\t\tvalue = $utils.padString(day, 2, \"0\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"d\":\n\t\t\t\t\tvalue = day.toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"DD\":\n\t\t\t\tcase \"DDD\":\n\t\t\t\t\tvalue = $utils.padString($utils.getYearDay(date, this._root.utc).toString(), info.parts[i].length, \"0\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"D\":\n\t\t\t\t\tvalue = $utils.getYearDay(date, this._root.utc).toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"F\":\n\t\t\t\t\t// @todo\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"g\":\n\t\t\t\t\t// @todo\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"t\":\n\t\t\t\t\tvalue = this._root.language.translateFunc(\"_dateOrd\").call(this, day);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"E\":\n\t\t\t\t\tvalue = (weekday || 7).toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"EE\":\n\t\t\t\t\tvalue = $utils.padString((weekday || 7).toString(), 2, \"0\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"EEE\":\n\t\t\t\tcase \"eee\":\n\t\t\t\t\tvalue = this._t(this._getShortWeekday(weekday));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"EEEE\":\n\t\t\t\tcase \"eeee\":\n\t\t\t\t\tvalue = this._t(this._getWeekday(weekday));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"EEEEE\":\n\t\t\t\tcase \"eeeee\":\n\t\t\t\t\tvalue = this._t(this._getShortWeekday(weekday)).substr(0, 1);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"e\":\n\t\t\t\tcase \"ee\":\n\t\t\t\t\tvalue = (weekday - (this._root.locale.firstDayOfWeek || 1) + 1).toString();\n\t\t\t\t\tif (info.parts[i] == \"ee\") {\n\t\t\t\t\t\tvalue = $utils.padString(value, 2, \"0\");\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"a\":\n\t\t\t\t\tif (hours >= 12) {\n\t\t\t\t\t\tvalue = this._t(\"PM\");\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvalue = this._t(\"AM\");\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"aa\":\n\t\t\t\t\tif (hours >= 12) {\n\t\t\t\t\t\tvalue = this._t(\"P.M.\");\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvalue = this._t(\"A.M.\");\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"aaa\":\n\t\t\t\t\tif (hours >= 12) {\n\t\t\t\t\t\tvalue = this._t(\"P\");\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvalue = this._t(\"A\");\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"h\":\n\t\t\t\t\tvalue = $utils.get12Hours(hours).toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"hh\":\n\t\t\t\t\tvalue = $utils.padString($utils.get12Hours(hours), 2, \"0\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"H\":\n\t\t\t\t\tvalue = hours.toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"HH\":\n\t\t\t\t\tvalue = $utils.padString(hours, 2, \"0\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"K\":\n\t\t\t\t\tvalue = $utils.get12Hours(hours, 0).toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"KK\":\n\t\t\t\t\tvalue = $utils.padString($utils.get12Hours(hours, 0), 2, \"0\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"k\":\n\t\t\t\t\tvalue = (hours + 1).toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"kk\":\n\t\t\t\t\tvalue = $utils.padString(hours + 1, 2, \"0\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"m\":\n\t\t\t\t\tvalue = minutes.toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"mm\":\n\t\t\t\t\tvalue = $utils.padString(minutes, 2, \"0\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"s\":\n\t\t\t\t\tvalue = seconds.toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ss\":\n\t\t\t\t\tvalue = $utils.padString(seconds, 2, \"0\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"S\":\n\t\t\t\tcase \"SS\":\n\t\t\t\tcase \"SSS\":\n\t\t\t\t\tvalue = Math.round((milliseconds / 1000) * Math.pow(10, info.parts[i].length)).toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"x\":\n\t\t\t\t\tvalue = timestamp.toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"n\":\n\t\t\t\tcase \"nn\":\n\t\t\t\tcase \"nnn\":\n\t\t\t\t\tvalue = $utils.padString(milliseconds, info.parts[i].length, \"0\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"z\":\n\t\t\t\t\tvalue = $utils.getTimeZone(date, false, false, this._root.utc);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"zz\":\n\t\t\t\t\tvalue = $utils.getTimeZone(date, true, false, this._root.utc);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"zzz\":\n\t\t\t\t\tvalue = $utils.getTimeZone(date, false, true, this._root.utc);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"zzzz\":\n\t\t\t\t\tvalue = $utils.getTimeZone(date, true, true, this._root.utc);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Z\":\n\t\t\t\tcase \"ZZ\":\n\t\t\t\t\tlet timezone = this._root.utc ? \"UTC\" : this._root.timezone;\n\t\t\t\t\tif (timezone instanceof Timezone) {\n\t\t\t\t\t\ttimezone = timezone.name;\n\t\t\t\t\t}\n\t\t\t\t\tconst offset = timezone ? $utils.getTimezoneOffset(timezone) : date.getTimezoneOffset();\n\n\t\t\t\t\tlet tz = Math.abs(offset) / 60;\n\t\t\t\t\tlet tzh = Math.floor(tz);\n\t\t\t\t\tlet tzm = tz * 60 - tzh * 60;\n\n\t\t\t\t\tif (this._root.utc) {\n\t\t\t\t\t\ttzh = 0;\n\t\t\t\t\t\ttzm = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (info.parts[i] == \"Z\") {\n\t\t\t\t\t\tvalue = \"GMT\";\n\t\t\t\t\t\tvalue += offset > 0 ? \"-\" : \"+\";\n\t\t\t\t\t\tvalue += $utils.padString(tzh, 2) + \":\" + $utils.padString(tzm, 2);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvalue = offset > 0 ? \"-\" : \"+\";\n\t\t\t\t\t\tvalue += $utils.padString(tzh, 2) + $utils.padString(tzm, 2);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"i\":\n\t\t\t\t\tvalue = date.toISOString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"I\":\n\t\t\t\t\tvalue = date.toUTCString();\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t\tres = res.replace($type.PLACEHOLDER, value);\n\t\t}\n\n\t\treturn res;\n\t}\n\n\t/**\n\t * Parses format into structured infromation.\n\t *\n\t * @param format Format template\n\t */\n\tprotected parseFormat(format: string): DateFormatInfo {\n\n\t\t// Check cache\n\t\t// TODO: implement caching of the parsed format\n\n\t\t// Init format parse info holder\n\t\tlet info: DateFormatInfo = {\n\t\t\t\"template\": \"\",\n\t\t\t\"parts\": <any>[]\n\t\t};\n\n\t\t// Let TextFormatter split into chunks\n\t\tlet chunks = TextFormatter.chunk(format, true);\n\t\tfor (let i: number = 0; i < chunks.length; i++) {\n\t\t\tlet chunk = chunks[i];\n\n\t\t\tif (chunk.type === \"value\") {\n\n\t\t\t\t// Just \"Date\"?\n\t\t\t\tif (chunk.text.match(/^date$/i)) {\n\t\t\t\t\tlet dateFormat = this.get(\"dateFormat\", \"yyyy-MM-dd\");\n\t\t\t\t\tif (!$type.isString(dateFormat)) {\n\t\t\t\t\t\tdateFormat = \"yyyy-MM-dd\";\n\t\t\t\t\t}\n\t\t\t\t\tchunk.text = dateFormat;\n\t\t\t\t}\n\n\t\t\t\t// Find all possible parts\n\t\t\t\tlet matches = chunk.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);\n\n\t\t\t\t// Found?\n\t\t\t\tif (matches) {\n\n\t\t\t\t\t// Populate template\n\t\t\t\t\tfor (let x = 0; x < matches.length; x++) {\n\t\t\t\t\t\tinfo.parts.push(matches[x]);\n\t\t\t\t\t\tchunk.text = chunk.text.replace(matches[x], $type.PLACEHOLDER);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Apply to template\n\t\t\tinfo.template += chunk.text;\n\t\t}\n\n\t\t// Save cache\n\t\t// TODO\n\n\t\treturn info;\n\t}\n\n\tprotected _months(): Months[] {\n\t\treturn [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n\t}\n\n\tprotected _getMonth(index: number): Months {\n\t\treturn this._months()[index];\n\t}\n\n\tprotected _shortMonths(): ShortMonths[] {\n\t\treturn [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May(short)\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n\t}\n\n\tprotected _getShortMonth(index: number): ShortMonths {\n\t\treturn this._shortMonths()[index];\n\t}\n\n\tprotected _weekdays(): Weekdays[] {\n\t\treturn [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n\t}\n\n\tprotected _getWeekday(index: number): Weekdays {\n\t\treturn this._weekdays()[index];\n\t}\n\n\tprotected _shortWeekdays(): ShortWeekdays[] {\n\t\treturn [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n\t}\n\n\tprotected _getShortWeekday(index: number): ShortWeekdays {\n\t\treturn this._shortWeekdays()[index];\n\t}\n\n\tpublic parse(source: any, format: string): Date {\n\n\t\t// Is it already a Date\n\t\tif (source instanceof Date) {\n\t\t\treturn source;\n\t\t}\n\n\t\t// Is it a numeric timestamp\n\t\tif ($type.isNumber(source)) {\n\t\t\treturn new Date(source);\n\t\t}\n\n\t\t// No? Let's check if it's string, and try converting to it if nec\n\t\tif (!$type.isString(source)) {\n\t\t\tsource = source.toString();\n\t\t}\n\n\t\t// Init return value\n\t\tlet res: Date;\n\n\t\t// Init RegEx for parsing\n\t\tlet reg: string = \"\";\n\n\t\t// Clean format\n\t\tformat = $utils.cleanFormat(format);\n\n\t\t// Clip format to length of the source string\n\t\tformat = format.substr(0, source.length);\n\n\t\t// Parse format\n\t\tlet info = this.parseFormat(format);\n\n\t\t// Init parsed items holder\n\t\tlet parsedIndexes = {\n\t\t\t\"year\": -1,\n\t\t\t\"year3\": -1,\n\t\t\t\"year2\": -1,\n\t\t\t\"year1\": -1,\n\t\t\t\"month\": -1,\n\t\t\t\"monthShort\": -1,\n\t\t\t\"monthLong\": -1,\n\t\t\t\"weekdayShort\": -1,\n\t\t\t\"weekdayLong\": -1,\n\t\t\t\"day\": -1,\n\t\t\t\"yearDay\": -1,\n\t\t\t\"week\": -1,\n\t\t\t\"hourBase0\": -1,\n\t\t\t\"hour12Base0\": -1,\n\t\t\t\"hourBase1\": -1,\n\t\t\t\"hour12Base1\": -1,\n\t\t\t\"minute\": -1,\n\t\t\t\"second\": -1,\n\t\t\t\"millisecond\": -1,\n\t\t\t\"millisecondDigits\": -1,\n\t\t\t\"am\": -1,\n\t\t\t\"zone\": -1,\n\t\t\t\"timestamp\": -1,\n\t\t\t\"iso\": -1\n\t\t};\n\n\t\t// Init values\n\t\tlet resValues = {\n\t\t\t\"year\": 1970,\n\t\t\t\"month\": 0,\n\t\t\t\"day\": 1,\n\t\t\t\"hour\": 0,\n\t\t\t\"minute\": 0,\n\t\t\t\"second\": 0,\n\t\t\t\"millisecond\": 0,\n\t\t\t\"timestamp\": <any>null,\n\t\t\t\"offset\": 0,\n\t\t\t\"utc\": this._root.utc\n\t\t}\n\n\t\t// Index adjuster\n\t\tlet indexAdjust: number = 0;\n\t\tlet index: number = 0;\n\n\t\t// Iterate through all of the parts\n\t\tfor (let i: number = 0; i < info.parts.length; i++) {\n\n\t\t\t// Set current match index\n\t\t\tindex = i + indexAdjust + 1;\n\n\t\t\tswitch (info.parts[i]) {\n\n\t\t\t\tcase \"yyyy\":\n\t\t\t\tcase \"YYYY\":\n\t\t\t\t\treg += \"([0-9]{4})\";\n\t\t\t\t\tparsedIndexes.year = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"yyy\":\n\t\t\t\tcase \"YYY\":\n\t\t\t\t\treg += \"([0-9]{3})\";\n\t\t\t\t\tparsedIndexes.year3 = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"yy\":\n\t\t\t\tcase \"YY\":\n\t\t\t\t\treg += \"([0-9]{2})\";\n\t\t\t\t\tparsedIndexes.year2 = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"y\":\n\t\t\t\tcase \"Y\":\n\t\t\t\t\treg += \"([0-9]{1})\";\n\t\t\t\t\tparsedIndexes.year1 = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"MMMM\":\n\t\t\t\t\treg += \"(\" + this.getStringList(this._months()).join(\"|\") + \")\";\n\t\t\t\t\tparsedIndexes.monthLong = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"MMM\":\n\t\t\t\t\treg += \"(\" + this.getStringList(this._shortMonths()).join(\"|\") + \")\";\n\t\t\t\t\tparsedIndexes.monthShort = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"MM\":\n\t\t\t\tcase \"M\":\n\t\t\t\t\treg += \"([0-9]{2}|[0-9]{1})\";\n\t\t\t\t\tparsedIndexes.month = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ww\":\n\t\t\t\tcase \"w\":\n\t\t\t\t\treg += \"([0-9]{2}|[0-9]{1})\";\n\t\t\t\t\tparsedIndexes.week = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"dd\":\n\t\t\t\tcase \"d\":\n\t\t\t\t\treg += \"([0-9]{2}|[0-9]{1})\";\n\t\t\t\t\tparsedIndexes.day = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"DDD\":\n\t\t\t\tcase \"DD\":\n\t\t\t\tcase \"D\":\n\t\t\t\t\treg += \"([0-9]{3}|[0-9]{2}|[0-9]{1})\";\n\t\t\t\t\tparsedIndexes.yearDay = index;\n\t\t\t\t\tbreak;\n\n\n\t\t\t\tcase \"dddd\":\n\t\t\t\t\treg += \"(\" + this.getStringList(this._weekdays()).join(\"|\") + \")\";\n\t\t\t\t\tparsedIndexes.weekdayLong = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ddd\":\n\t\t\t\t\treg += \"(\" + this.getStringList(this._shortWeekdays()).join(\"|\") + \")\";\n\t\t\t\t\tparsedIndexes.weekdayShort = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"aaa\":\n\t\t\t\tcase \"aa\":\n\t\t\t\tcase \"a\":\n\t\t\t\t\t// TODO: fix (escape regex)\n\t\t\t\t\treg += \"(\" + this.getStringList([\"AM\", \"PM\", \"A\\.M\\.\", \"P\\.M\\.\", \"A\", \"P\"]).join(\"|\") + \")\";\n\t\t\t\t\tparsedIndexes.am = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"hh\":\n\t\t\t\tcase \"h\":\n\t\t\t\t\treg += \"([0-9]{2}|[0-9]{1})\";\n\t\t\t\t\tparsedIndexes.hour12Base1 = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"HH\":\n\t\t\t\tcase \"H\":\n\t\t\t\t\treg += \"([0-9]{2}|[0-9]{1})\";\n\t\t\t\t\tparsedIndexes.hourBase0 = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"KK\":\n\t\t\t\tcase \"K\":\n\t\t\t\t\treg += \"([0-9]{2}|[0-9]{1})\";\n\t\t\t\t\tparsedIndexes.hour12Base0 = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"kk\":\n\t\t\t\tcase \"k\":\n\t\t\t\t\treg += \"([0-9]{2}|[0-9]{1})\";\n\t\t\t\t\tparsedIndexes.hourBase1 = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"mm\":\n\t\t\t\tcase \"m\":\n\t\t\t\t\treg += \"([0-9]{2}|[0-9]{1})\";\n\t\t\t\t\tparsedIndexes.minute = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ss\":\n\t\t\t\tcase \"s\":\n\t\t\t\t\treg += \"([0-9]{2}|[0-9]{1})\";\n\t\t\t\t\tparsedIndexes.second = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"SSS\":\n\t\t\t\tcase \"SS\":\n\t\t\t\tcase \"S\":\n\t\t\t\t\treg += \"([0-9]{3}|[0-9]{2}|[0-9]{1})\";\n\t\t\t\t\tparsedIndexes.millisecond = index;\n\t\t\t\t\tparsedIndexes.millisecondDigits = info.parts[i].length;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"nnn\":\n\t\t\t\tcase \"nn\":\n\t\t\t\tcase \"n\":\n\t\t\t\t\treg += \"([0-9]{3}|[0-9]{2}|[0-9]{1})\";\n\t\t\t\t\tparsedIndexes.millisecond = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"x\":\n\t\t\t\t\treg += \"([0-9]{1,})\";\n\t\t\t\t\tparsedIndexes.timestamp = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Z\":\n\t\t\t\t\treg += \"GMT([-+]+[0-9]{2}:[0-9]{2})\";\n\t\t\t\t\tparsedIndexes.zone = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ZZ\":\n\t\t\t\t\treg += \"([\\\\-+]+[0-9]{2}[0-9]{2})\";\n\t\t\t\t\tparsedIndexes.zone = index;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"i\":\n\t\t\t\t\treg += \"([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2})\\\\.?([0-9]{0,3})([zZ]|[+\\\\-][0-9]{2}:?[0-9]{2}|$)\";\n\t\t\t\t\tparsedIndexes.iso = index;\n\t\t\t\t\tindexAdjust += 7;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"G\":\n\t\t\t\tcase \"YYYY\":\n\t\t\t\tcase \"YYY\":\n\t\t\t\tcase \"YY\":\n\t\t\t\tcase \"Y\":\n\t\t\t\tcase \"MMMMM\":\n\t\t\t\tcase \"W\":\n\t\t\t\tcase \"EEEEE\":\n\t\t\t\tcase \"EEEE\":\n\t\t\t\tcase \"EEE\":\n\t\t\t\tcase \"EE\":\n\t\t\t\tcase \"E\":\n\t\t\t\tcase \"eeeee\":\n\t\t\t\tcase \"eeee\":\n\t\t\t\tcase \"eee\":\n\t\t\t\tcase \"ee\":\n\t\t\t\tcase \"e\":\n\t\t\t\tcase \"zzzz\":\n\t\t\t\tcase \"zzz\":\n\t\t\t\tcase \"zz\":\n\t\t\t\tcase \"z\":\n\t\t\t\tcase \"t\":\n\t\t\t\t\t// Ignore\n\t\t\t\t\tindexAdjust--;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treg += \"[^0-9]*\";\n\t\t}\n\n\t\t// Try matching\n\t\tlet regex = new RegExp(reg);\n\t\tlet matches: RegExpMatchArray = source.match(regex);\n\n\t\tif (matches) {\n\t\t\t// Populate the date object\n\n\t\t\t// Full year\n\t\t\tif (parsedIndexes.year > -1) {\n\t\t\t\tresValues.year = parseInt(matches[parsedIndexes.year]);\n\t\t\t}\n\n\t\t\t// 3-digit year\n\t\t\tif (parsedIndexes.year3 > -1) {\n\t\t\t\tlet val = parseInt(matches[parsedIndexes.year3]);\n\t\t\t\tval += 1000;\n\t\t\t\tresValues.year = val;\n\t\t\t}\n\n\t\t\t// 2-digit year\n\t\t\tif (parsedIndexes.year2 > -1) {\n\t\t\t\tlet val = parseInt(matches[parsedIndexes.year2]);\n\t\t\t\tif (val > 50) {\n\t\t\t\t\tval += 1000;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tval += 2000;\n\t\t\t\t}\n\t\t\t\tresValues.year = val;\n\t\t\t}\n\n\t\t\t// 1-digit year\n\t\t\tif (parsedIndexes.year1 > -1) {\n\t\t\t\tlet val = parseInt(matches[parsedIndexes.year1]);\n\t\t\t\tval = Math.floor((new Date().getFullYear()) / 10) * 10 + val;\n\t\t\t\tresValues.year = val;\n\t\t\t}\n\n\t\t\t// Full month\n\t\t\tif (parsedIndexes.monthLong > -1) {\n\t\t\t\tresValues.month = this.resolveMonth(<any>matches[parsedIndexes.monthLong]);\n\t\t\t}\n\n\t\t\t// Short month\n\t\t\tif (parsedIndexes.monthShort > -1) {\n\t\t\t\tresValues.month = this.resolveShortMonth(<any>matches[parsedIndexes.monthShort]);\n\t\t\t}\n\n\t\t\t// Numeric month\n\t\t\tif (parsedIndexes.month > -1) {\n\t\t\t\tresValues.month = parseInt(matches[parsedIndexes.month]) - 1;\n\t\t\t}\n\n\t\t\t// Weekday\n\t\t\t// @todo\n\n\t\t\t// Week\n\t\t\tif ((parsedIndexes.week > -1) && (parsedIndexes.day === -1)) {\n\t\t\t\t// We parse weeks ONLY if day is not explicitly set\n\t\t\t\t// TODO: this needs work\n\t\t\t\t// (but maybe later - I can hardly imagine anyone passing their dates in weeks)\n\t\t\t\tresValues.month = 0;\n\t\t\t\tresValues.day = $utils.getDayFromWeek(\n\t\t\t\t\tparseInt(matches[parsedIndexes.week]),\n\t\t\t\t\tresValues.year,\n\t\t\t\t\t1,\n\t\t\t\t\tthis._root.utc\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Day\n\t\t\tif (parsedIndexes.day > -1) {\n\t\t\t\tresValues.day = parseInt(matches[parsedIndexes.day]);\n\t\t\t}\n\n\t\t\t// Year day\n\t\t\tif (parsedIndexes.yearDay > -1) {\n\t\t\t\tresValues.month = 0;\n\t\t\t\tresValues.day = parseInt(matches[parsedIndexes.yearDay]);\n\t\t\t}\n\n\t\t\t// 24 Hour (0-23)\n\t\t\tif (parsedIndexes.hourBase0 > -1) {\n\t\t\t\tresValues.hour = parseInt(matches[parsedIndexes.hourBase0]);\n\t\t\t}\n\n\t\t\t// 24 Hour (1-24)\n\t\t\tif (parsedIndexes.hourBase1 > -1) {\n\t\t\t\tresValues.hour = parseInt(matches[parsedIndexes.hourBase1]) - 1;\n\t\t\t}\n\n\t\t\t// 12 Hour (0-11)\n\t\t\tif (parsedIndexes.hour12Base0 > -1) {\n\t\t\t\tlet val = parseInt(matches[parsedIndexes.hour12Base0]);\n\t\t\t\tif (val == 11) {\n\t\t\t\t\tval = 0;\n\t\t\t\t}\n\t\t\t\tif ((parsedIndexes.am > -1) && !this.isAm(matches[parsedIndexes.am])) {\n\t\t\t\t\tval += 12;\n\t\t\t\t}\n\t\t\t\tresValues.hour = val;\n\t\t\t}\n\n\t\t\t// 12 Hour (1-12)\n\t\t\tif (parsedIndexes.hour12Base1 > -1) {\n\t\t\t\tlet val = parseInt(matches[parsedIndexes.hour12Base1]);\n\t\t\t\tif (val == 12) {\n\t\t\t\t\tval = 0;\n\t\t\t\t}\n\t\t\t\tif ((parsedIndexes.am > -1) && !this.isAm(matches[parsedIndexes.am])) {\n\t\t\t\t\tval += 12;\n\t\t\t\t}\n\t\t\t\tresValues.hour = val;\n\t\t\t}\n\n\t\t\t// Minute\n\t\t\tif (parsedIndexes.minute > -1) {\n\t\t\t\tresValues.minute = parseInt(matches[parsedIndexes.minute]);\n\t\t\t}\n\n\t\t\t// Second\n\t\t\tif (parsedIndexes.second > -1) {\n\t\t\t\tresValues.second = parseInt(matches[parsedIndexes.second]);\n\t\t\t}\n\n\t\t\t// Millisecond\n\t\t\tif (parsedIndexes.millisecond > -1) {\n\t\t\t\tlet val = parseInt(matches[parsedIndexes.millisecond]);\n\t\t\t\tif (parsedIndexes.millisecondDigits == 2) {\n\t\t\t\t\tval *= 10;\n\t\t\t\t}\n\t\t\t\telse if (parsedIndexes.millisecondDigits == 1) {\n\t\t\t\t\tval *= 100;\n\t\t\t\t}\n\t\t\t\tresValues.millisecond = val;\n\t\t\t}\n\n\t\t\t// Timestamp\n\t\t\tif (parsedIndexes.timestamp > -1) {\n\t\t\t\tresValues.timestamp = parseInt(matches[parsedIndexes.timestamp]);\n\n\t\t\t\tconst ts = new Date(resValues.timestamp);\n\t\t\t\tresValues.year = ts.getUTCFullYear();\n\t\t\t\tresValues.month = ts.getUTCMonth();\n\t\t\t\tresValues.day = ts.getUTCDate();\n\t\t\t\tresValues.hour = ts.getUTCHours();\n\t\t\t\tresValues.minute = ts.getUTCMinutes();\n\t\t\t\tresValues.second = ts.getUTCSeconds();\n\t\t\t\tresValues.millisecond = ts.getUTCMilliseconds();\n\t\t\t}\n\n\t\t\t// Adjust time zone\n\t\t\tif (parsedIndexes.zone > -1) {\n\t\t\t\tresValues.offset = this.resolveTimezoneOffset(new Date(resValues.year, resValues.month, resValues.day), matches[parsedIndexes.zone]);\n\t\t\t}\n\n\t\t\t// ISO\n\t\t\tif (parsedIndexes.iso > -1) {\n\n\t\t\t\tresValues.year = $type.toNumber(matches[parsedIndexes.iso + 0]);\n\t\t\t\tresValues.month = $type.toNumber(matches[parsedIndexes.iso + 1]) - 1;\n\t\t\t\tresValues.day = $type.toNumber(matches[parsedIndexes.iso + 2]);\n\t\t\t\tresValues.hour = $type.toNumber(matches[parsedIndexes.iso + 3]);\n\t\t\t\tresValues.minute = $type.toNumber(matches[parsedIndexes.iso + 4]);\n\t\t\t\tresValues.second = $type.toNumber(matches[parsedIndexes.iso + 5]);\n\t\t\t\tresValues.millisecond = $type.toNumber(matches[parsedIndexes.iso + 6]);\n\n\t\t\t\tif (matches[parsedIndexes.iso + 7] == \"Z\" || matches[parsedIndexes.iso + 7] == \"z\") {\n\t\t\t\t\tresValues.utc = true;\n\t\t\t\t}\n\t\t\t\telse if (matches[parsedIndexes.iso + 7] != \"\") {\n\t\t\t\t\tresValues.offset = this.resolveTimezoneOffset(new Date(resValues.year, resValues.month, resValues.day), matches[parsedIndexes.iso + 7]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Create Date object\n\t\t\tif (resValues.utc) {\n\t\t\t\tres = new Date(Date.UTC(\n\t\t\t\t\tresValues.year,\n\t\t\t\t\tresValues.month,\n\t\t\t\t\tresValues.day,\n\t\t\t\t\tresValues.hour,\n\t\t\t\t\tresValues.minute,\n\t\t\t\t\tresValues.second,\n\t\t\t\t\tresValues.millisecond\n\t\t\t\t));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tres = new Date(\n\t\t\t\t\tresValues.year,\n\t\t\t\t\tresValues.month,\n\t\t\t\t\tresValues.day,\n\t\t\t\t\tresValues.hour,\n\t\t\t\t\tresValues.minute + resValues.offset,\n\t\t\t\t\tresValues.second,\n\t\t\t\t\tresValues.millisecond\n\t\t\t\t);\n\t\t\t}\n\n\t\t}\n\t\telse {\n\t\t\t// Didn't match anything\n\t\t\t// Let's try dropping it into Date constructor and hope for the best\n\t\t\tres = new Date(source);\n\t\t}\n\n\t\treturn res;\n\t}\n\n\tprotected resolveTimezoneOffset(date: Date, zone: string): number {\n\t\tlet value = zone.match(/([+\\-]?)([0-9]{2}):?([0-9]{2})/);\n\t\tif (value) {\n\t\t\tlet match = zone.match(/([+\\-]?)([0-9]{2}):?([0-9]{2})/)!;\n\t\t\tlet dir = match[1];\n\t\t\tlet hour = match[2];\n\t\t\tlet minute = match[3];\n\t\t\tlet offset = parseInt(hour) * 60 + parseInt(minute);\n\n\t\t\t// Adjust offset\n\t\t\t// Making it negative does not seem to make sense, but it's right\n\t\t\t// because of how JavaScript calculates GMT offsets\n\t\t\tif (dir == \"+\") {\n\t\t\t\toffset *= -1;\n\t\t\t}\n\n\t\t\t// Check the difference in offset\n\t\t\tlet originalOffset = (date || new Date()).getTimezoneOffset();\n\t\t\tlet diff = offset - originalOffset;\n\t\t\treturn diff;\n\t\t}\n\t\treturn 0;\n\t}\n\n\t/**\n\t * Resolves month name (i.e. \"December\") into a month number (11).\n\t *\n\t * @param value  Month name\n\t * @return Month number\n\t */\n\tprotected resolveMonth(value: Months): number {\n\n\t\t// Let's try English first\n\t\tlet month: number = this._months().indexOf(value);\n\t\tif (month > -1) {\n\t\t\treturn month;\n\t\t}\n\n\t\t// Try the translation\n\t\tif (!this._root.language.isDefault()) {\n\t\t\tmonth = this._root.language.translateAll(this._months()).indexOf(value);\n\t\t\tif (month > -1) {\n\t\t\t\treturn month\n\t\t\t}\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\t/**\n\t * Resolves short month name (i.e. \"Dec\") into a month number.\n\t *\n\t * @param value  Short month name\n\t * @return Month number\n\t */\n\tprotected resolveShortMonth(value: ShortMonths): number {\n\n\t\t// Let's try English first\n\t\tlet month: number = this._shortMonths().indexOf(value);\n\t\tif (month > -1) {\n\t\t\treturn month;\n\t\t}\n\n\t\t// Maybe long month (workaround for May)\n\t\tmonth = this._months().indexOf(<any>value);\n\t\tif (month > -1) {\n\t\t\treturn month;\n\t\t}\n\n\t\t// Try the translation\n\t\tif (this._root.language && !this._root.language.isDefault()) {\n\t\t\tmonth = this._root.language.translateAll(this._shortMonths()).indexOf(value);\n\t\t\tif (month > -1) {\n\t\t\t\treturn month\n\t\t\t}\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\t/**\n\t * Checks if passed in string represents AM/PM notation in many of its\n\t * versions.\n\t *\n\t * @param value  Source string\n\t * @return Is it AM/PM?\n\t */\n\tprotected isAm(value: string): boolean {\n\t\tlet list = this.getStringList([\"AM\", \"A.M.\", \"A\"]);\n\t\treturn list.indexOf(value.toUpperCase()) > -1;\n\t}\n\n\t/**\n\t * Translates list of strings.\n\t *\n\t * @param list  Source strings\n\t * @return Translated strings\n\t */\n\tprotected getStringList(list: Array<keyof ILocaleSettings>): Array<string> {\n\t\tlet res: string[] = [];\n\t\tfor (let i: number = 0; i < list.length; i++) {\n\t\t\t// translate?\n\t\t\tif (this._root.language) {\n\t\t\t\tres.push($utils.escapeForRgex(this._t(list[i])));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tres.push($utils.escapeForRgex(list[i]));\n\t\t\t}\n\t\t}\n\t\treturn res;\n\t}\n\n}\n", "import type { TimeUnit } from \"./Time\";\r\n\r\nimport { Entity, IEntitySettings, IEntityPrivate } from \"./Entity\"\r\nimport { TextFormatter } from \"./TextFormatter\";\r\n\r\nimport * as $object from \"./Object\";\r\nimport * as $utils from \"./Utils\";\r\nimport * as $type from \"./Type\";\r\n\r\n\r\nexport interface IDurationFormatterSettings extends IEntitySettings {\r\n\r\n\t/**\r\n\t * A universal duration format to use wherever number needs to be formatted\r\n\t * as a duration.\r\n\t */\r\n\tdurationFormat?: string;\r\n\r\n\t/**\r\n\t * A base value. Any number below it will be considered \"negative\".\r\n\t *\r\n\t * @default 0\r\n\t */\r\n\tnegativeBase?: number;\r\n\r\n\t/**\r\n\t * Identifies what values are used in duration.\r\n\t *\r\n\t * Available options: `\"millisecond\"`, `\"second\"` (default), `\"minute\"`, `\"hour\"`, `\"day\"`, `\"week\"`, `\"month\"`, and `\"year\"`.\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-durations/#Base_unit} for more info\r\n\t * @default \"second\"\r\n\t */\r\n\tbaseUnit?: TimeUnit;\r\n\r\n\t/**\r\n\t * Time unit dependent duration formats.\r\n\t *\r\n\t * Used be [[DurationAxis]].\r\n\t */\r\n\tdurationFormats?: Partial<Record<TimeUnit, Partial<Record<TimeUnit, string>>>>;\r\n\r\n\t/**\r\n\t * An array of data fields that hold duration values and should be formatted\r\n\t * with a [[DurationFormatter]].\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/data-placeholders/#Formatting_placeholders} for more info\r\n\t */\r\n\tdurationFields?: string[];\r\n\r\n}\r\n\r\nexport interface IDurationFormatterPrivate extends IEntityPrivate {\r\n}\r\n\r\n/**\r\n * A class used to format numberic values as time duration.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-durations/} for more info\r\n */\r\nexport class DurationFormatter extends Entity {\r\n\tdeclare public _settings: IDurationFormatterSettings;\r\n\tdeclare public _privateSettings: IDurationFormatterPrivate;\r\n\r\n\tprotected _setDefaults() {\r\n\t\tconst dmillisecond = \"_duration_millisecond\";\r\n\t\tconst dsecond = \"_duration_second\";\r\n\t\tconst dminute = \"_duration_minute\";\r\n\t\tconst dhour = \"_duration_hour\";\r\n\t\tconst dday = \"_duration_day\";\r\n\t\tconst dweek = \"_duration_week\";\r\n\t\tconst dmonth = \"_duration_month\";\r\n\t\tconst dyear = \"_duration_year\";\r\n\r\n\t\tconst asecond = \"_second\";\r\n\t\tconst aminute = \"_minute\";\r\n\t\tconst ahour = \"_hour\";\r\n\t\tconst aday = \"_day\";\r\n\t\tconst aweek = \"_week\";\r\n\t\tconst amonth = \"_week\";\r\n\t\tconst ayear = \"_year\";\r\n\r\n\t\t// Defaults\r\n\t\tthis._setDefault(\"negativeBase\", 0);\r\n\t\tthis._setDefault(\"baseUnit\", \"second\");\r\n\t\tthis._setDefault(\"durationFormats\", {\r\n\t\t\t\"millisecond\": {\r\n\t\t\t\t\"millisecond\": this._t(dmillisecond),\r\n\t\t\t\t\"second\": this._t((dmillisecond + asecond) as any),\r\n\t\t\t\t\"minute\": this._t((dmillisecond + aminute) as any),\r\n\t\t\t\t\"hour\": this._t((dmillisecond + ahour) as any),\r\n\t\t\t\t\"day\": this._t((dmillisecond + aday) as any),\r\n\t\t\t\t\"week\": this._t((dmillisecond + aweek) as any),\r\n\t\t\t\t\"month\": this._t((dmillisecond + amonth) as any),\r\n\t\t\t\t\"year\": this._t((dmillisecond + ayear) as any)\r\n\t\t\t},\r\n\t\t\t\"second\": {\r\n\t\t\t\t\"second\": this._t((dsecond) as any),\r\n\t\t\t\t\"minute\": this._t((dsecond + aminute) as any),\r\n\t\t\t\t\"hour\": this._t((dsecond + ahour) as any),\r\n\t\t\t\t\"day\": this._t((dsecond + aday) as any),\r\n\t\t\t\t\"week\": this._t((dsecond + aweek) as any),\r\n\t\t\t\t\"month\": this._t((dsecond + amonth) as any),\r\n\t\t\t\t\"year\": this._t((dsecond + ayear) as any)\r\n\t\t\t},\r\n\t\t\t\"minute\": {\r\n\t\t\t\t\"minute\": this._t((dminute) as any),\r\n\t\t\t\t\"hour\": this._t((dminute + ahour) as any),\r\n\t\t\t\t\"day\": this._t((dminute + aday) as any),\r\n\t\t\t\t\"week\": this._t((dminute + aweek) as any),\r\n\t\t\t\t\"month\": this._t((dminute + amonth) as any),\r\n\t\t\t\t\"year\": this._t((dminute + ayear) as any)\r\n\t\t\t},\r\n\t\t\t\"hour\": {\r\n\t\t\t\t\"hour\": this._t((dhour) as any),\r\n\t\t\t\t\"day\": this._t((dhour + aday) as any),\r\n\t\t\t\t\"week\": this._t((dhour + aweek) as any),\r\n\t\t\t\t\"month\": this._t((dhour + amonth) as any),\r\n\t\t\t\t\"year\": this._t((dhour + ayear) as any)\r\n\t\t\t},\r\n\t\t\t\"day\": {\r\n\t\t\t\t\"day\": this._t((dday) as any),\r\n\t\t\t\t\"week\": this._t((dday + aweek) as any),\r\n\t\t\t\t\"month\": this._t((dday + amonth) as any),\r\n\t\t\t\t\"year\": this._t((dday + ayear) as any)\r\n\t\t\t},\r\n\t\t\t\"week\": {\r\n\t\t\t\t\"week\": this._t((dweek) as any),\r\n\t\t\t\t\"month\": this._t((dweek + amonth) as any),\r\n\t\t\t\t\"year\": this._t((dweek + ayear) as any)\r\n\t\t\t},\r\n\t\t\t\"month\": {\r\n\t\t\t\t\"month\": this._t((dmonth) as any),\r\n\t\t\t\t\"year\": this._t((dmonth + ayear) as any)\r\n\t\t\t},\r\n\t\t\t\"year\": {\r\n\t\t\t\t\"year\": this._t(dyear)\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tsuper._setDefaults();\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Collection of aliases for units.\r\n\t */\r\n\tprotected _unitAliases: { [index: string]: string } = {\r\n\t\t\"Y\": \"y\",\r\n\t\t\"D\": \"d\",\r\n\t\t\"H\": \"h\",\r\n\t\t\"K\": \"h\",\r\n\t\t\"k\": \"h\",\r\n\t\t\"n\": \"S\"\r\n\t};\r\n\r\n\tpublic _beforeChanged() {\r\n\t\tsuper._beforeChanged();\r\n\t}\r\n\r\n\t/**\r\n\t * Formats the number as duration.\r\n\t *\r\n\t * For example `1000` (base unit seconds) would be converted to `16:40` as in\r\n\t * 16 minutes and 40 seconds.\r\n\t *\r\n\t * @param value   Value to format\r\n\t * @param format  Format to apply\r\n\t * @param base    Override base unit\r\n\t * @return Formatted number\r\n\t */\r\n\tpublic format(value: number | string, format?: string, base?: TimeUnit): string {\r\n\r\n\t\t// no base unit?\r\n\t\tlet baseUnit = base || this.get(\"baseUnit\");\r\n\r\n\t\t// no format passed in or empty\r\n\t\tif (typeof format === \"undefined\" || format === \"\") {\r\n\t\t\tif (this.get(\"durationFormat\") != null) {\r\n\t\t\t\tformat = this.get(\"durationFormat\");\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tformat = this.getFormat($type.toNumber(value), undefined, baseUnit);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Clean format\r\n\t\tformat = $utils.cleanFormat(format!);\r\n\r\n\t\t// get format info (it will also deal with parser caching)\r\n\t\tlet info = this.parseFormat(format, baseUnit);\r\n\r\n\t\t// cast to number just in case\r\n\t\t// TODO: maybe use better casting\r\n\t\tlet source: number = Number(value);\r\n\r\n\t\t// format and replace the number\r\n\t\tlet details;\r\n\t\tif (source > this.get(\"negativeBase\")) {\r\n\t\t\tdetails = info.positive;\r\n\t\t}\r\n\t\telse if (source < this.get(\"negativeBase\")) {\r\n\t\t\tdetails = info.negative;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdetails = info.zero;\r\n\t\t}\r\n\r\n\r\n\t\t// Format\r\n\t\tlet formatted = this.applyFormat(source, details);\r\n\r\n\t\t// Apply color?\r\n\t\tif (details.color !== \"\") {\r\n\t\t\tformatted = \"[\" + details.color + \"]\" + formatted + \"[/]\";\r\n\t\t}\r\n\r\n\t\treturn formatted;\r\n\t}\r\n\r\n\t/**\r\n\t * Parses supplied format into structured object which can be used to format\r\n\t * the number.\r\n\t *\r\n\t * @param format  Format string, i.e. \"#,###.00\"\r\n\t * @param base    Override base unit\r\n\t * @return Parsed information\r\n\t */\r\n\tprotected parseFormat(format: string, base?: TimeUnit): any {\r\n\r\n\t\t// Check cache\r\n\t\t// TODO\r\n\t\t// let cached = this.getCache(format);\r\n\t\t// if (cached != null) {\r\n\t\t// \treturn cached;\r\n\t\t// }\r\n\r\n\t\t// no base unit?\r\n\t\tlet baseUnit = base || this.get(\"baseUnit\");\r\n\r\n\t\t// Initialize duration parsing info\r\n\t\tlet info = {\r\n\t\t\t\"positive\": {\r\n\t\t\t\t\"color\": \"\",\r\n\t\t\t\t\"template\": \"\",\r\n\t\t\t\t\"parts\": <any>[],\r\n\t\t\t\t\"source\": \"\",\r\n\t\t\t\t\"baseUnit\": baseUnit,\r\n\t\t\t\t\"parsed\": false,\r\n\t\t\t\t\"absolute\": false\r\n\t\t\t},\r\n\t\t\t\"negative\": {\r\n\t\t\t\t\"color\": \"\",\r\n\t\t\t\t\"template\": \"\",\r\n\t\t\t\t\"parts\": <any>[],\r\n\t\t\t\t\"source\": \"\",\r\n\t\t\t\t\"baseUnit\": baseUnit,\r\n\t\t\t\t\"parsed\": false,\r\n\t\t\t\t\"absolute\": false\r\n\t\t\t},\r\n\t\t\t\"zero\": {\r\n\t\t\t\t\"color\": \"\",\r\n\t\t\t\t\"template\": \"\",\r\n\t\t\t\t\"parts\": <any>[],\r\n\t\t\t\t\"source\": \"\",\r\n\t\t\t\t\"baseUnit\": baseUnit,\r\n\t\t\t\t\"parsed\": false,\r\n\t\t\t\t\"absolute\": false\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Escape double vertical bars (that mean display one vertical bar)\r\n\t\tformat = format.replace(\"||\", $type.PLACEHOLDER2);\r\n\r\n\t\t// Split it up and deal with different formats\r\n\t\tlet parts = format.split(\"|\");\r\n\t\tinfo.positive.source = parts[0];\r\n\r\n\t\tif (typeof parts[2] === \"undefined\") {\r\n\t\t\tinfo.zero = info.positive;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tinfo.zero.source = parts[2];\r\n\t\t}\r\n\r\n\t\tif (typeof parts[1] === \"undefined\") {\r\n\t\t\tinfo.negative = info.positive;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tinfo.negative.source = parts[1];\r\n\t\t}\r\n\r\n\t\t// Parse each\r\n\t\t$object.each(info, (_part, item) => {\r\n\t\t\t// Already parsed\r\n\t\t\tif (item.parsed) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Check cached\r\n\t\t\t// TODO\r\n\t\t\t// if (typeof this.getCache(item.source) !== \"undefined\") {\r\n\t\t\t// \tinfo[part] = this.getCache(item.source);\r\n\t\t\t// \treturn;\r\n\t\t\t// }\r\n\r\n\t\t\t// Begin parsing\r\n\t\t\tlet partFormat: string = item.source;\r\n\r\n\t\t\t// Check for [] directives\r\n\t\t\tlet dirs: string[] | null = [];\r\n\t\t\tdirs = item.source.match(/^\\[([^\\]]*)\\]/);\r\n\t\t\tif (dirs && dirs.length && dirs[0] !== \"\") {\r\n\t\t\t\tpartFormat = item.source.substr(dirs[0].length);\r\n\t\t\t\titem.color = dirs[1];\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// Let TextFormatter split into chunks\r\n\t\t\tlet chunks = TextFormatter.chunk(partFormat, true);\r\n\t\t\tfor (let i: number = 0; i < chunks.length; i++) {\r\n\t\t\t\tlet chunk = chunks[i];\r\n\r\n\t\t\t\t// replace back double vertical bar\r\n\t\t\t\tchunk.text = chunk.text.replace($type.PLACEHOLDER2, \"|\");\r\n\r\n\t\t\t\tif (chunk.type === \"value\") {\r\n\r\n\t\t\t\t\t// Just \"Duration\"?\r\n\t\t\t\t\t// if (chunk.text.toLowerCase() === \"duration\") {\r\n\t\t\t\t\t// \tchunk.text = durationFormat;\r\n\t\t\t\t\t// }\r\n\r\n\t\t\t\t\t// Check for \"a\" (absolute) modifier\r\n\t\t\t\t\tif (chunk.text.match(/[yYMdDwhHKkmsSn]+a/)) {\r\n\t\t\t\t\t\titem.absolute = true;\r\n\t\t\t\t\t\tchunk.text = chunk.text.replace(/([yYMdDwhHKkmsSn]+)a/, \"$1\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Find all possible parts\r\n\t\t\t\t\tlet matches = chunk.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);\r\n\r\n\t\t\t\t\tif (matches) {\r\n\t\t\t\t\t\t// Populate template\r\n\t\t\t\t\t\tfor (let x = 0; x < matches.length; x++) {\r\n\t\t\t\t\t\t\t// Is it an alias?\r\n\t\t\t\t\t\t\tif (matches[x] == null) {\r\n\t\t\t\t\t\t\t\tmatches[x] = this._unitAliases[matches[x]];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\titem.parts.push(matches[x]);\r\n\t\t\t\t\t\t\tchunk.text = chunk.text.replace(matches[x], $type.PLACEHOLDER);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Apply to template\r\n\t\t\t\titem.template += chunk.text;\r\n\t\t\t}\r\n\r\n\t\t\t// Apply style formatting\r\n\t\t\t//item.template = TextFormatter.format(item.template, this.outputFormat);\r\n\r\n\t\t\t// Save cache\r\n\t\t\t// TODO\r\n\t\t\t//this.setCache(item.source, item);\r\n\r\n\t\t\t// Mark this as parsed\r\n\t\t\titem.parsed = true;\r\n\t\t});\r\n\r\n\t\t// Save cache (the whole thing)\r\n\t\t// TODO\r\n\t\t//this.setCache(format, info);\r\n\r\n\t\treturn info;\r\n\t}\r\n\r\n\t/**\r\n\t * Applies parsed format to a numeric value.\r\n\t *\r\n\t * @param value    Value\r\n\t * @param details  Parsed format as returned by {parseFormat}\r\n\t * @return Formatted duration\r\n\t */\r\n\tprotected applyFormat(value: number, details: any): string {\r\n\r\n\t\t// Use absolute values\r\n\t\tlet negative = !details.absolute && (value < this.get(\"negativeBase\"));\r\n\t\tvalue = Math.abs(value);\r\n\r\n\t\t// Recalculate to milliseconds\r\n\t\tlet tstamp = this.toTimeStamp(value, details.baseUnit);\r\n\r\n\t\t// Init return value\r\n\t\tlet res = details.template;\r\n\r\n\t\t// Iterate through duration parts\r\n\t\tfor (let i = 0, len = details.parts.length; i < len; i++) {\r\n\r\n\t\t\t// Gather the part\r\n\t\t\tlet part = details.parts[i];\r\n\t\t\tlet unit = this._toTimeUnit(part.substr(0, 1));\r\n\t\t\tlet digits = part.length;\r\n\r\n\t\t\t// Calculate current unit value\r\n\t\t\tlet ints = Math.floor(tstamp / this._getUnitValue(unit!));\r\n\t\t\tres = res.replace($type.PLACEHOLDER, $utils.padString(ints, digits, \"0\"));\r\n\r\n\t\t\t// Reduce timestamp\r\n\t\t\ttstamp -= ints * this._getUnitValue(unit!);\r\n\t\t}\r\n\r\n\t\t// Reapply negative sign\r\n\t\tif (negative) {\r\n\t\t\tres = \"-\" + res;\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * Converts numeric value to timestamp in milliseconds.\r\n\t *\r\n\t * @param value     A source value\r\n\t * @param baseUnit  Base unit the source value is in: \"q\", \"s\", \"i\", \"h\", \"d\", \"w\", \"m\", \"y\"\r\n\t * @return Value representation as a timestamp in milliseconds\r\n\t */\r\n\tpublic toTimeStamp(value: number, baseUnit: TimeUnit): number {\r\n\t\treturn value * this._getUnitValue(baseUnit);\r\n\t}\r\n\r\n\tprotected _toTimeUnit(code: string): TimeUnit | undefined {\r\n\t\tswitch (code) {\r\n\t\t\tcase \"S\":\r\n\t\t\t\treturn \"millisecond\";\r\n\t\t\tcase \"s\":\r\n\t\t\t\treturn \"second\";\r\n\t\t\tcase \"m\":\r\n\t\t\t\treturn \"minute\";\r\n\t\t\tcase \"h\":\r\n\t\t\t\treturn \"hour\";\r\n\t\t\tcase \"d\":\r\n\t\t\t\treturn \"day\";\r\n\t\t\tcase \"w\":\r\n\t\t\t\treturn \"week\";\r\n\t\t\tcase \"M\":\r\n\t\t\t\treturn \"month\";\r\n\t\t\tcase \"y\":\r\n\t\t\t\treturn \"year\";\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * Returns appropriate default format for the value.\r\n\t *\r\n\t * If `maxValue` is sepcified, it will use that value to determine the time\r\n\t * unit for the format.\r\n\t *\r\n\t * For example if your `baseUnit` is `\"second\"` and you pass in `10`, you\r\n\t * will get `\"10\"`.\r\n\t *\r\n\t * However, you might want it to be formatted in the context of bigger scale,\r\n\t * say 10 minutes (600 seconds). If you pass in `600` as `maxValue`, all\r\n\t * values, including small ones will use format with minutes, e.g.:\r\n\t * `00:10`, `00:50`, `12: 30`, etc.\r\n\t *\r\n\t * @param value     Value to format\r\n\t * @param maxValue  Maximum value to be used to determine format\r\n\t * @param baseUnit  Base unit of the value\r\n\t * @return Format\r\n\t */\r\n\tpublic getFormat(value: number, maxValue?: number, baseUnit?: TimeUnit): string {\r\n\r\n\t\t// Is format override set?\r\n\t\tif (this.get(\"durationFormat\") != null) {\r\n\t\t\treturn this.get(\"durationFormat\")!;\r\n\t\t}\r\n\r\n\t\t// Get base unit\r\n\t\tif (!baseUnit) {\r\n\t\t\tbaseUnit = this.get(\"baseUnit\");\r\n\t\t}\r\n\r\n\t\tif (maxValue != null && value != maxValue) {\r\n\t\t\tvalue = Math.abs(value);\r\n\t\t\tmaxValue = Math.abs(maxValue);\r\n\t\t\tlet maxUnit = this.getValueUnit(Math.max(value, maxValue), baseUnit);\r\n\t\t\t//let diffUnit = this.getValueUnit(Math.abs(maxValue - value), baseUnit);\r\n\t\t\t//console.log(maxUnit, diffUnit);\r\n\t\t\treturn (<any>this.get(\"durationFormats\"))[baseUnit!][maxUnit!];\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlet unit = this.getValueUnit(value, baseUnit);\r\n\t\t\treturn (<any>this.get(\"durationFormats\"))[baseUnit!][unit!];\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns value's closest denominator time unit, e.g 100 seconds is\r\n\t * `\"minute\"`, while 59 seconds would still be `second`.\r\n\t *\r\n\t * @param value     Source duration value\r\n\t * @param baseUnit  Base unit\r\n\t * @return Denominator\r\n\t */\r\n\tpublic getValueUnit(value: number, baseUnit?: TimeUnit): TimeUnit | undefined {\r\n\r\n\t\t// Get base unit\r\n\t\tif (!baseUnit) {\r\n\t\t\tbaseUnit = this.get(\"baseUnit\");\r\n\t\t}\r\n\r\n\t\t// Convert to milliseconds\r\n\t\tlet currentUnit: any;\r\n\t\tlet ms = this.getMilliseconds(value, baseUnit);\r\n\t\t$object.eachContinue(this._getUnitValues(), (key, val) => {\r\n\t\t\tif (key == baseUnit || currentUnit) {\r\n\t\t\t\tlet num = ms / val;\r\n\t\t\t\tif (num <= 1) {\r\n\t\t\t\t\tif (!currentUnit) {\r\n\t\t\t\t\t\tcurrentUnit = key;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tcurrentUnit = key;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\treturn currentUnit;\r\n\t}\r\n\r\n\t/**\r\n\t * Converts value to milliseconds according to `baseUnit`.\r\n\t *\r\n\t * @param value     Source duration value\r\n\t * @param baseUnit  Base unit\r\n\t * @return Value in milliseconds\r\n\t */\r\n\tpublic getMilliseconds(value: number, baseUnit?: TimeUnit): number {\r\n\r\n\t\t// Get base unit\r\n\t\tif (!baseUnit) {\r\n\t\t\tbaseUnit = this.get(\"baseUnit\");\r\n\t\t}\r\n\r\n\t\treturn value * this._getUnitValue(baseUnit!);\r\n\t}\r\n\r\n\tprotected _getUnitValue(timeUnit: TimeUnit): number {\r\n\t\treturn this._getUnitValues()[timeUnit];\r\n\t}\r\n\r\n\tprotected _getUnitValues(): any {\r\n\t\treturn {\r\n\t\t\t\"millisecond\": 1,\r\n\t\t\t\"second\": 1000,\r\n\t\t\t\"minute\": 60000,\r\n\t\t\t\"hour\": 3600000,\r\n\t\t\t\"day\": 86400000,\r\n\t\t\t\"week\": 604800000,\r\n\t\t\t\"month\": 2592000000,\r\n\t\t\t\"year\": 31536000000,\r\n\t\t};\r\n\t}\r\n\r\n}\r\n", "/**\n * amCharts 5 locale\n * \n * Locale: en\n * Language: International English\n * Author: Martynas Majeris\n *\n * Follow instructions in [on this page](https://www.amcharts.com/docs/v5/tutorials/creating-translations/) to make corrections or add new translations.\n *\n * ---\n * Edit but leave the header section above this line. You can remove any\n * subsequent comment sections.\n * ---\n *\n * Use this file as a template to create translations. Leave the key part in\n * English intact. Fill the value with a translation.\n *\n * Empty string means no translation, so default \"International English\"\n * will be used.\n *\n * If you need the translation to literally be an empty string, use `null`\n * instead.\n *\n * IMPORTANT:\n * When translating make good effort to keep the translation length\n * at least the same chartcount as the English, especially for short prompts.\n *\n * Having significantly longer prompts may distort the actual charts.\n *\n * NOTE:\n * Some prompts - like months or weekdays - come in two versions: full and\n * shortened.\n *\n * If there's no official shortened version of these in your language, and it\n * would not be possible to invent such short versions that don't seem weird\n * to native speakers of that language, fill those with the same as full\n * version.\n *\n * PLACEHOLDERS:\n * Some prompts have placeholders like \"%1\". Those will be replaced by actual\n * values during translation and should be retained in the translated prompts.\n *\n * Placeholder positions may be changed to better suit structure of the\n * sentence.\n *\n * For example \"From %1 to %2\", when actually used will replace \"%1\" with an\n * actual value representing range start, and \"%2\" will be replaced by end\n * value.\n *\n * E.g. in a Scrollbar for Value axis \"From %1 to %2\" will become\n * \"From 100 to 200\". You may translate \"From\" and \"to\", as well as re-arrange\n * the order of the prompt itself, but make sure the \"%1\" and \"%2\" remain, in\n * places where they will make sense.\n *\n * Save the file as language_LOCALE, i.e. `en_GB.ts`, `fr_FR.ts`, etc.\n */\nexport default {\n\t\"firstDayOfWeek\": 1,\n\t\n\t// Number formatting options.\n\t// \n\t// Please check with the local standards which separator is accepted to be\n\t// used for separating decimals, and which for thousands.\n\t\"_decimalSeparator\": \".\",\n\t\"_thousandSeparator\": \",\",\n\n\t// Position of the percent sign in numbers\n\t\"_percentPrefix\": null,\n\t\"_percentSuffix\": \"%\",\n\n\t// Suffixes for numbers\n\t// When formatting numbers, big or small numers might be reformatted to\n\t// shorter version, by applying a suffix.\n\t// \n\t// For example, 1000000 might become \"1m\".\n\t// Or 1024 might become \"1KB\" if we're formatting byte numbers.\n\t// \n\t// This section defines such suffixes for all such cases.\n\t\"_big_number_suffix_3\": \"k\",\n\t\"_big_number_suffix_6\": \"M\",\n\t\"_big_number_suffix_9\": \"G\",\n\t\"_big_number_suffix_12\": \"T\",\n\t\"_big_number_suffix_15\": \"P\",\n\t\"_big_number_suffix_18\": \"E\",\n\t\"_big_number_suffix_21\": \"Z\",\n\t\"_big_number_suffix_24\": \"Y\",\n\n\t\"_small_number_suffix_3\": \"m\",\n\t\"_small_number_suffix_6\": \"μ\",\n\t\"_small_number_suffix_9\": \"n\",\n\t\"_small_number_suffix_12\": \"p\",\n\t\"_small_number_suffix_15\": \"f\",\n\t\"_small_number_suffix_18\": \"a\",\n\t\"_small_number_suffix_21\": \"z\",\n\t\"_small_number_suffix_24\": \"y\",\n\n\t\"_byte_suffix_B\": \"B\",\n\t\"_byte_suffix_KB\": \"KB\",\n\t\"_byte_suffix_MB\": \"MB\",\n\t\"_byte_suffix_GB\": \"GB\",\n\t\"_byte_suffix_TB\": \"TB\",\n\t\"_byte_suffix_PB\": \"PB\",\n\n\t// Default date formats for various periods.\n\t// \n\t// This should reflect official or de facto formatting universally accepted\n\t// in the country translation is being made for\n\t// Available format codes here:\n\t// https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/#Format_codes\n\t// \n\t// This will be used when formatting date/time for particular granularity,\n\t// e.g. \"_date_hour\" will be shown whenever we need to show time as hours.\n\t// \n\t// \"date\" is used as in default date format when showing standalone dates.\n\t\"_date\": \"yyyy-MM-dd\",\n\t\"_date_millisecond\": \"mm:ss SSS\",\n\t\"_date_millisecond_full\": \"HH:mm:ss SSS\",\n\t\"_date_second\": \"HH:mm:ss\",\n\t\"_date_second_full\": \"HH:mm:ss\",\n\t\"_date_minute\": \"HH:mm\",\n\t\"_date_minute_full\": \"HH:mm - MMM dd, yyyy\",\n\t\"_date_hour\": \"HH:mm\",\n\t\"_date_hour_full\": \"HH:mm - MMM dd, yyyy\",\n\t\"_date_day\": \"MMM dd\",\n\t\"_date_day_full\": \"MMM dd, yyyy\",\n\t\"_date_week\": \"ww\",\n\t\"_date_week_full\": \"MMM dd, yyyy\",\n\t\"_date_month\": \"MMM\",\n\t\"_date_month_full\": \"MMM, yyyy\",\n\t\"_date_year\": \"yyyy\",\n\n\t// Default duration formats for various base units.\n\t// \n\t// This will be used by DurationFormatter to format numeric values into\n\t// duration.\n\t// \n\t// Notice how each duration unit comes in several versions. This is to ensure\n\t// that each base unit is shown correctly.\n\t// \n\t// For example, if we have baseUnit set to \"second\", meaning our duration is\n\t// in seconds.\n\t// \n\t// If we pass in `50` to formatter, it will know that we have just 50 seconds\n\t// (less than a minute) so it will use format in `\"_duration_second\"` (\"ss\"),\n\t// and the formatted result will be in like `\"50\"`.\n\t// \n\t// If we pass in `70`, which is more than a minute, the formatter will switch\n\t// to `\"_duration_second_minute\"` (\"mm:ss\"), resulting in \"01:10\" formatted\n\t// text.\n\t// \n\t// Available codes here:\n\t// https://www.amcharts.com/docs/v4/concepts/formatters/formatting-duration/#Available_Codes\n\t\"_duration_millisecond\": \"SSS\",\n\t\"_duration_millisecond_second\": \"ss.SSS\",\n\t\"_duration_millisecond_minute\": \"mm:ss SSS\",\n\t\"_duration_millisecond_hour\": \"hh:mm:ss SSS\",\n\t\"_duration_millisecond_day\": \"d'd' mm:ss SSS\",\n\t\"_duration_millisecond_week\": \"d'd' mm:ss SSS\",\n\t\"_duration_millisecond_month\": \"M'm' dd'd' mm:ss SSS\",\n\t\"_duration_millisecond_year\": \"y'y' MM'm' dd'd' mm:ss SSS\",\n\n\t\"_duration_second\": \"ss\",\n\t\"_duration_second_minute\": \"mm:ss\",\n\t\"_duration_second_hour\": \"hh:mm:ss\",\n\t\"_duration_second_day\": \"d'd' hh:mm:ss\",\n\t\"_duration_second_week\": \"d'd' hh:mm:ss\",\n\t\"_duration_second_month\": \"M'm' dd'd' hh:mm:ss\",\n\t\"_duration_second_year\": \"y'y' MM'm' dd'd' hh:mm:ss\",\n\n\t\"_duration_minute\": \"mm\",\n\t\"_duration_minute_hour\": \"hh:mm\",\n\t\"_duration_minute_day\": \"d'd' hh:mm\",\n\t\"_duration_minute_week\": \"d'd' hh:mm\",\n\t\"_duration_minute_month\": \"M'm' dd'd' hh:mm\",\n\t\"_duration_minute_year\": \"y'y' MM'm' dd'd' hh:mm\",\n\n\t\"_duration_hour\": \"hh'h'\",\n\t\"_duration_hour_day\": \"d'd' hh'h'\",\n\t\"_duration_hour_week\": \"d'd' hh'h'\",\n\t\"_duration_hour_month\": \"M'm' dd'd' hh'h'\",\n\t\"_duration_hour_year\": \"y'y' MM'm' dd'd' hh'h'\",\n\n\t\"_duration_day\": \"d'd'\",\n\t\"_duration_day_week\": \"d'd'\",\n\t\"_duration_day_month\": \"M'm' dd'd'\",\n\t\"_duration_day_year\": \"y'y' MM'm' dd'd'\",\n\n\t\"_duration_week\": \"w'w'\",\n\t\"_duration_week_month\": \"w'w'\",\n\t\"_duration_week_year\": \"w'w'\",\n\n\t\"_duration_month\": \"M'm'\",\n\t\"_duration_month_year\": \"y'y' MM'm'\",\n\n\t\"_duration_year\": \"y'y'\",\n\n\t// Era translations\n\t\"_era_ad\": \"AD\",\n\t\"_era_bc\": \"BC\",\n\n\t// Day part, used in 12-hour formats, e.g. 5 P.M.\n\t// Please note that these come in 3 variants:\n\t// * one letter (e.g. \"A\")\n\t// * two letters (e.g. \"AM\")\n\t// * two letters with dots (e.g. \"A.M.\")\n\t// \n\t// All three need to to be translated even if they are all the same. Some\n\t// users might use one, some the other.\n\t\"A\": \"\",\n\t\"P\": \"\",\n\t\"AM\": \"\",\n\t\"PM\": \"\",\n\t\"A.M.\": \"\",\n\t\"P.M.\": \"\",\n\n\t// Date-related stuff.\n\t// \n\t// When translating months, if there's a difference, use the form which is\n\t// best for a full date, e.g. as you would use it in \"2018 January 1\".\n\t// \n\t// Note that May is listed twice. This is because in English May is the same\n\t// in both long and short forms, while in other languages it may not be the\n\t// case. Translate \"May\" to full word, while \"May(short)\" to shortened\n\t// version.\n\t// \n\t// Should month names and weekdays be capitalized or not?\n\t// \n\t// Rule of thumb is this: if the names should always be capitalized,\n\t// regardless of name position within date (\"January\", \"21st January 2018\",\n\t// etc.) use capitalized names. Otherwise enter all lowercase.\n\t// \n\t// The date formatter will automatically capitalize names if they are the\n\t// first (or only) word in resulting date.\n\t\"January\": \"\",\n\t\"February\": \"\",\n\t\"March\": \"\",\n\t\"April\": \"\",\n\t\"May\": \"\",\n\t\"June\": \"\",\n\t\"July\": \"\",\n\t\"August\": \"\",\n\t\"September\": \"\",\n\t\"October\": \"\",\n\t\"November\": \"\",\n\t\"December\": \"\",\n\t\"Jan\": \"\",\n\t\"Feb\": \"\",\n\t\"Mar\": \"\",\n\t\"Apr\": \"\",\n\t\"May(short)\": \"May\",\n\t\"Jun\": \"\",\n\t\"Jul\": \"\",\n\t\"Aug\": \"\",\n\t\"Sep\": \"\",\n\t\"Oct\": \"\",\n\t\"Nov\": \"\",\n\t\"Dec\": \"\",\n\n\t// Weekdays.\n\t\"Sunday\": \"\",\n\t\"Monday\": \"\",\n\t\"Tuesday\": \"\",\n\t\"Wednesday\": \"\",\n\t\"Thursday\": \"\",\n\t\"Friday\": \"\",\n\t\"Saturday\": \"\",\n\t\"Sun\": \"\",\n\t\"Mon\": \"\",\n\t\"Tue\": \"\",\n\t\"Wed\": \"\",\n\t\"Thu\": \"\",\n\t\"Fri\": \"\",\n\t\"Sat\": \"\",\n\n\t// Date ordinal function.\n\t// \n\t// This is used when adding number ordinal when formatting days in dates.\n\t// \n\t// E.g. \"January 1st\", \"February 2nd\".\n\t// \n\t// The function accepts day number, and returns a string to be added to the\n\t// day, like in default English translation, if we pass in 2, we will receive\n\t// \"nd\" back.\n\t\"_dateOrd\": function(day: number): string {\n\t\tlet res = \"th\";\n\t\tif ((day < 11) || (day > 13)) {\n\t\t\tswitch (day % 10) {\n\t\t\t\tcase 1:\n\t\t\t\t\tres = \"st\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tres = \"nd\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\tres = \"rd\"\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn res;\n\t},\n\n\t// Various chart controls.\n\t// Shown as a tooltip on zoom out button.\n\t\"Zoom Out\": \"\",\n\n\t// Timeline buttons\n\t\"Play\": \"\",\n\t\"Stop\": \"\",\n\n\t// Chart's Legend screen reader title.\n\t\"Legend\": \"\",\n\n\t// Legend's item screen reader indicator.\n\t\"Press ENTER to toggle\": \"\",\n\n\t// Shown when the chart is busy loading something.\n\t\"Loading\": \"\",\n\n\t// Shown as the first button in the breadcrumb navigation, e.g.:\n\t// Home > First level > ...\n\t\"Home\": \"\",\n\n\t// Chart types.\n\t// Those are used as default screen reader titles for the main chart element\n\t// unless developer has set some more descriptive title.\n\t\"Chart\": \"\",\n\t\"Serial chart\": \"\",\n\t\"X/Y chart\": \"\",\n\t\"Pie chart\": \"\",\n\t\"Gauge chart\": \"\",\n\t\"Radar chart\": \"\",\n\t\"Sankey diagram\": \"\",\n\t\"Flow diagram\": \"\",\n\t\"Chord diagram\": \"\",\n\t\"TreeMap chart\": \"\",\n\t\"Force directed tree\": \"\",\n\t\"Sliced chart\": \"\",\n\n\t// Series types.\n\t// Used to name series by type for screen readers if they do not have their\n\t// name set.\n\t\"Series\": \"\",\n\t\"Candlestick Series\": \"\",\n\t\"OHLC Series\": \"\",\n\t\"Column Series\": \"\",\n\t\"Line Series\": \"\",\n\t\"Pie Slice Series\": \"\",\n\t\"Funnel Series\": \"\",\n\t\"Pyramid Series\": \"\",\n\t\"X/Y Series\": \"\",\n\n\t// Map-related stuff.\n\t\"Map\": \"\",\n\t\"Press ENTER to zoom in\": \"\",\n\t\"Press ENTER to zoom out\": \"\",\n\t\"Use arrow keys to zoom in and out\": \"\",\n\t\"Use plus and minus keys on your keyboard to zoom in and out\": \"\",\n\n\t// Export-related stuff.\n\t// These prompts are used in Export menu labels.\n\t// \n\t// \"Export\" is the top-level menu item.\n\t// \n\t// \"Image\", \"Data\", \"Print\" as second-level indicating type of export\n\t// operation.\n\t// \n\t// Leave actual format untranslated, unless you absolutely know that they\n\t// would convey more meaning in some other way.\n\t\"Export\": \"\",\n\t\"Image\": \"\",\n\t\"Data\": \"\",\n\t\"Print\": \"\",\n\t\"Press ENTER or use arrow keys to navigate\": \"\",\n\t\"Press ENTER to open\": \"\",\n\t\"Press ENTER to print.\": \"\",\n\t\"Press ENTER to export as %1.\": \"\",\n\t\"(Press ESC to close this message)\": \"\",\n\t\"Image Export Complete\": \"\",\n\t\"Export operation took longer than expected. Something might have gone wrong.\": \"\",\n\t\"Saved from\": \"\",\n\t\"PNG\": \"\",\n\t\"JPG\": \"\",\n\t\"GIF\": \"\",\n\t\"SVG\": \"\",\n\t\"PDF\": \"\",\n\t\"JSON\": \"\",\n\t\"CSV\": \"\",\n\t\"XLSX\": \"\",\n\t\"HTML\": \"\",\n\n\t// Scrollbar-related stuff.\n\t// \n\t// Scrollbar is a control which can zoom and pan the axes on the chart.\n\t// \n\t// Each scrollbar has two grips: left or right (for horizontal scrollbar) or\n\t// upper and lower (for vertical one).\n\t// \n\t// Prompts change in relation to whether Scrollbar is vertical or horizontal.\n\t// \n\t// The final section is used to indicate the current range of selection.\n\t\"Use TAB to select grip buttons or left and right arrows to change selection\": \"\",\n\t\"Use left and right arrows to move selection\": \"\",\n\t\"Use left and right arrows to move left selection\": \"\",\n\t\"Use left and right arrows to move right selection\": \"\",\n\t\"Use TAB select grip buttons or up and down arrows to change selection\": \"\",\n\t\"Use up and down arrows to move selection\": \"\",\n\t\"Use up and down arrows to move lower selection\": \"\",\n\t\"Use up and down arrows to move upper selection\": \"\",\n\t\"From %1 to %2\": \"\",\n\t\"From %1\": \"\",\n\t\"To %1\": \"\",\n\n\t// Data loader-related.\n\t\"No parser available for file: %1\": \"\",\n\t\"Error parsing file: %1\": \"\",\n\t\"Unable to load file: %1\": \"\",\n\t\"Invalid date\": \"\",\n\n\t// Common actions\n\t\"Close\": \"\",\n\t\"Minimize\": \"\"\n\n};", "import { Entity, IEntitySettings, IEntityPrivate } from \"./Entity\"\nimport * as $array from \"./Array\"\nimport en from \"../../../locales/en\";\n\n/**\n * Defines properties that exist for the locale.\n *\n * @ignore\n */\nexport interface ILocaleSettings {\n\t\"firstDayOfWeek\"?: number,\n\n\t// number formatter related\n\t\"_decimalSeparator\"?: string;\n\t\"_thousandSeparator\"?: string;\n\n\t\"_percentPrefix\"?: string | null;\n\t\"_percentSuffix\"?: string | null;\n\n\t\"_big_number_suffix_3\"?: string;\n\t\"_big_number_suffix_6\"?: string;\n\t\"_big_number_suffix_9\"?: string;\n\t\"_big_number_suffix_12\"?: string;\n\t\"_big_number_suffix_15\"?: string;\n\t\"_big_number_suffix_18\"?: string;\n\t\"_big_number_suffix_21\"?: string;\n\t\"_big_number_suffix_24\"?: string;\n\n\t\"_small_number_suffix_24\"?: string;\n\t\"_small_number_suffix_21\"?: string;\n\t\"_small_number_suffix_18\"?: string;\n\t\"_small_number_suffix_15\"?: string;\n\t\"_small_number_suffix_12\"?: string;\n\t\"_small_number_suffix_9\"?: string;\n\t\"_small_number_suffix_6\"?: string;\n\t\"_small_number_suffix_3\"?: string;\n\n\t\"_byte_suffix_B\"?: string;\n\t\"_byte_suffix_KB\"?: string;\n\t\"_byte_suffix_MB\"?: string;\n\t\"_byte_suffix_GB\"?: string;\n\t\"_byte_suffix_TB\"?: string;\n\t\"_byte_suffix_PB\"?: string;\n\n\t// Default date formats for various periods\n\t\"_date\"?: string;\n\t\"_date_millisecond\"?: string;\n\t\"_date_millisecond_full\"?: string;\n\t\"_date_second\"?: string;\n\t\"_date_second_full\"?: string;\n\t\"_date_minute\"?: string;\n\t\"_date_minute_full\"?: string;\n\t\"_date_hour\"?: string;\n\t\"_date_hour_full\"?: string;\n\t\"_date_day\"?: string;\n\t\"_date_day_full\"?: string;\n\t\"_date_week\"?: string;\n\t\"_date_week_full\"?: string;\n\t\"_date_month\"?: string;\n\t\"_date_month_full\"?: string;\n\t\"_date_year\"?: string;\n\n\t// Default duration formats for various base units\n\t\"_duration_millisecond\"?: string;\n\t\"_duration_millisecond_second\"?: string;\n\t\"_duration_millisecond_minute\"?: string;\n\t\"_duration_millisecond_hour\"?: string;\n\t\"_duration_millisecond_day\"?: string;\n\t\"_duration_millisecond_week\"?: string;\n\t\"_duration_millisecond_month\"?: string;\n\t\"_duration_millisecond_year\"?: string;\n\n\t\"_duration_second\"?: string;\n\t\"_duration_second_minute\"?: string;\n\t\"_duration_second_hour\"?: string;\n\t\"_duration_second_day\"?: string;\n\t\"_duration_second_week\"?: string;\n\t\"_duration_second_month\"?: string;\n\t\"_duration_second_year\"?: string;\n\n\t\"_duration_minute\"?: string;\n\t\"_duration_minute_hour\"?: string;\n\t\"_duration_minute_day\"?: string;\n\t\"_duration_minute_week\"?: string;\n\t\"_duration_minute_month\"?: string;\n\t\"_duration_minute_year\"?: string;\n\n\t\"_duration_hour\"?: string;\n\t\"_duration_hour_day\"?: string;\n\t\"_duration_hour_week\"?: string;\n\t\"_duration_hour_month\"?: string;\n\t\"_duration_hour_year\"?: string;\n\n\t\"_duration_day\"?: string;\n\t\"_duration_day_week\"?: string;\n\t\"_duration_day_month\"?: string;\n\t\"_duration_day_year\"?: string;\n\n\t\"_duration_week\"?: string;\n\t\"_duration_week_month\"?: string;\n\t\"_duration_week_year\"?: string;\n\n\t\"_duration_month\"?: string;\n\t\"_duration_month_year\"?: string;\n\n\t\"_duration_year\"?: string;\n\n\t// Era\n\t\"_era_ad\"?: string;\n\t\"_era_bc\"?: string;\n\n\t// Period\n\t\"A\"?: string;\n\t\"P\"?: string;\n\t\"AM\"?: string;\n\t\"PM\"?: string;\n\t\"A.M.\"?: string;\n\t\"P.M.\"?: string;\n\n\t// Dates\n\t\"January\"?: string;\n\t\"February\"?: string;\n\t\"March\"?: string;\n\t\"April\"?: string;\n\t\"May\"?: string;\n\t\"June\"?: string;\n\t\"July\"?: string;\n\t\"August\"?: string;\n\t\"September\"?: string;\n\t\"October\"?: string;\n\t\"November\"?: string;\n\t\"December\"?: string;\n\t\"Jan\"?: string;\n\t\"Feb\"?: string;\n\t\"Mar\"?: string;\n\t\"Apr\"?: string;\n\t\"May(short)\"?: string;\n\t\"Jun\"?: string;\n\t\"Jul\"?: string;\n\t\"Aug\"?: string;\n\t\"Sep\"?: string;\n\t\"Oct\"?: string;\n\t\"Nov\"?: string;\n\t\"Dec\"?: string;\n\t\"Sunday\"?: string;\n\t\"Monday\"?: string;\n\t\"Tuesday\"?: string;\n\t\"Wednesday\"?: string;\n\t\"Thursday\"?: string;\n\t\"Friday\"?: string;\n\t\"Saturday\"?: string;\n\t\"Sun\"?: string;\n\t\"Mon\"?: string;\n\t\"Tue\"?: string;\n\t\"Wed\"?: string;\n\t\"Thu\"?: string;\n\t\"Fri\"?: string;\n\t\"Sat\"?: string;\n\n\t// Chart elements\n\t\"Zoom Out\"?: string;\n\t\"Play\"?: string;\n\t\"Stop\"?: string;\n\t\"Legend\"?: string;\n\t\"Press ENTER to toggle\"?: string;\n\t\"Loading\"?: string;\n\t\"%1 shown\"?: string;\n\t\"%1 hidden\"?: string;\n\n\t// Chart types\n\t\"Chart\"?: string;\n\t\"Serial chart\"?: string;\n\t\"X/Y chart\"?: string;\n\t\"Pie chart\"?: string;\n\t\"Sunburst chart\"?: string;\n\t\"Gauge chart\"?: string;\n\t\"Radar chart\"?: string;\n\t\"Sankey diagram\"?: string;\n\t\"Flow diagram\"?: string;\n\t\"Chord diagram\"?: string;\n\t\"TreeMap chart\"?: string;\n\t\"Force directed tree\"?: string;\n\t\"Sliced chart\"?: string;\n\n\t// Series types\n\t\"Series\"?: string;\n\t\"Candlestick Series\"?: string;\n\t\"OHLC Series\"?: string;\n\t\"Column Series\"?: string;\n\t\"Line Series\"?: string;\n\t\"Pie Slice Series\"?: string;\n\t\"Funnel Series\"?: string;\n\t\"Pyramid Series\"?: string;\n\t\"X/Y Series\"?: string;\n\n\t// Map-related\n\t\"Map\"?: string;\n\t\"Press ENTER to zoom in\"?: string;\n\t\"Press ENTER to zoom out\"?: string;\n\t\"Use arrow keys to zoom in and out\"?: string;\n\t\"Use plus and minus keys on your keyboard to zoom in and out\"?: string;\n\t\"Home\"?: string;\n\t\"Zoom level changed to %1\"?: string;\n\n\t// Export-related\n\t\"Export\"?: string;\n\t\"Image\"?: string;\n\t\"Data\"?: string;\n\t\"Print\"?: string;\n\t\"Press ENTER or use arrow keys to navigate\"?: string;\n\t\"Press ENTER to open\"?: string;\n\t\"Press ENTER to print.\"?: string;\n\t\"Press ENTER to export as %1.\"?: string;\n\t\"(Press ESC to close this message)\"?: string;\n\t\"Image Export Complete\"?: string;\n\t\"Export operation took longer than expected. Something might have gone wrong.\"?: string;\n\t\"Saved from\"?: string;\n\t\"PNG\"?: string;\n\t\"JPG\"?: string;\n\t\"GIF\"?: string;\n\t\"SVG\"?: string;\n\t\"PDF\"?: string;\n\t\"JSON\"?: string;\n\t\"CSV\"?: string;\n\t\"XLSX\"?: string;\n\t\"HTML\"?: string;\n\n\t// Scrollbar-related\n\t\"Use TAB to select grip buttons or left and right arrows to change selection\"?: string;\n\t\"Use left and right arrows to move selection\"?: string;\n\t\"Use left and right arrows to move left selection\"?: string;\n\t\"Use left and right arrows to move right selection\"?: string;\n\t\"Use TAB select grip buttons or up and down arrows to change selection\"?: string;\n\t\"Use up and down arrows to move selection\"?: string;\n\t\"Use up and down arrows to move lower selection\"?: string;\n\t\"Use up and down arrows to move upper selection\"?: string;\n\t\"From %1 to %2\"?: string;\n\t\"From %1\"?: string;\n\t\"To %1\"?: string;\n\n\t// Data loader-related\n\t\"No parser available for file: %1\"?: string;\n\t\"Error parsing file: %1\"?: string;\n\t\"Unable to load file: %1\"?: string;\n\t\"Invalid date\"?: string;\n\n\t// Common actions\n\t\"Close\"?: string;\n\t\"Minimize\"?: string;\n\n\t\"Venn Series\"?: string;\n\t\"Venn Diagram\"?: string;\n}\n\n/**\n * Defines functions that exist for the locale.\n *\n * @ignore\n */\nexport interface ILocaleFunctions {\n\t// ordinal function\n\t\"_dateOrd\": (day: number) => string;\n}\n\n/**\n * Defines all of the defaults for locale properties.\n * @ignore\n */\nexport interface ILocaleDefault extends ILocaleSettings, ILocaleFunctions { }\n\n/**\n * Defines locale interface.\n *\n * @ignore\n */\nexport interface ILocale extends Partial<ILocaleDefault> { };\n\nexport interface ILanguageSettings extends IEntitySettings {\n}\n\nexport interface ILanguagePrivate extends IEntityPrivate {\n\n\t/**\n\t * A locale for International English (default).\n\t */\n\tdefaultLocale: ILocale;\n\n}\n\nexport class Language extends Entity {\n\tdeclare public _settings: ILanguageSettings;\n\tdeclare public _privateSettings: ILanguagePrivate;\n\n\tprotected _setDefaults() {\n\t\tthis.setPrivate(\"defaultLocale\", en);\n\t\tsuper._setDefaults();\n\t}\n\n\tpublic translate<Key extends keyof ILocaleSettings>(prompt: Key, locale?: ILocale, ...rest: Array<string>): string {\n\n\t\t// Get langauge\n\t\tif (!locale) {\n\t\t\tlocale = this._root.locale || this.getPrivate(\"defaultLocale\");\n\t\t}\n\n\t\t// Init translation\n\t\tlet translation: string = prompt;\n\t\tlet value = locale[prompt];\n\n\t\t// Try to look for the translation\n\t\tif (value === null) {\n\t\t\ttranslation = \"\";\n\t\t}\n\t\telse if (value != null) {\n\t\t\t// It might be an empty string\n\t\t\tif (value) {\n\t\t\t\ttranslation = <string>value!;\n\t\t\t}\n\t\t}\n\t\telse if (locale !== this.getPrivate(\"defaultLocale\")) {\n\t\t\t// Try to look in default language\n\t\t\treturn this.translate(prompt, this.getPrivate(\"defaultLocale\"), ...rest);\n\t\t}\n\n\t\t// Replace %1, %2, etc params\n\t\tif (rest.length) {\n\t\t\tfor (let len = rest.length, i = 0; i < len; ++i) {\n\t\t\t\ttranslation = translation.split(\"%\" + (i + 1)).join(rest[i]);\n\t\t\t}\n\t\t}\n\n\t\t// Return the translation\n\t\treturn translation;\n\t}\n\n\tpublic translateAny(prompt: string, locale?: ILocale, ...rest: Array<string>): string {\n\t\treturn this.translate(<any>prompt, locale, ...rest);\n\t}\n\n\tpublic setTranslationAny(prompt: string, translation: string, locale?: ILocale): void {\n\t\tconst localeTarget = locale || this._root.locale;\n\t\t(<any>localeTarget)[prompt] = translation;\n\t}\n\n\tpublic translateEmpty<Key extends keyof ILocaleSettings>(prompt: Key, locale?: ILocale, ...rest: Array<string>): string {\n\t\tlet translation = this.translate(prompt, locale, ...rest);\n\t\treturn translation == prompt ? \"\" : translation;\n\t}\n\n\tpublic translateFunc<Key extends keyof ILocaleFunctions>(prompt: Key, locale?: ILocale): ILocaleFunctions[Key] {\n\n\t\tif ((<any>this._root.locale)[prompt]) {\n\t\t\treturn (<any>this._root.locale)[prompt];\n\t\t}\n\n\t\t// Try to look in default language\n\t\tif (locale !== this.getPrivate(\"defaultLocale\")) {\n\t\t\treturn this.translateFunc(prompt, this.getPrivate(\"defaultLocale\"));\n\t\t}\n\n\t\t// Fail - return empty function\n\t\treturn (): string => {\n\t\t\treturn \"\";\n\t\t};\n\t}\n\n\tpublic translateAll<Key extends keyof ILocaleSettings>(list: Array<Key>, locale?: ILocale): Array<string> {\n\t\t// Translate all items in the list\n\t\tif (!this.isDefault()) {\n\t\t\treturn $array.map(list, (x) => this.translate(x, locale));\n\n\t\t} else {\n\t\t\treturn list;\n\t\t}\n\t}\n\n\t/**\n\t * Returns `true` if the currently selected locale is a default locale.\n\t *\n\t * @return `true` if locale is default; `false` if it is not.\n\t */\n\tpublic isDefault(): boolean {\n\t\treturn this.getPrivate(\"defaultLocale\") === this._root.locale;\n\t}\n\n}\n", "/**\n * Modified from Pixi:\n *\n * The MIT License\n *\n * Copyright (c) 2013-2017 Mathew Groves, Chad Engler\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\nimport type { IPoint } from \"./IPoint\";\n\n/**\n * @ignore\n */\nexport class Matrix {\n\tpublic a: number;\n\tpublic b: number;\n\tpublic c: number;\n\tpublic d: number;\n\tpublic tx: number;\n\tpublic ty: number;\n\n\tconstructor(a = 1, b = 0, c = 0, d = 1, tx = 0, ty = 0) {\n\t\tthis.a = a;\n\t\tthis.b = b;\n\t\tthis.c = c;\n\t\tthis.d = d;\n\t\tthis.tx = tx;\n\t\tthis.ty = ty;\n\t}\n\n\t/**\n\t * Sets the matrix based on all the available properties\n\t */\n\tsetTransform(x: number, y: number, pivotX: number, pivotY: number, rotation: number, scale: number = 1): void {\n\t\tthis.a = Math.cos(rotation) * scale;\n\t\tthis.b = Math.sin(rotation) * scale;\n\t\tthis.c = -Math.sin(rotation) * scale;\n\t\tthis.d = Math.cos(rotation) * scale;\n\t\tthis.tx = x - ((pivotX * this.a) + (pivotY * this.c));\n\t\tthis.ty = y - ((pivotX * this.b) + (pivotY * this.d));\n\t}\n\n\t/**\n\t * Get a new position with the current transformation applied.\n\t * Can be used to go from a child's coordinate space to the world coordinate space. (e.g. rendering)\n\t */\n\tapply(origin: IPoint): IPoint {\n\t\treturn {\n\t\t\tx: (this.a * origin.x) + (this.c * origin.y) + this.tx,\n\t\t\ty: (this.b * origin.x) + (this.d * origin.y) + this.ty\n\t\t};\n\t}\n\n\t/**\n\t * Get a new position with the inverse of the current transformation applied.\n\t * Can be used to go from the world coordinate space to a child's coordinate space. (e.g. input)\n\t */\n\tapplyInverse(origin: IPoint): IPoint {\n\t\tconst id = 1 / ((this.a * this.d) + (this.c * -this.b));\n\n\t\treturn {\n\t\t\tx: (this.d * id * origin.x) + (-this.c * id * origin.y) + (((this.ty * this.c) - (this.tx * this.d)) * id),\n\t\t\ty: (this.a * id * origin.y) + (-this.b * id * origin.x) + (((-this.ty * this.a) + (this.tx * this.b)) * id)\n\t\t};\n\t}\n\n\t/**\n\t * Appends the given Matrix to this Matrix.\n\t */\n\tappend(matrix: Matrix): void {\n\t\tconst a1 = this.a;\n\t\tconst b1 = this.b;\n\t\tconst c1 = this.c;\n\t\tconst d1 = this.d;\n\t\tthis.a = (matrix.a * a1) + (matrix.b * c1);\n\t\tthis.b = (matrix.a * b1) + (matrix.b * d1);\n\t\tthis.c = (matrix.c * a1) + (matrix.d * c1);\n\t\tthis.d = (matrix.c * b1) + (matrix.d * d1);\n\t\tthis.tx = (matrix.tx * a1) + (matrix.ty * c1) + this.tx;\n\t\tthis.ty = (matrix.tx * b1) + (matrix.ty * d1) + this.ty;\n\t}\n\n\t/**\n\t * Prepends the given Matrix to this Matrix.\n\t */\n\tprepend(matrix: Matrix): void {\n\t\tconst tx1 = this.tx;\n\t\tif (matrix.a !== 1 || matrix.b !== 0 || matrix.c !== 0 || matrix.d !== 1) {\n\t\t\tconst a1 = this.a;\n\t\t\tconst c1 = this.c;\n\t\t\tthis.a = (a1 * matrix.a) + (this.b * matrix.c);\n\t\t\tthis.b = (a1 * matrix.b) + (this.b * matrix.d);\n\t\t\tthis.c = (c1 * matrix.a) + (this.d * matrix.c);\n\t\t\tthis.d = (c1 * matrix.b) + (this.d * matrix.d);\n\t\t}\n\t\tthis.tx = (tx1 * matrix.a) + (this.ty * matrix.c) + matrix.tx;\n\t\tthis.ty = (tx1 * matrix.b) + (this.ty * matrix.d) + matrix.ty;\n\t}\n\n\t/**\n\t * Copies the other matrix's properties into this matrix\n\t */\n\tcopyFrom(matrix: Matrix): void {\n\t\tthis.a = matrix.a;\n\t\tthis.b = matrix.b;\n\t\tthis.c = matrix.c;\n\t\tthis.d = matrix.d;\n\t\tthis.tx = matrix.tx;\n\t\tthis.ty = matrix.ty;\n\t}\n}\n\n", "var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar TAU = Math.PI * 2;\n\nvar mapToEllipse = function mapToEllipse(_ref, rx, ry, cosphi, sinphi, centerx, centery) {\n  var x = _ref.x,\n      y = _ref.y;\n\n  x *= rx;\n  y *= ry;\n\n  var xp = cosphi * x - sinphi * y;\n  var yp = sinphi * x + cosphi * y;\n\n  return {\n    x: xp + centerx,\n    y: yp + centery\n  };\n};\n\nvar approxUnitArc = function approxUnitArc(ang1, ang2) {\n  // If 90 degree circular arc, use a constant\n  // as derived from http://spencermortensen.com/articles/bezier-circle\n  var a = ang2 === 1.5707963267948966 ? 0.551915024494 : ang2 === -1.5707963267948966 ? -0.551915024494 : 4 / 3 * Math.tan(ang2 / 4);\n\n  var x1 = Math.cos(ang1);\n  var y1 = Math.sin(ang1);\n  var x2 = Math.cos(ang1 + ang2);\n  var y2 = Math.sin(ang1 + ang2);\n\n  return [{\n    x: x1 - y1 * a,\n    y: y1 + x1 * a\n  }, {\n    x: x2 + y2 * a,\n    y: y2 - x2 * a\n  }, {\n    x: x2,\n    y: y2\n  }];\n};\n\nvar vectorAngle = function vectorAngle(ux, uy, vx, vy) {\n  var sign = ux * vy - uy * vx < 0 ? -1 : 1;\n\n  var dot = ux * vx + uy * vy;\n\n  if (dot > 1) {\n    dot = 1;\n  }\n\n  if (dot < -1) {\n    dot = -1;\n  }\n\n  return sign * Math.acos(dot);\n};\n\nvar getArcCenter = function getArcCenter(px, py, cx, cy, rx, ry, largeArcFlag, sweepFlag, sinphi, cosphi, pxp, pyp) {\n  var rxsq = Math.pow(rx, 2);\n  var rysq = Math.pow(ry, 2);\n  var pxpsq = Math.pow(pxp, 2);\n  var pypsq = Math.pow(pyp, 2);\n\n  var radicant = rxsq * rysq - rxsq * pypsq - rysq * pxpsq;\n\n  if (radicant < 0) {\n    radicant = 0;\n  }\n\n  radicant /= rxsq * pypsq + rysq * pxpsq;\n  radicant = Math.sqrt(radicant) * (largeArcFlag === sweepFlag ? -1 : 1);\n\n  var centerxp = radicant * rx / ry * pyp;\n  var centeryp = radicant * -ry / rx * pxp;\n\n  var centerx = cosphi * centerxp - sinphi * centeryp + (px + cx) / 2;\n  var centery = sinphi * centerxp + cosphi * centeryp + (py + cy) / 2;\n\n  var vx1 = (pxp - centerxp) / rx;\n  var vy1 = (pyp - centeryp) / ry;\n  var vx2 = (-pxp - centerxp) / rx;\n  var vy2 = (-pyp - centeryp) / ry;\n\n  var ang1 = vectorAngle(1, 0, vx1, vy1);\n  var ang2 = vectorAngle(vx1, vy1, vx2, vy2);\n\n  if (sweepFlag === 0 && ang2 > 0) {\n    ang2 -= TAU;\n  }\n\n  if (sweepFlag === 1 && ang2 < 0) {\n    ang2 += TAU;\n  }\n\n  return [centerx, centery, ang1, ang2];\n};\n\nvar arcToBezier = function arcToBezier(_ref2) {\n  var px = _ref2.px,\n      py = _ref2.py,\n      cx = _ref2.cx,\n      cy = _ref2.cy,\n      rx = _ref2.rx,\n      ry = _ref2.ry,\n      _ref2$xAxisRotation = _ref2.xAxisRotation,\n      xAxisRotation = _ref2$xAxisRotation === undefined ? 0 : _ref2$xAxisRotation,\n      _ref2$largeArcFlag = _ref2.largeArcFlag,\n      largeArcFlag = _ref2$largeArcFlag === undefined ? 0 : _ref2$largeArcFlag,\n      _ref2$sweepFlag = _ref2.sweepFlag,\n      sweepFlag = _ref2$sweepFlag === undefined ? 0 : _ref2$sweepFlag;\n\n  var curves = [];\n\n  if (rx === 0 || ry === 0) {\n    return [];\n  }\n\n  var sinphi = Math.sin(xAxisRotation * TAU / 360);\n  var cosphi = Math.cos(xAxisRotation * TAU / 360);\n\n  var pxp = cosphi * (px - cx) / 2 + sinphi * (py - cy) / 2;\n  var pyp = -sinphi * (px - cx) / 2 + cosphi * (py - cy) / 2;\n\n  if (pxp === 0 && pyp === 0) {\n    return [];\n  }\n\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n\n  var lambda = Math.pow(pxp, 2) / Math.pow(rx, 2) + Math.pow(pyp, 2) / Math.pow(ry, 2);\n\n  if (lambda > 1) {\n    rx *= Math.sqrt(lambda);\n    ry *= Math.sqrt(lambda);\n  }\n\n  var _getArcCenter = getArcCenter(px, py, cx, cy, rx, ry, largeArcFlag, sweepFlag, sinphi, cosphi, pxp, pyp),\n      _getArcCenter2 = _slicedToArray(_getArcCenter, 4),\n      centerx = _getArcCenter2[0],\n      centery = _getArcCenter2[1],\n      ang1 = _getArcCenter2[2],\n      ang2 = _getArcCenter2[3];\n\n  // If 'ang2' == 90.0000000001, then `ratio` will evaluate to\n  // 1.0000000001. This causes `segments` to be greater than one, which is an\n  // unecessary split, and adds extra points to the bezier curve. To alleviate\n  // this issue, we round to 1.0 when the ratio is close to 1.0.\n\n\n  var ratio = Math.abs(ang2) / (TAU / 4);\n  if (Math.abs(1.0 - ratio) < 0.0000001) {\n    ratio = 1.0;\n  }\n\n  var segments = Math.max(Math.ceil(ratio), 1);\n\n  ang2 /= segments;\n\n  for (var i = 0; i < segments; i++) {\n    curves.push(approxUnitArc(ang1, ang2));\n    ang1 += ang2;\n  }\n\n  return curves.map(function (curve) {\n    var _mapToEllipse = mapToEllipse(curve[0], rx, ry, cosphi, sinphi, centerx, centery),\n        x1 = _mapToEllipse.x,\n        y1 = _mapToEllipse.y;\n\n    var _mapToEllipse2 = mapToEllipse(curve[1], rx, ry, cosphi, sinphi, centerx, centery),\n        x2 = _mapToEllipse2.x,\n        y2 = _mapToEllipse2.y;\n\n    var _mapToEllipse3 = mapToEllipse(curve[2], rx, ry, cosphi, sinphi, centerx, centery),\n        x = _mapToEllipse3.x,\n        y = _mapToEllipse3.y;\n\n    return { x1: x1, y1: y1, x2: x2, y2: y2, x: x, y: y };\n  });\n};\n\nexport default arcToBezier;", "/** @ignore *//** */\n\nimport {\n\tIRenderer, IContainer, IDisplayObject, IGraphics, IRendererEvents,\n\tIText, ITextStyle, IRadialText, IPicture, IRendererEvent, ILayer, ICanvasOptions, BlendMode, IPointerEvent, Id\n} from \"./Renderer\";\nimport type { IBounds } from \"../../util/IBounds\";\nimport type { IPoint } from \"../../util/IPoint\";\nimport { Color } from \"../../util/Color\";\nimport { Matrix } from \"../../util/Matrix\";\nimport { Percent, percent } from \"../../util/Percent\";\n//import { Throttler } from \"../../util/Throttler\";\nimport { ArrayDisposer, Disposer, DisposerClass, IDisposer, CounterDisposer, MultiDisposer } from \"../../util/Disposer\";\nimport { TextFormatter, ITextChunk } from \"../../util/TextFormatter\";\nimport * as $utils from \"../../util/Utils\";\nimport * as $array from \"../../util/Array\";\nimport * as $object from \"../../util/Object\";\nimport * as $type from \"../../util/Type\";\nimport * as $math from \"../../util/Math\";\nimport arcToBezier from 'svg-arc-to-cubic-bezier';\n\n\n/**\n * @ignore\n */\nfunction checkArgs(name: string, actual: number, expected: number) {\n\tif (actual !== expected) {\n\t\tthrow new Error(\"Required \" + expected + \" arguments for \" + name + \" but got \" + actual);\n\t}\n}\n\n/**\n * @ignore\n */\nfunction checkMinArgs(name: string, actual: number, expected: number) {\n\tif (actual < expected) {\n\t\tthrow new Error(\"Required at least \" + expected + \" arguments for \" + name + \" but got \" + actual);\n\t}\n}\n\n/**\n * @ignore\n */\nfunction checkEvenArgs(name: string, actual: number, expected: number) {\n\tcheckMinArgs(name, actual, expected);\n\n\tif ((actual % expected) !== 0) {\n\t\tthrow new Error(\"Arguments for \" + name + \" must be in pairs of \" + expected);\n\t}\n}\n\n/**\n * @ignore\n */\nfunction assertBinary(value: number): 0 | 1 {\n\tif (value === 0 || value === 1) {\n\t\treturn value;\n\n\t} else {\n\t\tthrow new Error(\"Flag must be 0 or 1\");\n\t}\n}\n\n//  1 -> 0xffffff * (2 / 2)\n//  2 -> 0xffffff * (1 / 2)\n//\n//  3 -> 0xffffff * (3 / 4)\n//  4 -> 0xffffff * (1 / 4)\n//\n//  5 -> 0xffffff * (7 / 8)\n//  6 -> 0xffffff * (5 / 8)\n//  7 -> 0xffffff * (3 / 8)\n//  8 -> 0xffffff * (1 / 8)\n//\n//  9 -> 0xffffff * (15 / 16)\n// 10 -> 0xffffff * (13 / 16)\n// 11 -> 0xffffff * (11 / 16)\n// 12 -> 0xffffff *  (9 / 16)\n// 13 -> 0xffffff *  (7 / 16)\n// 14 -> 0xffffff *  (5 / 16)\n// 15 -> 0xffffff *  (3 / 16)\n// 16 -> 0xffffff *  (1 / 16)\n// @todo remove this old color distribution algo if the new one pans out\n// function distributeIdBAK(id: number): number {\n// \tif (id === 1) {\n// \t\treturn 0x000001;\n\n// \t} else {\n// \t\t// Finds the closest power of 2\n// \t\tconst base = Math.pow(2, Math.ceil(Math.log(id) / Math.log(2)));\n\n// \t\t// Translates the id into an odd fraction index\n// \t\tconst index = ((base - id) * 2) + 1;\n\n// \t\t// TODO is Math.round correct ?\n// \t\treturn Math.round(0xffffff * (index / base));\n// \t}\n// }\n\n/**\n * Function by smeans:\n * https://lowcode.life/generating-unique-contrasting-colors-in-javascript/\n * @ignore\n */\nfunction distributeId(id: number): number {\n\tconst rgb = [0, 0, 0];\n\tfor (let i = 0; i < 24; i++) {\n\t\trgb[i % 3] <<= 1;\n\t\trgb[i % 3] |= id & 0x01;\n\t\tid >>= 1;\n\t}\n\treturn (rgb[2] | 0) + (rgb[1] << 8) + (rgb[0] << 16);\n}\n\n/**\n * @ignore\n */\nfunction eachTargets(hitTarget: CanvasDisplayObject, f: (target: CanvasDisplayObject) => boolean): void {\n\tfor (; ;) {\n\t\tif (hitTarget.interactive) {\n\t\t\tif (!f(hitTarget)) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (hitTarget._parent) {\n\t\t\thitTarget = hitTarget._parent;\n\n\t\t} else {\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\n// TODO feature detection for mouse/touch/pointer\n/**\n * @ignore\n */\nfunction onPointerEvent(element: EventTarget, name: string, f: (event: Array<IPointerEvent>) => void): IDisposer {\n\treturn $utils.addEventListener(element, $utils.getRendererEvent(name), (event: MouseEvent | TouchEvent) => {\n\t\tlet touches = (<any>event).touches;\n\t\tif (touches) {\n\t\t\tif (touches.length == 0) {\n\t\t\t\ttouches = (<any>event).changedTouches;\n\t\t\t}\n\n\t\t\tf($array.copy(<TouchList>touches));\n\n\t\t} else {\n\t\t\tf([<MouseEvent>event]);\n\t\t}\n\t});\n}\n\n/**\n * @ignore\n */\nfunction isTainted(image: HTMLImageElement): boolean {\n\tconst canvas = document.createElement(\"canvas\");\n\tcanvas.width = 1;\n\tcanvas.height = 1;\n\tconst context = canvas.getContext(\"2d\")!;\n\tcontext.drawImage(image, 0, 0, 1, 1);\n\n\ttry {\n\t\tcontext.getImageData(0, 0, 1, 1);\n\t\treturn false;\n\t}\n\tcatch (err) {\n\t\tconsole.warn(\"Image \\\"\" + image.src + \"\\\" is loaded from different host and is not covered by CORS policy. For more information about the implications read here: https://www.amcharts.com/docs/v5/concepts/cors\");\n\t\treturn true;\n\t}\n}\n\n/**\n * This is needed to workaround a bug in iOS which causes it to not GC canvas elements.\n *\n * @ignore\n */\nfunction clearCanvas(view: HTMLCanvasElement) {\n\tview.width = 0;\n\tview.height = 0;\n\tview.style.width = \"0px\";\n\tview.style.height = \"0px\";\n}\n\n/**\n * @ignore\n */\nexport class CanvasPivot implements IPoint {\n\tprotected _x: number = 0;\n\tprotected _y: number = 0;\n\n\tget x(): number {\n\t\treturn this._x;\n\t}\n\n\tget y(): number {\n\t\treturn this._y;\n\t}\n\n\tset x(value: number) {\n\t\tthis._x = value;\n\t}\n\n\tset y(value: number) {\n\t\tthis._y = value;\n\t}\n}\n\n/**\n * @ignore\n */\nexport class CanvasDisplayObject extends DisposerClass implements IDisplayObject, IDisposer {\n\tpublic _layer?: CanvasLayer;\n\n\tpublic mask: CanvasGraphics | null = null;\n\tpublic visible: boolean = true;\n\tpublic exportable?: boolean = true;\n\tpublic interactive: boolean = false;\n\tpublic inactive: boolean = false;\n\tpublic wheelable: boolean = false;\n\tpublic cancelTouch: boolean = false;\n\tpublic isMeasured: boolean = false;\n\tpublic buttonMode: boolean = false;\n\tpublic alpha: number = 1;\n\tpublic compoundAlpha: number = 1;\n\tpublic angle: number = 0;\n\tpublic scale: number = 1;\n\tpublic x: number = 0;\n\tpublic y: number = 0;\n\tpublic pivot: CanvasPivot = new CanvasPivot();\n\n\tpublic filter?: string;\n\n\tpublic cursorOverStyle?: string;\n\tpublic _replacedCursorStyle?: string;\n\n\tpublic _localMatrix: Matrix = new Matrix();\n\tpublic _matrix: Matrix = new Matrix();\n\t// TODO can this be replaced with _localMatrix ?\n\tprotected _uMatrix: Matrix = new Matrix();\n\n\tpublic _renderer: CanvasRenderer;\n\tpublic _parent: CanvasContainer | undefined;\n\n\tprotected _localBounds: IBounds | undefined;\n\tprotected _bounds: IBounds | undefined;\n\tpublic _colorId: string | undefined;\n\n\tconstructor(renderer: CanvasRenderer) {\n\t\tsuper();\n\t\tthis._renderer = renderer;\n\t}\n\n\tprotected _dispose(): void {\n\t\tthis._renderer._removeObject(this);\n\t}\n\n\tpublic getCanvas(): HTMLCanvasElement {\n\t\treturn this.getLayer().view;\n\t}\n\n\tpublic getLayer(): CanvasLayer {\n\t\tlet self: CanvasDisplayObject = this;\n\n\t\tfor (; ;) {\n\t\t\tif (self._layer) {\n\t\t\t\treturn self._layer;\n\n\t\t\t} else if (self._parent) {\n\t\t\t\tself = self._parent;\n\n\t\t\t} else {\n\t\t\t\treturn this._renderer.defaultLayer;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic setLayer(order: number | undefined, visible: boolean = true): void {\n\t\tif (order == null) {\n\t\t\tthis._layer = undefined;\n\n\t\t} else {\n\t\t\tthis._layer = this._renderer.getLayer(order, visible);\n\t\t\tthis._layer.visible = visible;\n\t\t\tif (this._parent) {\n\t\t\t\tthis._parent.registerChildLayer(this._layer);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic markDirtyLayer(): void {\n\t\tthis.getLayer().dirty = true;\n\t}\n\n\tpublic clear(): void {\n\t\tthis.invalidateBounds();\n\t}\n\n\tpublic invalidateBounds(): void {\n\t\tthis._localBounds = undefined;\n\t}\n\n\tpublic _addBounds(_bounds: IBounds): void { }\n\n\tprotected _getColorId(): string {\n\t\tif (this._colorId === undefined) {\n\t\t\tthis._colorId = this._renderer.paintId(this);\n\t\t}\n\n\t\treturn this._colorId;\n\t}\n\n\tprotected _isInteractive(): boolean {\n\t\treturn this.inactive == false && (this.interactive || this._renderer._forceInteractive > 0);\n\t}\n\n\tprotected _isInteractiveMask(): boolean {\n\t\treturn this._isInteractive();\n\t}\n\n\tpublic contains(child: CanvasDisplayObject): boolean {\n\t\tfor (; ;) {\n\t\t\tif (child === this) {\n\t\t\t\treturn true;\n\n\t\t\t} else if (child._parent) {\n\t\t\t\tchild = child._parent;\n\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\ttoGlobal(point: IPoint): IPoint {\n\t\treturn this._matrix.apply(point);\n\t}\n\n\ttoLocal(point: IPoint): IPoint {\n\t\treturn this._matrix.applyInverse(point);\n\t}\n\n\tpublic getLocalMatrix(): Matrix {\n\t\tthis._uMatrix.setTransform(0, 0, this.pivot.x, this.pivot.y, this.angle * Math.PI / 180, this.scale);\n\t\treturn this._uMatrix;\n\t}\n\n\tgetLocalBounds(): IBounds {\n\t\tif (!this._localBounds) {\n\n\t\t\tconst bn = 10000000;\n\t\t\tthis._localBounds = {\n\t\t\t\tleft: bn,\n\t\t\t\ttop: bn,\n\t\t\t\tright: -bn,\n\t\t\t\tbottom: -bn\n\t\t\t};\n\n\t\t\tthis._addBounds(this._localBounds);\n\t\t}\n\t\treturn this._localBounds;\n\t}\n\n\tgetAdjustedBounds(bounds: IBounds): IBounds {\n\t\tthis._setMatrix();\n\n\t\tconst matrix = this.getLocalMatrix();\n\n\t\tconst p0 = matrix.apply({ x: bounds.left, y: bounds.top });\n\t\tconst p1 = matrix.apply({ x: bounds.right, y: bounds.top });\n\t\tconst p2 = matrix.apply({ x: bounds.right, y: bounds.bottom });\n\t\tconst p3 = matrix.apply({ x: bounds.left, y: bounds.bottom });\n\n\t\treturn {\n\t\t\tleft: Math.min(p0.x, p1.x, p2.x, p3.x),\n\t\t\ttop: Math.min(p0.y, p1.y, p2.y, p3.y),\n\t\t\tright: Math.max(p0.x, p1.x, p2.x, p3.x),\n\t\t\tbottom: Math.max(p0.y, p1.y, p2.y, p3.y)\n\t\t}\n\t}\n\n\ton<C, Key extends keyof IRendererEvents>(key: Key, callback: (this: C, event: IRendererEvents[Key]) => void, context?: C): IDisposer {\n\t\tif (this.interactive) {\n\t\t\treturn this._renderer._addEvent(this, key, callback, context);\n\n\t\t} else {\n\t\t\treturn new Disposer(() => { });\n\t\t}\n\t}\n\n\tpublic _setMatrix(): void {\n\t\t// TODO only calculate this if it has actually changed\n\t\tthis._localMatrix.setTransform(\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.pivot.x,\n\t\t\tthis.pivot.y,\n\t\t\t// Converts degrees to radians\n\t\t\tthis.angle * Math.PI / 180,\n\t\t\tthis.scale\n\t\t);\n\n\t\tthis._matrix.copyFrom(this._localMatrix);\n\n\t\tif (this._parent) {\n\t\t\t// TODO only calculate this if it has actually changed\n\t\t\tthis._matrix.prepend(this._parent._matrix);\n\t\t}\n\t}\n\n\tpublic _transform(context: CanvasRenderingContext2D, resolution: number): void {\n\t\tconst m = this._matrix;\n\t\tcontext.setTransform(\n\t\t\tm.a * resolution,\n\t\t\tm.b * resolution,\n\t\t\tm.c * resolution,\n\t\t\tm.d * resolution,\n\t\t\tm.tx * resolution,\n\t\t\tm.ty * resolution\n\t\t);\n\t}\n\n\tpublic render(parentLayer: CanvasLayer): void {\n\t\tif (this.visible && (this.exportable !== false || !this._renderer._omitTainted)) {\n\t\t\tthis._setMatrix();\n\n\t\t\tconst resolution = this._renderer.resolution;\n\n\t\t\tconst layers = this._renderer.layers;\n\t\t\tconst ghostContext = this._renderer._ghostContext;\n\n\t\t\tconst mask = this.mask;\n\t\t\tif (mask) {\n\t\t\t\tmask._setMatrix();\n\t\t\t}\n\n\t\t\t// TODO improve this\n\t\t\t$array.each(layers, (layer) => {\n\t\t\t\tif (layer) {\n\t\t\t\t\tconst context = layer.context;\n\t\t\t\t\tcontext.save();\n\n\t\t\t\t\t// We must apply the mask before we transform the element\n\t\t\t\t\tif (mask) {\n\t\t\t\t\t\tmask._transform(context, layer.scale || resolution);\n\t\t\t\t\t\tmask._runPath(context);\n\t\t\t\t\t\tcontext.clip();\n\t\t\t\t\t}\n\n\t\t\t\t\tcontext.globalAlpha = this.compoundAlpha * this.alpha;\n\n\t\t\t\t\tthis._transform(context, layer.scale || resolution);\n\n\t\t\t\t\tif (this.filter) {\n\t\t\t\t\t\tcontext.filter = this.filter;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tghostContext.save();\n\n\t\t\t// We must apply the mask before we transform the element\n\t\t\tif (mask && this._isInteractiveMask()) {\n\t\t\t\tmask._transform(ghostContext, resolution);\n\t\t\t\tmask._runPath(ghostContext);\n\t\t\t\tghostContext.clip();\n\t\t\t}\n\n\t\t\tthis._transform(ghostContext, resolution);\n\n\t\t\tthis._render(parentLayer);\n\n\t\t\tghostContext.restore();\n\n\t\t\t$array.each(layers, (layer) => {\n\t\t\t\tif (layer) {\n\t\t\t\t\tlayer.context.restore();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tprotected _render(parentLayer: CanvasLayer): void {\n\t\tif (this.exportable === false) {\n\t\t\tconst layer = this._layer || parentLayer;\n\t\t\tlayer.tainted = true;\n\t\t}\n\t}\n\n\thovering(): boolean {\n\t\treturn this._renderer._hovering.has(this);\n\t}\n\n\tdragging(): boolean {\n\t\treturn this._renderer._dragging.some((x) => x.value === this);\n\t}\n\n\tpublic dispose() {\n\t\tthis.getLayer().dirty = true;\n\t}\n\n\tpublic shouldCancelTouch(): boolean {\n\t\tconst renderer = this._renderer;\n\t\tif (renderer.tapToActivate && !renderer._touchActive) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this.cancelTouch) {\n\t\t\treturn true;\n\t\t}\n\t\telse if (this._parent) {\n\t\t\treturn this._parent.shouldCancelTouch();\n\t\t}\n\t\treturn false;\n\t}\n\n}\n\n/**\n * @ignore\n */\nexport class CanvasContainer extends CanvasDisplayObject implements IContainer {\n\tpublic interactiveChildren: boolean = true;\n\tprivate _childLayers?: CanvasLayer[];\n\n\tprotected _children: Array<CanvasDisplayObject> = [];\n\n\tprotected _isInteractiveMask(): boolean {\n\t\treturn this.interactiveChildren || super._isInteractiveMask();\n\t}\n\n\taddChild(child: CanvasDisplayObject): void {\n\t\tchild._parent = this;\n\t\tthis._children.push(child);\n\t\tif (child._layer) {\n\t\t\tthis.registerChildLayer(child._layer);\n\t\t}\n\t}\n\n\taddChildAt(child: CanvasDisplayObject, index: number): void {\n\t\tchild._parent = this;\n\t\tthis._children.splice(index, 0, child);\n\t\tif (child._layer) {\n\t\t\tthis.registerChildLayer(child._layer);\n\t\t}\n\t}\n\n\tremoveChild(child: CanvasDisplayObject): void {\n\t\tchild._parent = undefined;\n\t\t$array.removeFirst(this._children, child);\n\t}\n\n\tprotected _render(parentLayer: CanvasLayer): void {\n\t\tsuper._render(parentLayer);\n\n\t\tconst renderer = this._renderer;\n\n\t\tif (this.interactive && this.interactiveChildren) {\n\t\t\t++renderer._forceInteractive;\n\t\t}\n\n\t\tconst layer = this._layer || parentLayer;\n\n\t\t$array.each(this._children, (child) => {\n\t\t\tchild.compoundAlpha = this.compoundAlpha * this.alpha;\n\t\t\tchild.render(layer);\n\t\t});\n\n\t\tif (this.interactive && this.interactiveChildren) {\n\t\t\t--renderer._forceInteractive;\n\t\t}\n\t}\n\n\tregisterChildLayer(layer: CanvasLayer): void {\n\t\tif (!this._childLayers) {\n\t\t\tthis._childLayers = [];\n\t\t}\n\t\t$array.pushOne(this._childLayers, layer);\n\t\tif (this._parent) {\n\t\t\tthis._parent.registerChildLayer(layer);\n\t\t}\n\t}\n\n\tpublic markDirtyLayer(deep: boolean = false): void {\n\t\tsuper.markDirtyLayer();\n\t\tif (deep && this._childLayers) {\n\t\t\t$array.each(this._childLayers, (layer) => layer.dirty = true);\n\t\t}\n\t}\n\n\tpublic dispose() {\n\t\tsuper.dispose();\n\t\tif (this._childLayers) {\n\t\t\t$array.each(this._childLayers, (layer) => {\n\t\t\t\tlayer.dirty = true;\n\t\t\t});\n\t\t}\n\t}\n}\n\n/**\n * @ignore\n */\nfunction setPoint(bounds: IBounds, point: IPoint): void {\n\tbounds.left = Math.min(bounds.left, point.x);\n\tbounds.top = Math.min(bounds.top, point.y);\n\tbounds.right = Math.max(bounds.right, point.x);\n\tbounds.bottom = Math.max(bounds.bottom, point.y);\n}\n\n/**\n * @ignore\n */\nabstract class Op {\n\tpublic colorize(_context: CanvasRenderingContext2D, _forceColor: string | undefined): void { }\n\n\tpublic path(_context: CanvasRenderingContext2D): void { }\n\n\tpublic addBounds(_bounds: IBounds): void { }\n}\n\n/**\n * @ignore\n */\nclass BeginFill extends Op {\n\tconstructor(public color: string | CanvasGradient | CanvasPattern) { super(); }\n\n\tpublic colorize(context: CanvasRenderingContext2D, forceColor: string | undefined): void {\n\t\tif (forceColor !== undefined) {\n\t\t\tcontext.fillStyle = forceColor;\n\n\t\t} else {\n\t\t\tcontext.fillStyle = this.color;\n\t\t}\n\t}\n}\n\n/**\n * @ignore\n */\nclass EndFill extends Op {\n\tconstructor(public clearShadow: boolean) { super(); }\n\tpublic colorize(context: CanvasRenderingContext2D, _forceColor: string | undefined): void {\n\t\tcontext.fill();\n\t\tif (this.clearShadow) {\n\t\t\tcontext.shadowColor = \"\";\n\t\t\tcontext.shadowBlur = 0;\n\t\t\tcontext.shadowOffsetX = 0;\n\t\t\tcontext.shadowOffsetY = 0;\n\t\t}\n\t}\n}\n\n/**\n * @ignore\n */\nclass EndStroke extends Op {\n\tpublic colorize(context: CanvasRenderingContext2D, _forceColor: string | undefined): void {\n\t\tcontext.stroke();\n\t}\n}\n\n/**\n * @ignore\n */\nclass LineStyle extends Op {\n\tconstructor(public width: number, public color: string | CanvasGradient | CanvasPattern, public lineJoin?: \"miter\" | \"round\" | \"bevel\") { super(); }\n\n\tpublic colorize(context: CanvasRenderingContext2D, forceColor: string | undefined): void {\n\t\tif (forceColor !== undefined) {\n\t\t\tcontext.strokeStyle = forceColor;\n\n\t\t} else {\n\t\t\tcontext.strokeStyle = this.color;\n\t\t}\n\n\t\tcontext.lineWidth = this.width;\n\t\tif(this.lineJoin){\n\t\t\tcontext.lineJoin = this.lineJoin;\n\t\t}\n\t}\n}\n\n/**\n * @ignore\n */\nclass LineDash extends Op {\n\tconstructor(public dash: number[]) { super(); }\n\n\tpublic colorize(context: CanvasRenderingContext2D, _forceColor: string | undefined): void {\n\t\tcontext.setLineDash(this.dash);\n\t}\n}\n\n/**\n * @ignore\n */\nclass LineDashOffset extends Op {\n\tconstructor(public dashOffset: number) { super(); }\n\n\tpublic colorize(context: CanvasRenderingContext2D, _forceColor: string | undefined): void {\n\t\tcontext.lineDashOffset = this.dashOffset;\n\t}\n}\n\n/**\n * @ignore\n */\nclass DrawRect extends Op {\n\tconstructor(public x: number, public y: number, public width: number, public height: number) { super(); }\n\n\tpublic path(context: CanvasRenderingContext2D): void {\n\t\tcontext.rect(this.x, this.y, this.width, this.height);\n\t}\n\n\tpublic addBounds(bounds: IBounds): void {\n\t\tconst l = this.x;\n\t\tconst t = this.y;\n\t\tconst r = l + this.width;\n\t\tconst b = t + this.height;\n\n\t\tsetPoint(bounds, { x: l, y: t });\n\t\tsetPoint(bounds, { x: r, y: t });\n\t\tsetPoint(bounds, { x: l, y: b });\n\t\tsetPoint(bounds, { x: r, y: b });\n\t}\n}\n\n/**\n * @ignore\n */\nclass DrawCircle extends Op {\n\tconstructor(public x: number, public y: number, public radius: number) { super(); }\n\n\tpublic path(context: CanvasRenderingContext2D): void {\n\t\tcontext.moveTo(this.x + this.radius, this.y);\n\t\tcontext.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);\n\t}\n\n\t// TODO handle skewing and rotation\n\tpublic addBounds(bounds: IBounds): void {\n\t\tsetPoint(bounds, { x: this.x - this.radius, y: this.y - this.radius });\n\t\tsetPoint(bounds, { x: this.x + this.radius, y: this.y + this.radius });\n\t}\n}\n\n/**\n * @ignore\n */\nclass DrawEllipse extends Op {\n\tconstructor(public x: number, public y: number, public radiusX: number, public radiusY: number) { super(); }\n\n\tpublic path(context: CanvasRenderingContext2D): void {\n\t\tcontext.ellipse(0, 0, this.radiusX, this.radiusY, 0, 0, Math.PI * 2);\n\t}\n\n\t// TODO handle skewing and rotation\n\tpublic addBounds(bounds: IBounds): void {\n\t\tsetPoint(bounds, { x: this.x - this.radiusX, y: this.y - this.radiusY });\n\t\tsetPoint(bounds, { x: this.x + this.radiusX, y: this.y + this.radiusY });\n\t}\n}\n\n/**\n * @ignore\n */\nclass Arc extends Op {\n\tconstructor(\n\t\tpublic cx: number,\n\t\tpublic cy: number,\n\t\tpublic radius: number,\n\t\tpublic startAngle: number,\n\t\tpublic endAngle: number,\n\t\tpublic anticlockwise: boolean,\n\t) { super(); }\n\n\tpublic path(context: CanvasRenderingContext2D): void {\n\t\tif (this.radius > 0) {\n\t\t\tcontext.arc(this.cx, this.cy, this.radius, this.startAngle, this.endAngle, this.anticlockwise);\n\t\t}\n\t}\n\n\tpublic addBounds(bounds: IBounds): void {\n\t\tlet arcBounds = $math.getArcBounds(this.cx, this.cy, this.startAngle * $math.DEGREES, this.endAngle * $math.DEGREES, this.radius);\n\t\tsetPoint(bounds, { x: arcBounds.left, y: arcBounds.top });\n\t\tsetPoint(bounds, { x: arcBounds.right, y: arcBounds.bottom });\n\t}\n}\n\n/**\n * @ignore\n */\nclass ArcTo extends Op {\n\tconstructor(\n\t\tpublic x1: number,\n\t\tpublic y1: number,\n\t\tpublic x2: number,\n\t\tpublic y2: number,\n\t\tpublic radius: number,\n\t) { super(); }\n\n\tpublic path(context: CanvasRenderingContext2D): void {\n\t\tif (this.radius > 0) {\n\t\t\tcontext.arcTo(this.x1, this.y1, this.x2, this.y2, this.radius);\n\t\t}\n\t}\n\n\t// TODO: add points\n\tpublic addBounds(_bounds: IBounds): void {\n\t\t/*\n\t\t// not finished\n\t\thttps://math.stackexchange.com/questions/1781438/finding-the-center-of-a-circle-given-two-points-and-a-radius-algebraically\n\n\t\tif (prevPoint) {\n\t\t\tlet x1 = prevPoint.x;\n\t\t\tlet y1 = prevPoint.y;\n\t\t\tlet x2 = this.x2;\n\t\t\tlet y2 = this.y2;\n\t\t\tlet r = this.radius;\n\n\t\t\tlet xa = (x2 - x1) / 2;\n\t\t\tlet ya = (y2 - y1) / 2;\n\n\t\t\tlet x0 = x1 + xa;\n\t\t\tlet y0 = y1 + ya;\n\n\t\t\tlet a = Math.hypot(xa, ya);\n\t\t\tlet b = Math.sqrt(r * r - a * a);\n\n\t\t\tlet cx = x0 + b * ya / a;\n\t\t\tlet cy = y0 - b * xa / a;\n\n\t\t\tconsole.log(cx, cy);\n\t\t}*/\n\t}\n}\n\n/**\n * @ignore\n */\nclass LineTo extends Op {\n\tconstructor(public x: number, public y: number) { super(); }\n\n\tpublic path(context: CanvasRenderingContext2D): void {\n\t\tcontext.lineTo(this.x, this.y);\n\t}\n\n\tpublic addBounds(bounds: IBounds): void {\n\t\tsetPoint(bounds, { x: this.x, y: this.y });\n\t}\n}\n\n/**\n * @ignore\n */\nclass MoveTo extends Op {\n\tconstructor(public x: number, public y: number) { super(); }\n\n\tpublic path(context: CanvasRenderingContext2D): void {\n\t\tcontext.moveTo(this.x, this.y);\n\t}\n\n\tpublic addBounds(bounds: IBounds): void {\n\t\tsetPoint(bounds, { x: this.x, y: this.y });\n\t}\n}\n\n/**\n * @ignore\n */\nclass ClosePath extends Op {\n\tpublic path(context: CanvasRenderingContext2D): void {\n\t\tcontext.closePath();\n\t}\n}\n\n/**\n * @ignore\n */\nclass BezierCurveTo extends Op {\n\tconstructor(\n\t\tpublic cpX: number,\n\t\tpublic cpY: number,\n\t\tpublic cpX2: number,\n\t\tpublic cpY2: number,\n\t\tpublic toX: number,\n\t\tpublic toY: number,\n\t) { super(); }\n\n\tpublic path(context: CanvasRenderingContext2D): void {\n\t\tcontext.bezierCurveTo(this.cpX, this.cpY, this.cpX2, this.cpY2, this.toX, this.toY);\n\t}\n\n\t// TODO: OK?\n\tpublic addBounds(bounds: IBounds): void {\n\t\tsetPoint(bounds, { x: this.cpX, y: this.cpY });\n\t\tsetPoint(bounds, { x: this.cpX2, y: this.cpY2 });\n\t\tsetPoint(bounds, { x: this.toX, y: this.toY });\n\t}\n}\n\n/**\n * @ignore\n */\nclass QuadraticCurveTo extends Op {\n\tconstructor(\n\t\tpublic cpX: number,\n\t\tpublic cpY: number,\n\t\tpublic toX: number,\n\t\tpublic toY: number,\n\t) { super(); }\n\n\tpublic path(context: CanvasRenderingContext2D): void {\n\t\tcontext.quadraticCurveTo(this.cpX, this.cpY, this.toX, this.toY);\n\t}\n\n\t// TODO: OK?\n\tpublic addBounds(bounds: IBounds): void {\n\t\tsetPoint(bounds, { x: this.cpX, y: this.cpY });\n\t\tsetPoint(bounds, { x: this.toX, y: this.toY });\n\t}\n}\n\n/**\n * @ignore\n */\nclass Shadow extends Op {\n\tconstructor(\n\t\tpublic color: string,\n\t\tpublic blur: number,\n\t\tpublic offsetX: number,\n\t\tpublic offsetY: number,\n\t\tpublic opacity?: number\n\t) { super(); }\n\n\tpublic colorize(context: CanvasRenderingContext2D, _forceColor: string | undefined): void {\n\t\tif (this.opacity) {\n\t\t\tcontext.fillStyle = this.color;\n\t\t}\n\t\tcontext.shadowColor = this.color;\n\t\tcontext.shadowBlur = this.blur;\n\t\tcontext.shadowOffsetX = this.offsetX;\n\t\tcontext.shadowOffsetY = this.offsetY;\n\t}\n}\n\n/**\n * @ignore\n */\nclass GraphicsImage extends Op {\n\tconstructor(\n\t\tpublic image: HTMLImageElement,\n\t\tpublic width: number,\n\t\tpublic height: number,\n\t\tpublic x: number,\n\t\tpublic y: number\n\t) { super(); }\n\n\tpublic path(context: CanvasRenderingContext2D): void {\n\t\tcontext.drawImage(this.image, this.x, this.y, this.width, this.height);\n\t}\n\n\t// TODO: OK?\n\tpublic addBounds(bounds: IBounds): void {\n\t\tsetPoint(bounds, { x: this.x, y: this.y });\n\t\tsetPoint(bounds, { x: this.width, y: this.height });\n\t}\n}\n\n/**\n * @ignore\n */\nexport class CanvasGraphics extends CanvasDisplayObject implements IGraphics {\n\tprotected _operations: Array<Op> = [];\n\n\tpublic blendMode: BlendMode = BlendMode.NORMAL;\n\n\tprotected _hasShadows: boolean = false;\n\tprotected _fillAlpha?: number;\n\tprotected _strokeAlpha?: number;\n\n\tclear(): void {\n\t\tsuper.clear();\n\t\tthis._operations.length = 0;\n\t}\n\n\tprotected _pushOp(op: Op): void {\n\t\tthis._operations.push(op);\n\t}\n\n\tbeginFill(color?: Color | CanvasGradient | CanvasPattern, alpha: number = 1): void {\n\t\tthis._fillAlpha = alpha;\n\t\tif (color) {\n\t\t\tif (color instanceof Color) {\n\t\t\t\tthis._pushOp(new BeginFill(color.toCSS(alpha)));\n\n\t\t\t} else {\n\t\t\t\tthis.isMeasured = true;\n\t\t\t\tthis._pushOp(new BeginFill(color));\n\t\t\t}\n\t\t} else {\n\t\t\tthis._pushOp(new BeginFill(\"rgba(0, 0, 0, \" + alpha + \")\"));\n\t\t}\n\t}\n\n\tendFill(): void {\n\t\tthis._pushOp(new EndFill(this._hasShadows));\n\t}\n\n\tendStroke(): void {\n\t\tthis._pushOp(new EndStroke());\n\t}\n\n\tlineStyle(width: number = 0, color?: Color | CanvasGradient | CanvasPattern, alpha: number = 1, lineJoin?: \"miter\" | \"round\" | \"bevel\"): void {\n\t\tthis._strokeAlpha = alpha;\n\t\tif (color) {\n\t\t\tif (color instanceof Color) {\n\t\t\t\tthis._pushOp(new LineStyle(width, color.toCSS(alpha), lineJoin));\n\t\t\t} else {\n\t\t\t\tthis._pushOp(new LineStyle(width, color, lineJoin));\n\t\t\t}\n\t\t} else {\n\t\t\tthis._pushOp(new LineStyle(width, \"rgba(0, 0, 0, \" + alpha + \")\", lineJoin));\n\t\t}\n\t}\n\n\tsetLineDash(dash?: number[]): void {\n\t\tthis._pushOp(new LineDash(dash ? dash : []));\n\t}\n\n\tsetLineDashOffset(dashOffset: number = 0): void {\n\t\tthis._pushOp(new LineDashOffset(dashOffset));\n\t}\n\n\tdrawRect(x: number, y: number, width: number, height: number): void {\n\t\tthis._pushOp(new DrawRect(x, y, width, height));\n\t}\n\n\tdrawCircle(x: number, y: number, radius: number): void {\n\t\tthis._pushOp(new DrawCircle(x, y, radius));\n\t}\n\n\tdrawEllipse(x: number, y: number, radiusX: number, radiusY: number): void {\n\t\tthis._pushOp(new DrawEllipse(x, y, radiusX, radiusY));\n\t}\n\n\tarc(cx: number, cy: number, radius: number, startAngle: number, endAngle: number, anticlockwise: boolean = false): void {\n\t\tthis._pushOp(new Arc(cx, cy, radius, startAngle, endAngle, anticlockwise));\n\t}\n\n\tarcTo(x1: number, y1: number, x2: number, y2: number, radius: number): void {\n\t\tthis._pushOp(new ArcTo(x1, y1, x2, y2, radius));\n\t}\n\n\tlineTo(x: number, y: number): void {\n\t\tthis._pushOp(new LineTo(x, y));\n\t}\n\n\tmoveTo(x: number, y: number): void {\n\t\tthis._pushOp(new MoveTo(x, y));\n\t}\n\n\tbezierCurveTo(cpX: number, cpY: number, cpX2: number, cpY2: number, toX: number, toY: number): void {\n\t\tthis._pushOp(new BezierCurveTo(cpX, cpY, cpX2, cpY2, toX, toY));\n\t}\n\n\tquadraticCurveTo(cpX: number, cpY: number, toX: number, toY: number): void {\n\t\tthis._pushOp(new QuadraticCurveTo(cpX, cpY, toX, toY));\n\t}\n\n\tclosePath(): void {\n\t\tthis._pushOp(new ClosePath());\n\t}\n\n\tshadow(color: Color, blur: number = 0, offsetX: number = 0, offsetY: number = 0, opacity?: number): void {\n\t\tthis._hasShadows = true;\n\t\tthis._pushOp(new Shadow(opacity ? color.toCSS(opacity) : color.toCSS(this._fillAlpha || this._strokeAlpha), blur, offsetX, offsetY));\n\t}\n\n\timage(image: HTMLImageElement, width: number, height: number, x: number, y: number): void {\n\t\tthis._pushOp(new GraphicsImage(image, width, height, x, y));\n\t}\n\n\t// https://svgwg.org/svg2-draft/paths.html#DProperty\n\t// TODO better error checking\n\tsvgPath(path: string): void {\n\t\tlet x = 0;\n\t\tlet y = 0;\n\t\tlet cpx: number | null = null;\n\t\tlet cpy: number | null = null;\n\t\tlet qcpx: number | null = null;\n\t\tlet qcpy: number | null = null;\n\n\t\tconst SEGMENTS_REGEXP = /([MmZzLlHhVvCcSsQqTtAa])([^MmZzLlHhVvCcSsQqTtAa]*)/g;\n\t\tconst ARGS_REGEXP = /[\\u0009\\u0020\\u000A\\u000C\\u000D]*([\\+\\-]?[0-9]*\\.?[0-9]+(?:[eE][\\+\\-]?[0-9]+)?)[\\u0009\\u0020\\u000A\\u000C\\u000D]*,?/g;\n\n\t\tlet match;\n\n\t\twhile ((match = SEGMENTS_REGEXP.exec(path)) !== null) {\n\t\t\tconst name = match[1];\n\t\t\tconst rest = match[2];\n\n\t\t\tconst args = [];\n\n\t\t\twhile ((match = ARGS_REGEXP.exec(rest)) !== null) {\n\t\t\t\targs.push(+match[1]);\n\t\t\t}\n\n\t\t\t// Reset control point\n\t\t\tif (name !== \"S\" && name !== \"s\" && name !== \"C\" && name !== \"c\") {\n\t\t\t\tcpx = null;\n\t\t\t\tcpy = null;\n\t\t\t}\n\n\t\t\t// Reset control point\n\t\t\tif (name !== \"Q\" && name !== \"q\" && name !== \"T\" && name !== \"t\") {\n\t\t\t\tqcpx = null;\n\t\t\t\tqcpy = null;\n\t\t\t}\n\n\t\t\tswitch (name) {\n\t\t\t\tcase \"M\":\n\t\t\t\t\tcheckEvenArgs(name, args.length, 2);\n\t\t\t\t\tx = args[0];\n\t\t\t\t\ty = args[1];\n\t\t\t\t\tthis.moveTo(x, y);\n\n\t\t\t\t\tfor (let i = 2; i < args.length; i += 2) {\n\t\t\t\t\t\tx = args[i];\n\t\t\t\t\t\ty = args[i + 1];\n\t\t\t\t\t\tthis.lineTo(x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"m\":\n\t\t\t\t\tcheckEvenArgs(name, args.length, 2);\n\t\t\t\t\tx += args[0];\n\t\t\t\t\ty += args[1];\n\t\t\t\t\tthis.moveTo(x, y);\n\n\t\t\t\t\tfor (let i = 2; i < args.length; i += 2) {\n\t\t\t\t\t\tx += args[i];\n\t\t\t\t\t\ty += args[i + 1];\n\t\t\t\t\t\tthis.lineTo(x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"L\":\n\t\t\t\t\tcheckEvenArgs(name, args.length, 2);\n\t\t\t\t\tfor (let i = 0; i < args.length; i += 2) {\n\t\t\t\t\t\tx = args[i];\n\t\t\t\t\t\ty = args[i + 1];\n\t\t\t\t\t\tthis.lineTo(x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"l\":\n\t\t\t\t\tcheckEvenArgs(name, args.length, 2);\n\t\t\t\t\tfor (let i = 0; i < args.length; i += 2) {\n\t\t\t\t\t\tx += args[i];\n\t\t\t\t\t\ty += args[i + 1];\n\t\t\t\t\t\tthis.lineTo(x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"H\":\n\t\t\t\t\tcheckMinArgs(name, args.length, 1);\n\t\t\t\t\tfor (let i = 0; i < args.length; ++i) {\n\t\t\t\t\t\tx = args[i];\n\t\t\t\t\t\tthis.lineTo(x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"h\":\n\t\t\t\t\tcheckMinArgs(name, args.length, 1);\n\t\t\t\t\tfor (let i = 0; i < args.length; ++i) {\n\t\t\t\t\t\tx += args[i];\n\t\t\t\t\t\tthis.lineTo(x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"V\":\n\t\t\t\t\tcheckMinArgs(name, args.length, 1);\n\t\t\t\t\tfor (let i = 0; i < args.length; ++i) {\n\t\t\t\t\t\ty = args[i];\n\t\t\t\t\t\tthis.lineTo(x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"v\":\n\t\t\t\t\tcheckMinArgs(name, args.length, 1);\n\t\t\t\t\tfor (let i = 0; i < args.length; ++i) {\n\t\t\t\t\t\ty += args[i];\n\t\t\t\t\t\tthis.lineTo(x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"C\":\n\t\t\t\t\tcheckEvenArgs(name, args.length, 6);\n\t\t\t\t\tfor (let i = 0; i < args.length; i += 6) {\n\t\t\t\t\t\tconst x1 = args[i];\n\t\t\t\t\t\tconst y1 = args[i + 1];\n\t\t\t\t\t\tcpx = args[i + 2];\n\t\t\t\t\t\tcpy = args[i + 3];\n\t\t\t\t\t\tx = args[i + 4];\n\t\t\t\t\t\ty = args[i + 5];\n\t\t\t\t\t\tthis.bezierCurveTo(x1, y1, cpx, cpy, x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"c\":\n\t\t\t\t\tcheckEvenArgs(name, args.length, 6);\n\t\t\t\t\tfor (let i = 0; i < args.length; i += 6) {\n\t\t\t\t\t\tconst x1 = args[i] + x;\n\t\t\t\t\t\tconst y1 = args[i + 1] + y;\n\t\t\t\t\t\tcpx = args[i + 2] + x;\n\t\t\t\t\t\tcpy = args[i + 3] + y;\n\t\t\t\t\t\tx += args[i + 4];\n\t\t\t\t\t\ty += args[i + 5];\n\t\t\t\t\t\tthis.bezierCurveTo(x1, y1, cpx, cpy, x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"S\":\n\t\t\t\t\tcheckEvenArgs(name, args.length, 4);\n\t\t\t\t\tif (cpx === null || cpy === null) {\n\t\t\t\t\t\tcpx = x;\n\t\t\t\t\t\tcpy = y;\n\t\t\t\t\t}\n\t\t\t\t\tfor (let i = 0; i < args.length; i += 4) {\n\t\t\t\t\t\tconst x1 = 2 * x - cpx;\n\t\t\t\t\t\tconst y1 = 2 * y - cpy;\n\t\t\t\t\t\tcpx = args[i];\n\t\t\t\t\t\tcpy = args[i + 1];\n\t\t\t\t\t\tx = args[i + 2];\n\t\t\t\t\t\ty = args[i + 3];\n\t\t\t\t\t\tthis.bezierCurveTo(x1, y1, cpx, cpy, x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"s\":\n\t\t\t\t\tcheckEvenArgs(name, args.length, 4);\n\t\t\t\t\tif (cpx === null || cpy === null) {\n\t\t\t\t\t\tcpx = x;\n\t\t\t\t\t\tcpy = y;\n\t\t\t\t\t}\n\t\t\t\t\tfor (let i = 0; i < args.length; i += 4) {\n\t\t\t\t\t\tconst x1 = 2 * x - cpx;\n\t\t\t\t\t\tconst y1 = 2 * y - cpy;\n\t\t\t\t\t\tcpx = args[i] + x;\n\t\t\t\t\t\tcpy = args[i + 1] + y;\n\t\t\t\t\t\tx += args[i + 2];\n\t\t\t\t\t\ty += args[i + 3];\n\t\t\t\t\t\tthis.bezierCurveTo(x1, y1, cpx, cpy, x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Q\":\n\t\t\t\t\tcheckEvenArgs(name, args.length, 4);\n\t\t\t\t\tfor (let i = 0; i < args.length; i += 4) {\n\t\t\t\t\t\tqcpx = args[i];\n\t\t\t\t\t\tqcpy = args[i + 1];\n\t\t\t\t\t\tx = args[i + 2];\n\t\t\t\t\t\ty = args[i + 3];\n\t\t\t\t\t\tthis.quadraticCurveTo(qcpx, qcpy, x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"q\":\n\t\t\t\t\tcheckEvenArgs(name, args.length, 4);\n\t\t\t\t\tfor (let i = 0; i < args.length; i += 4) {\n\t\t\t\t\t\tqcpx = args[i] + x;\n\t\t\t\t\t\tqcpy = args[i + 1] + y;\n\t\t\t\t\t\tx += args[i + 2];\n\t\t\t\t\t\ty += args[i + 3];\n\t\t\t\t\t\tthis.quadraticCurveTo(qcpx, qcpy, x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"T\":\n\t\t\t\t\tcheckEvenArgs(name, args.length, 2);\n\t\t\t\t\tif (qcpx === null || qcpy === null) {\n\t\t\t\t\t\tqcpx = x;\n\t\t\t\t\t\tqcpy = y;\n\t\t\t\t\t}\n\t\t\t\t\tfor (let i = 0; i < args.length; i += 2) {\n\t\t\t\t\t\tqcpx = 2 * x - qcpx;\n\t\t\t\t\t\tqcpy = 2 * y - qcpy;\n\t\t\t\t\t\tx = args[i];\n\t\t\t\t\t\ty = args[i + 1];\n\t\t\t\t\t\tthis.quadraticCurveTo(qcpx, qcpy, x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"t\":\n\t\t\t\t\tcheckEvenArgs(name, args.length, 2);\n\t\t\t\t\tif (qcpx === null || qcpy === null) {\n\t\t\t\t\t\tqcpx = x;\n\t\t\t\t\t\tqcpy = y;\n\t\t\t\t\t}\n\t\t\t\t\tfor (let i = 0; i < args.length; i += 2) {\n\t\t\t\t\t\tqcpx = 2 * x - qcpx;\n\t\t\t\t\t\tqcpy = 2 * y - qcpy;\n\t\t\t\t\t\tx += args[i];\n\t\t\t\t\t\ty += args[i + 1];\n\t\t\t\t\t\tthis.quadraticCurveTo(qcpx, qcpy, x, y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"A\":\n\t\t\t\tcase \"a\":\n\t\t\t\t\tconst relative = (name === \"a\");\n\n\t\t\t\t\tcheckEvenArgs(name, args.length, 7);\n\n\t\t\t\t\tfor (let i = 0; i < args.length; i += 7) {\n\t\t\t\t\t\tlet cx = args[i + 5];\n\t\t\t\t\t\tlet cy = args[i + 6];\n\n\t\t\t\t\t\tif (relative) {\n\t\t\t\t\t\t\tcx += x;\n\t\t\t\t\t\t\tcy += y;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst bs = arcToBezier({\n\t\t\t\t\t\t\tpx: x,\n\t\t\t\t\t\t\tpy: y,\n\t\t\t\t\t\t\trx: args[i],\n\t\t\t\t\t\t\try: args[i + 1],\n\t\t\t\t\t\t\txAxisRotation: args[i + 2],\n\t\t\t\t\t\t\tlargeArcFlag: assertBinary(args[i + 3]),\n\t\t\t\t\t\t\tsweepFlag: assertBinary(args[i + 4]),\n\t\t\t\t\t\t\tcx,\n\t\t\t\t\t\t\tcy,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t$array.each(bs, (b) => {\n\t\t\t\t\t\t\tthis.bezierCurveTo(b.x1, b.y1, b.x2, b.y2, b.x, b.y);\n\t\t\t\t\t\t\tx = b.x;\n\t\t\t\t\t\t\ty = b.y;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Z\":\n\t\t\t\tcase \"z\":\n\t\t\t\t\tcheckArgs(name, args.length, 0);\n\t\t\t\t\tthis.closePath();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\n\tpublic _runPath(context: CanvasRenderingContext2D): void {\n\t\tcontext.beginPath();\n\n\t\t$array.each(this._operations, (op) => {\n\t\t\top.path(context);\n\t\t});\n\t}\n\n\tprotected _render(parentLayer: CanvasLayer): void {\n\t\tsuper._render(parentLayer);\n\n\t\tconst layer = this._layer || parentLayer;\n\n\t\tconst layerDirty = layer.dirty;\n\t\tconst interactive = this._isInteractive();\n\n\t\tif (layerDirty || interactive) {\n\n\t\t\tconst context = layer.context;\n\t\t\tconst ghostContext = this._renderer._ghostContext;\n\n\t\t\tif (layerDirty) {\n\t\t\t\tcontext.globalCompositeOperation = this.blendMode;\n\n\t\t\t\tcontext.beginPath();\n\t\t\t}\n\n\t\t\tlet color: string | undefined;\n\n\t\t\tif (interactive) {\n\t\t\t\tghostContext.beginPath();\n\t\t\t\tcolor = this._getColorId();\n\t\t\t}\n\n\t\t\t$array.each(this._operations, (op) => {\n\t\t\t\tif (layerDirty) {\n\t\t\t\t\top.path(context);\n\t\t\t\t\top.colorize(context, undefined);\n\t\t\t\t}\n\n\t\t\t\tif (interactive) {\n\t\t\t\t\top.path(ghostContext);\n\t\t\t\t\top.colorize(ghostContext, color);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic renderDetached(context: CanvasRenderingContext2D): void {\n\t\tif (this.visible) {\n\t\t\tthis._setMatrix();\n\n\t\t\tcontext.save();\n\n\t\t\t// We must apply the mask before we transform the element\n\t\t\tconst mask = this.mask;\n\t\t\tif (mask) {\n\t\t\t\tmask._setMatrix();\n\t\t\t\tmask._transform(context, 1);\n\t\t\t\tmask._runPath(context);\n\t\t\t\tcontext.clip();\n\t\t\t}\n\n\t\t\t// TODO handle compoundAlpha somehow ?\n\t\t\tcontext.globalAlpha = this.compoundAlpha * this.alpha;\n\n\t\t\tthis._transform(context, 1);\n\n\t\t\tif (this.filter) {\n\t\t\t\tcontext.filter = this.filter;\n\t\t\t}\n\n\t\t\tcontext.globalCompositeOperation = this.blendMode;\n\n\t\t\tcontext.beginPath();\n\n\t\t\t$array.each(this._operations, (op) => {\n\t\t\t\top.path(context);\n\t\t\t\top.colorize(context, undefined);\n\t\t\t});\n\n\t\t\tcontext.restore();\n\t\t}\n\t}\n\n\tpublic _addBounds(bounds: IBounds): void {\n\t\tif (this.visible && this.isMeasured) {\n\t\t\t$array.each(this._operations, (op) => {\n\t\t\t\top.addBounds(bounds);\n\t\t\t});\n\t\t}\n\t}\n}\n\n/**\n * @ignore\n */\ninterface ILineChunk {\n\tstyle: string | undefined,\n\tfill: Color | undefined,\n\ttext: string,\n\twidth: number,\n\theight: number,\n\tleft: number,\n\tright: number,\n\tascent: number,\n\toffsetX: number,\n\toffsetY: number,\n\ttextDecoration: string | undefined,\n\tverticalAlign?: \"baseline\" | \"sub\" | \"super\"\n}\n\n/**\n * @ignore\n */\ninterface ILine {\n\toffsetY: number,\n\tascent: number,\n\twidth: number,\n\theight: number,\n\tleft: number,\n\tright: number,\n\ttextChunks: Array<ILineChunk>,\n}\n\n/**\n * @ignore\n */\nexport class CanvasText extends CanvasDisplayObject implements IText {\n\tpublic text: string;\n\tpublic style: CanvasTextStyle;\n\tpublic resolution: number = 1;\n\n\tprotected _textInfo: Array<ILine> | undefined;\n\tprotected _textVisible: boolean = true;\n\tprotected _originalScale?: number = 1;\n\n\tconstructor(renderer: CanvasRenderer, text: string, style: CanvasTextStyle) {\n\t\tsuper(renderer);\n\t\tthis.text = text;\n\t\tthis.style = style;\n\t}\n\n\tpublic invalidateBounds(): void {\n\t\tsuper.invalidateBounds();\n\t\tthis._textInfo = undefined;\n\t}\n\n\tprivate _shared(context: CanvasRenderingContext2D) {\n\t\tif (this.style.textAlign) {\n\t\t\tcontext.textAlign = this.style.textAlign;\n\t\t}\n\n\t\tif (this.style.direction) {\n\t\t\tcontext.direction = this.style.direction;\n\t\t}\n\n\t\tif (this.style.textBaseline) {\n\t\t\tcontext.textBaseline = this.style.textBaseline;\n\t\t}\n\n\t}\n\n\tprotected _prerender(layer: CanvasLayer, ignoreGhost = false, ignoreFontWeight = false): void {\n\t\tsuper._render(layer);\n\n\t\tconst context = layer.context;\n\t\tconst ghostContext = this._renderer._ghostContext;\n\n\t\t// Font style\n\n\t\tconst style = this.style;\n\t\tlet fontStyle = this._getFontStyle(undefined, ignoreFontWeight);\n\n\t\tcontext.font = fontStyle;\n\t\tif (this._isInteractive() && !ignoreGhost) {\n\t\t\tghostContext.font = fontStyle;\n\t\t}\n\n\t\t// Other parameters\n\t\tif (style.fill) {\n\t\t\tif (style.fill instanceof Color) {\n\t\t\t\tcontext.fillStyle = style.fill.toCSS();\n\t\t\t} else {\n\t\t\t\tcontext.fillStyle = style.fill;\n\t\t\t}\n\t\t}\n\n\t\tif (style.shadowColor) {\n\t\t\tlayer.context.shadowColor = style.shadowColor.toCSS(style.shadowOpacity || 1);\n\t\t}\n\t\tif (style.shadowBlur) {\n\t\t\tlayer.context.shadowBlur = style.shadowBlur;\n\t\t}\n\t\tif (style.shadowOffsetX) {\n\t\t\tlayer.context.shadowOffsetX = style.shadowOffsetX;\n\t\t}\n\t\tif (style.shadowOffsetY) {\n\t\t\tlayer.context.shadowOffsetY = style.shadowOffsetY;\n\t\t}\n\n\t\tthis._shared(context);\n\n\t\tif (this._isInteractive() && !ignoreGhost) {\n\t\t\tghostContext.fillStyle = this._getColorId();\n\t\t\tthis._shared(ghostContext);\n\t\t}\n\t}\n\n\tprotected _getFontStyle(style2?: ITextStyle, ignoreFontWeight = false): string {\n\n\t\t// Process defaults\n\t\tconst style = this.style;\n\t\tlet fontStyle: string[] = [];\n\n\t\tif (style2 && style2.fontVariant) {\n\t\t\tfontStyle.push(style2.fontVariant);\n\t\t}\n\t\telse if (style.fontVariant) {\n\t\t\tfontStyle.push(style.fontVariant);\n\t\t}\n\n\t\tif (!ignoreFontWeight) {\n\t\t\tif (style2 && style2.fontWeight) {\n\t\t\t\tfontStyle.push(style2.fontWeight);\n\t\t\t}\n\t\t\telse if (style.fontWeight) {\n\t\t\t\tfontStyle.push(style.fontWeight);\n\t\t\t}\n\t\t}\n\n\t\tif (style2 && style2.fontStyle) {\n\t\t\tfontStyle.push(style2.fontStyle);\n\t\t}\n\t\telse if (style.fontStyle) {\n\t\t\tfontStyle.push(style.fontStyle);\n\t\t}\n\n\t\tif (style2 && style2.fontSize) {\n\t\t\tif ($type.isNumber(style2.fontSize)) {\n\t\t\t\tstyle2.fontSize = style2.fontSize + \"px\";\n\t\t\t}\n\t\t\tfontStyle.push(style2.fontSize);\n\t\t}\n\t\telse if (style.fontSize) {\n\t\t\tif ($type.isNumber(style.fontSize)) {\n\t\t\t\tstyle.fontSize = style.fontSize + \"px\";\n\t\t\t}\n\t\t\tfontStyle.push(style.fontSize);\n\t\t}\n\n\t\tif (style2 && style2.fontFamily) {\n\t\t\tfontStyle.push(style2.fontFamily);\n\t\t}\n\t\telse if (style.fontFamily) {\n\t\t\tfontStyle.push(style.fontFamily);\n\t\t}\n\t\telse if (fontStyle.length) {\n\t\t\tfontStyle.push(\"Arial\");\n\t\t}\n\n\t\treturn fontStyle.join(\" \");\n\t}\n\n\tprotected _render(parentLayer: CanvasLayer): void {\n\t\tconst layer = this._layer || parentLayer;\n\n\t\t// We need measurements in order to properly position text for alignment\n\t\tif (!this._textInfo) {\n\t\t\tthis._measure(layer);\n\t\t}\n\n\t\tif (this._textVisible) {\n\n\t\t\tconst interactive = this._isInteractive();\n\t\t\tconst context = layer.context;\n\t\t\tconst layerDirty = layer.dirty;\n\t\t\tconst ghostContext = this._renderer._ghostContext;\n\n\t\t\tcontext.save();\n\t\t\tghostContext.save();\n\t\t\tthis._prerender(layer);\n\n\t\t\t// const lines = this.text.toString().replace(/\\r/g, \"\").split(/\\n/);\n\t\t\t// const x = this._localBounds && (this._localBounds.left < 0) ? Math.abs(this._localBounds.left) : 0;\n\n\t\t\t// Process text info produced by _measure()\n\t\t\t$array.each(this._textInfo!, (line, _index) => {\n\t\t\t\t$array.each(line.textChunks, (chunk, _index) => {\n\n\t\t\t\t\t// Set style\n\t\t\t\t\tif (chunk.style) {\n\t\t\t\t\t\tcontext.save();\n\t\t\t\t\t\tghostContext.save();\n\n\t\t\t\t\t\tcontext.font = chunk.style;\n\t\t\t\t\t\tif (this._isInteractive()) {\n\t\t\t\t\t\t\tghostContext.font = chunk.style;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (chunk.fill) {\n\t\t\t\t\t\tcontext.save();\n\t\t\t\t\t\tcontext.fillStyle = chunk.fill.toCSS();\n\t\t\t\t\t\t// Color does not affect ghostContext so we not set it\n\t\t\t\t\t}\n\n\t\t\t\t\t// Draw text\n\t\t\t\t\tif (layerDirty) {\n\t\t\t\t\t\tcontext.fillText(chunk.text, chunk.offsetX, line.offsetY + chunk.offsetY);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Draw underline\n\t\t\t\t\tif (chunk.textDecoration == \"underline\" || chunk.textDecoration == \"line-through\") {\n\n\t\t\t\t\t\tlet thickness = 1;\n\t\t\t\t\t\tlet offset = 1;\n\t\t\t\t\t\tlet fontSize = chunk.height;\n\n\t\t\t\t\t\tlet offsetX = chunk.offsetX;\n\t\t\t\t\t\tswitch (this.style.textAlign) {\n\t\t\t\t\t\t\tcase \"right\":\n\t\t\t\t\t\t\tcase \"end\":\n\t\t\t\t\t\t\t\toffsetX -= chunk.width;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"center\":\n\t\t\t\t\t\t\t\toffsetX -= chunk.width / 2;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (chunk.style) {\n\t\t\t\t\t\t\tconst format = TextFormatter.getTextStyle(chunk.style);\n\t\t\t\t\t\t\tswitch (format.fontWeight) {\n\t\t\t\t\t\t\t\tcase \"bolder\":\n\t\t\t\t\t\t\t\tcase \"bold\":\n\t\t\t\t\t\t\t\tcase \"700\":\n\t\t\t\t\t\t\t\tcase \"800\":\n\t\t\t\t\t\t\t\tcase \"900\":\n\t\t\t\t\t\t\t\t\tthickness = 2;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (fontSize) {\n\t\t\t\t\t\t\toffset = fontSize / 20;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet y: number;\n\n\t\t\t\t\t\tif (chunk.textDecoration == \"line-through\") {\n\t\t\t\t\t\t\ty = thickness + line.offsetY + chunk.offsetY - chunk.height / 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\ty = thickness + offset * 1.5 + line.offsetY + chunk.offsetY;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontext.save();\n\t\t\t\t\t\tcontext.beginPath();\n\t\t\t\t\t\tif (chunk.fill) {\n\t\t\t\t\t\t\tcontext.strokeStyle = chunk.fill.toCSS();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (this.style.fill && this.style.fill instanceof Color) {\n\t\t\t\t\t\t\tcontext.strokeStyle = this.style.fill.toCSS();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontext.lineWidth = thickness * offset;\n\t\t\t\t\t\tcontext.moveTo(offsetX, y);\n\t\t\t\t\t\tcontext.lineTo(offsetX + chunk.width, y);\n\t\t\t\t\t\tcontext.stroke();\n\t\t\t\t\t\tcontext.restore();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (interactive && this.interactive) {\n\t\t\t\t\t\t// Draw text in ghost canvas ONLY if it is set as interactive\n\t\t\t\t\t\t// explicitly. This way we avoid hit test anomalies caused by anti\n\t\t\t\t\t\t// aliasing of text.\n\t\t\t\t\t\tghostContext.fillText(chunk.text, chunk.offsetX, line.offsetY + chunk.offsetY);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (chunk.fill) {\n\t\t\t\t\t\tcontext.restore();\n\t\t\t\t\t\t// Color does not affect ghostContext so we not set it\n\t\t\t\t\t}\n\n\t\t\t\t\t// Reset style\n\t\t\t\t\tif (chunk.style) {\n\t\t\t\t\t\tcontext.restore();\n\t\t\t\t\t\tghostContext.restore();\n\t\t\t\t\t}\n\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tcontext.restore();\n\t\t\tghostContext.restore();\n\t\t}\n\t}\n\n\tpublic _addBounds(bounds: IBounds): void {\n\t\tif (this.visible && this.isMeasured) {\n\t\t\t//if (this._textVisible) {\n\t\t\tconst x = this._measure(this.getLayer());\n\t\t\tsetPoint(bounds, { x: x.left, y: x.top });\n\t\t\tsetPoint(bounds, { x: x.right, y: x.bottom });\n\t\t\t//}\n\t\t}\n\t}\n\n\tpublic _measure(layer: CanvasLayer): IBounds {\n\t\tconst context = layer.context;\n\t\tconst ghostContext = this._renderer._ghostContext;\n\t\tconst rtl = this.style.direction == \"rtl\";\n\n\t\t// Reset text info\n\t\tthis._textInfo = [];\n\n\t\t// Init\n\t\tconst oversizedBehavior = this.style.oversizedBehavior;\n\t\tconst maxWidth = this.style.maxWidth!;\n\n\t\tconst truncate = $type.isNumber(maxWidth) && oversizedBehavior == \"truncate\";\n\t\tconst wrap = $type.isNumber(maxWidth) && oversizedBehavior == \"wrap\";\n\n\t\t// Pre-render\n\t\tcontext.save();\n\t\tghostContext.save();\n\t\tthis._prerender(layer, true, true);\n\n\t\t// Get default font metrix\n\t\tconst refText = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 \";\n\n\t\t// Split up text into lines\n\t\tconst lines = this.text.toString().replace(/\\r/g, \"\").split(/\\n/);\n\t\tlet styleRestored = true;\n\t\tlet minX = 0;\n\t\tlet maxX = 0;\n\n\t\t// Iterate through the lines\n\t\tlet offsetY = 0;\n\t\tlet currentStyle: string | undefined;\n\t\t$array.each(lines, (line, _index) => {\n\n\t\t\t// Split up line into format/value chunks\n\t\t\tlet chunks: ITextChunk[];\n\t\t\tif (line == \"\") {\n\t\t\t\tchunks = [{\n\t\t\t\t\ttype: \"value\",\n\t\t\t\t\ttext: \"\"\n\t\t\t\t}];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tchunks = TextFormatter.chunk(line, false, this.style.ignoreFormatting);\n\t\t\t}\n\n\t\t\twhile (chunks.length > 0) {\n\n\t\t\t\t// Init line object\n\t\t\t\tlet lineInfo: ILine = {\n\t\t\t\t\toffsetY: offsetY,\n\t\t\t\t\tascent: 0,\n\t\t\t\t\twidth: 0,\n\t\t\t\t\theight: 0,\n\t\t\t\t\tleft: 0,\n\t\t\t\t\tright: 0,\n\t\t\t\t\ttextChunks: []\n\t\t\t\t};\n\n\t\t\t\t// Measure reference text\n\t\t\t\tconst metrics = this._measureText(refText, context);\n\n\t\t\t\tconst height = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\n\t\t\t\tlineInfo.height = height;\n\t\t\t\tlineInfo.ascent = metrics.actualBoundingBoxAscent;\n\n\t\t\t\tlet currentFormat: string;\n\t\t\t\tlet currentDecoration: string | undefined = this.style.textDecoration;\n\t\t\t\tlet currentFill: Color | undefined;\n\t\t\t\tlet currentChunkWidth: number | undefined;\n\t\t\t\tlet skipFurtherText = false;\n\t\t\t\tlet firstTextChunk = true;\n\t\t\t\tlet leftoverChunks: Array<ITextChunk> = [];\n\t\t\t\tlet currentVerticalAlign: \"baseline\" | \"sub\" | \"super\" | undefined;\n\t\t\t\t//let offsetX = 0;\n\t\t\t\t//let chunk;\n\n\t\t\t\t//while(chunk = chunks.shift()) {\n\t\t\t\t$array.eachContinue(chunks, (chunk, index) => {\n\n\t\t\t\t\t// Format chunk\n\t\t\t\t\tif (chunk.type == \"format\") {\n\t\t\t\t\t\tif (chunk.text == \"[/]\") {\n\t\t\t\t\t\t\tif (!styleRestored) {\n\t\t\t\t\t\t\t\tcontext.restore();\n\t\t\t\t\t\t\t\tghostContext.restore();\n\t\t\t\t\t\t\t\tstyleRestored = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcurrentFill = undefined;\n\t\t\t\t\t\t\tcurrentStyle = undefined;\n\t\t\t\t\t\t\tcurrentChunkWidth = undefined;\n\t\t\t\t\t\t\tcurrentDecoration = this.style.textDecoration;\n\t\t\t\t\t\t\tcurrentVerticalAlign = undefined\n\t\t\t\t\t\t\tcurrentFormat = chunk.text;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\n\t\t\t\t\t\t\tif (!styleRestored) {\n\t\t\t\t\t\t\t\tcontext.restore();\n\t\t\t\t\t\t\t\tghostContext.restore();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet format = TextFormatter.getTextStyle(chunk.text);\n\t\t\t\t\t\t\tconst fontStyle = this._getFontStyle(format);\n\t\t\t\t\t\t\tcontext.save();\n\t\t\t\t\t\t\tghostContext.save();\n\t\t\t\t\t\t\tcontext.font = fontStyle;\n\t\t\t\t\t\t\tcurrentStyle = fontStyle;\n\t\t\t\t\t\t\tcurrentFormat = chunk.text;\n\t\t\t\t\t\t\tif (format.textDecoration) {\n\t\t\t\t\t\t\t\tcurrentDecoration = format.textDecoration;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (format.fill) {\n\t\t\t\t\t\t\t\tcurrentFill = <Color>format.fill;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif ((<any>format).width) {\n\t\t\t\t\t\t\t\tcurrentChunkWidth = $type.toNumber((<any>format).width);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (format.verticalAlign) {\n\t\t\t\t\t\t\t\tcurrentVerticalAlign = format.verticalAlign;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tstyleRestored = false;\n\n\t\t\t\t\t\t\t// Measure reference text after change of format\n\t\t\t\t\t\t\tconst metrics = this._measureText(refText, context);\n\t\t\t\t\t\t\tconst height = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\n\t\t\t\t\t\t\tif (height > lineInfo.height) {\n\t\t\t\t\t\t\t\tlineInfo.height = height;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (metrics.actualBoundingBoxAscent > lineInfo.ascent) {\n\t\t\t\t\t\t\t\tlineInfo.ascent = metrics.actualBoundingBoxAscent;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Text chunk\n\t\t\t\t\telse if (chunk.type == \"value\" && !skipFurtherText) {\n\n\t\t\t\t\t\t// Measure\n\t\t\t\t\t\tconst metrics = this._measureText(chunk.text, context);\n\t\t\t\t\t\tlet chunkWidth = metrics.actualBoundingBoxLeft + metrics.actualBoundingBoxRight;\n\n\t\t\t\t\t\t// Check for fit\n\t\t\t\t\t\tif (truncate) {\n\n\t\t\t\t\t\t\t// Break words?\n\t\t\t\t\t\t\tlet breakWords = firstTextChunk || this.style.breakWords || false;\n\n\t\t\t\t\t\t\t// Measure ellipsis and check if it fits\n\t\t\t\t\t\t\tconst ellipsis = this.style.ellipsis || \"\";\n\t\t\t\t\t\t\tconst ellipsisMetrics = this._measureText(ellipsis, context);\n\t\t\t\t\t\t\tconst ellipsisWidth = ellipsisMetrics.actualBoundingBoxLeft + ellipsisMetrics.actualBoundingBoxRight;\n\n\t\t\t\t\t\t\t// Check fit\n\t\t\t\t\t\t\tif ((lineInfo.width + chunkWidth) > maxWidth) {\n\t\t\t\t\t\t\t\tconst excessWidth = maxWidth - lineInfo.width - ellipsisWidth;\n\t\t\t\t\t\t\t\tchunk.text = this._truncateText(context, chunk.text, excessWidth, breakWords);\n\t\t\t\t\t\t\t\tchunk.text += ellipsis;\n\t\t\t\t\t\t\t\tskipFurtherText = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (wrap) {\n\t\t\t\t\t\t\t// Check fit\n\t\t\t\t\t\t\tif ((lineInfo.width + chunkWidth) > maxWidth) {\n\t\t\t\t\t\t\t\tconst excessWidth = maxWidth - lineInfo.width;\n\t\t\t\t\t\t\t\tconst tmpText = this._truncateText(context, chunk.text, excessWidth, false, firstTextChunk);\n\n\t\t\t\t\t\t\t\tif (tmpText == \"\") {\n\t\t\t\t\t\t\t\t\t// Unable to fit a single letter - hide the whole label\n\t\t\t\t\t\t\t\t\tthis._textVisible = true;\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//skipFurtherText = true;\n\n\t\t\t\t\t\t\t\t//Add remaining chunks for the next line\n\t\t\t\t\t\t\t\tleftoverChunks = chunks.slice(index + 1);\n\n\t\t\t\t\t\t\t\t//Add remaining text of current chunk if it was forced-cut\n\t\t\t\t\t\t\t\tif ($utils.trim(tmpText) != $utils.trim(chunk.text)) {\n\t\t\t\t\t\t\t\t\tleftoverChunks.unshift({\n\t\t\t\t\t\t\t\t\t\ttype: \"value\",\n\t\t\t\t\t\t\t\t\t\ttext: chunk.text.substr(tmpText.length)\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tif (currentFormat) {\n\t\t\t\t\t\t\t\t\t\tleftoverChunks.unshift({\n\t\t\t\t\t\t\t\t\t\t\ttype: \"format\",\n\t\t\t\t\t\t\t\t\t\t\ttext: currentFormat\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Set current chunk (truncated)\n\t\t\t\t\t\t\t\tchunk.text = $utils.trim(tmpText);\n\n\t\t\t\t\t\t\t\tchunks = [];\n\t\t\t\t\t\t\t\tskipFurtherText = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Chunk width?\n\t\t\t\t\t\tlet leftBoundMod = 1;\n\t\t\t\t\t\tlet rightBoundMod = 1;\n\t\t\t\t\t\tif (currentStyle && currentChunkWidth && (currentChunkWidth > chunkWidth)) {\n\t\t\t\t\t\t\t// increase horizontal bounding boxes accordingly\n\t\t\t\t\t\t\tconst boundsMod = chunkWidth / currentChunkWidth\n\t\t\t\t\t\t\tswitch (this.style.textAlign) {\n\t\t\t\t\t\t\t\tcase \"right\":\n\t\t\t\t\t\t\t\tcase \"end\":\n\t\t\t\t\t\t\t\t\tleftBoundMod = boundsMod;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase \"center\":\n\t\t\t\t\t\t\t\t\tleftBoundMod = boundsMod;\n\t\t\t\t\t\t\t\t\trightBoundMod = boundsMod;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\trightBoundMod = boundsMod;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tchunkWidth = currentChunkWidth;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst chunkHeight = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\n\n\n\t\t\t\t\t\tif (chunkHeight > lineInfo.height) {\n\t\t\t\t\t\t\tlineInfo.height = chunkHeight;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (metrics.actualBoundingBoxAscent > lineInfo.ascent) {\n\t\t\t\t\t\t\tlineInfo.ascent = metrics.actualBoundingBoxAscent;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlineInfo.width += chunkWidth;\n\t\t\t\t\t\tlineInfo.left += metrics.actualBoundingBoxLeft / leftBoundMod;\n\t\t\t\t\t\tlineInfo.right += metrics.actualBoundingBoxRight / rightBoundMod;\n\t\t\t\t\t\tlineInfo.textChunks.push({\n\t\t\t\t\t\t\tstyle: currentStyle,\n\t\t\t\t\t\t\tfill: currentFill,\n\t\t\t\t\t\t\ttext: chunk.text,\n\t\t\t\t\t\t\twidth: chunkWidth,\n\t\t\t\t\t\t\theight: chunkHeight,\n\t\t\t\t\t\t\tleft: metrics.actualBoundingBoxLeft,\n\t\t\t\t\t\t\tright: metrics.actualBoundingBoxRight,\n\t\t\t\t\t\t\tascent: metrics.actualBoundingBoxAscent,\n\t\t\t\t\t\t\toffsetX: 0,\n\t\t\t\t\t\t\toffsetY: 0,\n\t\t\t\t\t\t\ttextDecoration: currentDecoration,\n\t\t\t\t\t\t\tverticalAlign: currentVerticalAlign\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t//offsetX += chunkWidth;\n\n\t\t\t\t\t\tfirstTextChunk = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif (leftoverChunks) {\n\t\t\t\t\t\t//return false;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t\t//}\n\t\t\t\t});\n\n\t\t\t\tif (this.style.lineHeight instanceof Percent) {\n\t\t\t\t\tlineInfo.height *= this.style.lineHeight.value;\n\t\t\t\t\tlineInfo.ascent *= this.style.lineHeight.value;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlineInfo.height *= this.style.lineHeight || 1.2;\n\t\t\t\t\tlineInfo.ascent *= this.style.lineHeight || 1.2;\n\t\t\t\t}\n\n\t\t\t\tif (minX < lineInfo.left) {\n\t\t\t\t\tminX = lineInfo.left;\n\t\t\t\t}\n\n\t\t\t\tif (maxX < lineInfo.right) {\n\t\t\t\t\tmaxX = lineInfo.right;\n\t\t\t\t}\n\n\t\t\t\tthis._textInfo!.push(lineInfo);\n\n\t\t\t\t//lineInfo.offsetY += lineInfo.ascent;\n\t\t\t\toffsetY += lineInfo.height;\n\n\t\t\t\t// Reset chunks so that it can proceed to the next line\n\t\t\t\tchunks = leftoverChunks || [];\n\t\t\t}\n\n\t\t});\n\n\t\tif (!styleRestored) {\n\t\t\tcontext.restore();\n\t\t\tghostContext.restore();\n\t\t}\n\n\t\t// Adjust chunk internal offsets\n\t\t$array.each(this._textInfo, (lineInfo, _index: number) => {\n\t\t\tlet currentChunkOffset = 0\n\t\t\t$array.each(lineInfo.textChunks, (chunk) => {\n\t\t\t\tchunk.offsetX = currentChunkOffset + chunk.left - lineInfo.left;\n\t\t\t\tchunk.offsetY += lineInfo.height - lineInfo.height * (this.style.baselineRatio || 0.19);\n\t\t\t\tcurrentChunkOffset += chunk.width;\n\n\t\t\t\tif (chunk.verticalAlign) {\n\t\t\t\t\tswitch (chunk.verticalAlign) {\n\t\t\t\t\t\tcase \"super\":\n\t\t\t\t\t\t\tchunk.offsetY -= lineInfo.height / 2 - chunk.height / 2;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"sub\":\n\t\t\t\t\t\t\tchunk.offsetY += chunk.height / 2;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tconst bounds = {\n\t\t\tleft: rtl ? -maxX : -minX,\n\t\t\ttop: 0,\n\t\t\tright: rtl ? minX : maxX,\n\t\t\tbottom: offsetY,\n\t\t};\n\n\n\t\t// We need to fit?\n\t\tif (oversizedBehavior !== \"none\") {\n\t\t\tconst ratio = this._fitRatio(bounds);\n\t\t\tif (ratio < 1) {\n\t\t\t\tif (oversizedBehavior == \"fit\") {\n\t\t\t\t\tif ($type.isNumber(this.style.minScale) && (ratio < this.style.minScale)) {\n\t\t\t\t\t\tthis._textVisible = false;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (!this._originalScale || this._originalScale == 1) {\n\t\t\t\t\t\t\tthis._originalScale = this.scale;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.scale = ratio;\n\t\t\t\t\t\tthis._textVisible = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (oversizedBehavior == \"hide\") {\n\t\t\t\t\tthis._textVisible = false;\n\t\t\t\t}\n\t\t\t\telse {\n\n\t\t\t\t\tswitch (this.style.textAlign) {\n\t\t\t\t\t\tcase \"right\":\n\t\t\t\t\t\tcase \"end\":\n\t\t\t\t\t\t\tbounds.left = -maxWidth;\n\t\t\t\t\t\t\tbounds.right = 0;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"center\":\n\t\t\t\t\t\t\tbounds.left = -maxWidth / 2;\n\t\t\t\t\t\t\tbounds.right = maxWidth / 2;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tbounds.left = 0;\n\t\t\t\t\t\t\tbounds.right = maxWidth;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.scale = this._originalScale || 1;\n\t\t\t\t\tthis._originalScale = undefined;\n\t\t\t\t\tthis._textVisible = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.scale = this._originalScale || 1;\n\t\t\t\tthis._originalScale = undefined;\n\t\t\t\tthis._textVisible = true;\n\t\t\t}\n\t\t}\n\n\t\tcontext.restore();\n\t\tghostContext.restore();\n\n\t\treturn bounds;\n\t}\n\n\tprotected _fitRatio(bounds: IBounds): number {\n\t\tconst maxW = this.style.maxWidth;\n\t\tconst maxH = this.style.maxHeight;\n\t\tif (!$type.isNumber(maxW) && !$type.isNumber(maxH)) {\n\t\t\treturn 1;\n\t\t}\n\t\tconst w = bounds.right - bounds.left;\n\t\tconst h = bounds.bottom - bounds.top;\n\t\treturn Math.min(maxW! / w || 1, maxH! / h || 1);\n\t}\n\n\tprotected _truncateText(context: CanvasRenderingContext2D, text: string, maxWidth: number, breakWords: boolean = false, fallbackBreakWords: boolean = true): string {\n\t\tlet width: number;\n\t\tdo {\n\t\t\tif (breakWords) {\n\t\t\t\ttext = text.slice(0, -1);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet tmp = text.replace(/[^,;:!?\\\\\\/\\s]+[,;:!?\\\\\\/\\s]*$/g, \"\");\n\t\t\t\tif (tmp == \"\" && fallbackBreakWords) {\n\t\t\t\t\tbreakWords = true;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ttext = tmp;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst metrics = this._measureText(text, context);\n\t\t\twidth = metrics.actualBoundingBoxLeft + metrics.actualBoundingBoxRight;\n\t\t} while ((width > maxWidth) && text != \"\");\n\t\treturn text;\n\t}\n\n\tprotected _measureText(text: string, context: CanvasRenderingContext2D): TextMetrics {\n\t\tlet metrics = context.measureText(text);\n\t\tlet fakeMetrics: any = {};\n\t\tif (metrics.actualBoundingBoxAscent == null) {\n\t\t\tconst div = document.createElement(\"div\");\n\t\t\tdiv.innerText = text;\n\t\t\tdiv.style.visibility = \"hidden\";\n\t\t\tdiv.style.position = \"absolute\";\n\t\t\tdiv.style.top = \"-1000000px;\"\n\t\t\tdiv.style.fontFamily = this.style.fontFamily || \"\";\n\t\t\tdiv.style.fontSize = this.style.fontSize + \"\";\n\t\t\tdocument.body.appendChild(div);\n\t\t\tconst bbox = div.getBoundingClientRect();\n\t\t\tdocument.body.removeChild(div);\n\t\t\tconst h = bbox.height;\n\t\t\tconst w = metrics.width;\n\t\t\tlet left = 0;\n\t\t\tlet right = w;\n\n\t\t\tfakeMetrics = {\n\t\t\t\tactualBoundingBoxAscent: h,\n\t\t\t\tactualBoundingBoxDescent: 0,\n\t\t\t\tactualBoundingBoxLeft: left,\n\t\t\t\tactualBoundingBoxRight: right,\n\t\t\t\tfontBoundingBoxAscent: h,\n\t\t\t\tfontBoundingBoxDescent: 0,\n\t\t\t\twidth: w\n\t\t\t}\n\t\t\t//return fake;\n\t\t}\n\t\telse {\n\t\t\tfakeMetrics = {\n\t\t\t\tactualBoundingBoxAscent: metrics.actualBoundingBoxAscent,\n\t\t\t\tactualBoundingBoxDescent: metrics.actualBoundingBoxDescent,\n\t\t\t\tactualBoundingBoxLeft: metrics.actualBoundingBoxLeft,\n\t\t\t\tactualBoundingBoxRight: metrics.actualBoundingBoxRight,\n\t\t\t\tfontBoundingBoxAscent: metrics.actualBoundingBoxAscent,\n\t\t\t\tfontBoundingBoxDescent: metrics.actualBoundingBoxDescent,\n\t\t\t\twidth: metrics.width\n\t\t\t}\n\t\t}\n\n\t\tconst w = metrics.width;\n\t\tswitch (this.style.textAlign) {\n\t\t\tcase \"right\":\n\t\t\tcase \"end\":\n\t\t\t\tfakeMetrics.actualBoundingBoxLeft = w;\n\t\t\t\tfakeMetrics.actualBoundingBoxRight = 0;\n\t\t\t\tbreak;\n\t\t\tcase \"center\":\n\t\t\t\tfakeMetrics.actualBoundingBoxLeft = w / 2;\n\t\t\t\tfakeMetrics.actualBoundingBoxRight = w / 2;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tfakeMetrics.actualBoundingBoxLeft = 0;\n\t\t\t\tfakeMetrics.actualBoundingBoxRight = w;\n\t\t}\n\n\t\treturn fakeMetrics;\n\t}\n\n}\n\n/**\n * @ignore\n */\nexport class CanvasTextStyle implements ITextStyle {\n\t//public wordWrapWidth: number = 100;\n\tpublic fill?: Color | CanvasGradient | CanvasPattern;\n\tpublic textAlign?: \"start\" | \"end\" | \"left\" | \"right\" | \"center\";\n\tpublic fontFamily?: string;\n\tpublic fontSize?: string | number;\n\tpublic fontWeight?: 'normal' | 'bold' | 'bolder' | 'lighter' | '100' | '200' | '300' | '400' | '500' | '600' | '700' | '800' | '900'\n\tpublic fontStyle?: 'normal' | 'italic' | 'oblique';\n\tpublic fontVariant?: \"normal\" | \"small-caps\";\n\tpublic textDecoration?: \"underline\" | \"line-through\";\n\tpublic shadowColor?: Color | null;\n\tpublic shadowBlur?: number;\n\tpublic shadowOffsetX?: number;\n\tpublic shadowOffsetY?: number;\n\tpublic shadowOpacity?: number;\n\t// leading?: number;\n\t// letterSpacing?: number;\n\tpublic lineHeight?: number | Percent = percent(120);\n\tpublic baselineRatio?: number = 0.19;\n\t// padding?: number;\n\t// stroke?: number;\n\t// strokeThickness?: number;\n\t// trim?: number;\n\t// wordWrap?: boolean;\n\tpublic direction?: \"ltr\" | \"rtl\";\n\tpublic textBaseline?: \"top\" | \"hanging\" | \"middle\" | \"alphabetic\" | \"ideographic\" | \"bottom\";\n\tpublic oversizedBehavior?: \"none\" | \"hide\" | \"fit\" | \"wrap\" | \"truncate\" = \"none\";\n\tpublic breakWords?: boolean = false;\n\tpublic ellipsis?: string = \"…\";\n\tpublic maxWidth?: number;\n\tpublic maxHeight?: number;\n\tpublic minScale?: number;\n\tpublic ignoreFormatting?: boolean = false;\n}\n\n/**\n * @ignore\n */\nexport class CanvasRadialText extends CanvasText implements IRadialText {\n\tpublic textType?: \"regular\" | \"circular\" | \"radial\" | \"aligned\" | \"adjusted\" = \"circular\";\n\tpublic radius?: number;\n\tpublic startAngle?: number;\n\tpublic inside?: boolean = false;\n\tpublic orientation?: \"inward\" | \"outward\" | \"auto\" = \"auto\";\n\tpublic kerning?: number = 0;\n\n\tprivate _textReversed: boolean = false;\n\n\tpublic _render(parentLayer: CanvasLayer): void {\n\t\tswitch (this.textType) {\n\t\t\tcase \"circular\":\n\t\t\t\tthis._renderCircular(parentLayer);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tsuper._render(parentLayer);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tpublic _renderCircular(parentLayer: CanvasLayer): void {\n\t\tconst layer = this._layer || parentLayer;\n\n\t\tthis._prerender(layer);\n\n\t\tconst interactive = this._isInteractive();\n\t\tconst context = layer.context;\n\t\tconst layerDirty = layer.dirty;\n\t\tconst ghostContext = this._renderer._ghostContext;\n\n\t\t// Savepoint\n\t\tcontext.save();\n\t\tif (interactive) {\n\t\t\tghostContext.save();\n\t\t}\n\n\t\t// Init\n\t\tlet radius = (this.radius || 0);\n\t\tlet startAngle = (this.startAngle || 0);\n\t\tlet deltaAngle = 0;\n\t\tlet orientation = this.orientation;\n\t\tlet inward = orientation == \"auto\" ? \"auto\" : orientation == \"inward\";\n\t\tconst inside = this.inside;\n\t\tconst align = this.style.textAlign || \"left\";\n\t\tconst kerning = this.kerning || 0;\n\t\tlet clockwise = align == \"left\" ? 1 : -1;\n\t\tconst shouldReverse = !this._textReversed;\n\n\t\t// We need measurements in order to properly position text for alignment\n\t\tif (!this._textInfo) {\n\t\t\tthis._measure(layer);\n\t\t}\n\n\t\t// Check if we need to invert the whole stuff\n\t\tif (inward == \"auto\") {\n\t\t\t// Calc max angle so we know whether we need to flip it\n\t\t\tlet maxAngle = 0;\n\t\t\tlet midAngle = 0;\n\t\t\t$array.each(this._textInfo!, (line, _index) => {\n\t\t\t\tconst deltaAngle = startAngle + (line.width / (radius - line.height)) / 2 * -clockwise;\n\t\t\t\tif (deltaAngle > maxAngle) {\n\t\t\t\t\tmaxAngle = deltaAngle;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (align == \"left\") {\n\t\t\t\tmidAngle = (maxAngle + deltaAngle / 2) * $math.DEGREES;\n\t\t\t}\n\t\t\telse if (align == \"right\") {\n\t\t\t\tmidAngle = (maxAngle - deltaAngle / 2) * $math.DEGREES;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmidAngle = startAngle * $math.DEGREES;\n\t\t\t}\n\t\t\tmidAngle = $math.normalizeAngle(midAngle);\n\t\t\tinward = (midAngle >= 270) || (midAngle <= 90);\n\t\t}\n\n\t\tif (inward == true && shouldReverse) {\n\t\t\tthis._textInfo!.reverse();\n\t\t\tthis._textReversed = true;\n\t\t}\n\n\t\t// if ((inward == false && align == \"left\") || (inward == true && align == \"right\")) {\n\t\t// \tclockwise *= -1;\n\t\t// }\n\n\t\t// Process text info produced by _measure()\n\t\t$array.each(this._textInfo!, (line, _index) => {\n\n\t\t\tconst textHeight = line.height;\n\n\t\t\t// Adjust radius (for `inside = false`)\n\t\t\t// Radius adjustment for `inside = false` is below the line calculation\n\t\t\tif (!inside) {\n\t\t\t\tradius += textHeight;\n\t\t\t}\n\n\t\t\t// Reverse letters if we're painting them counter-clockwise\n\t\t\tif (((clockwise == -1 && inward) || (clockwise == 1 && !inward)) && shouldReverse) {\n\t\t\t\tline.textChunks.reverse();\n\t\t\t}\n\n\t\t\t// Init angles\n\t\t\tlet lineStartAngle = startAngle;\n\t\t\tdeltaAngle = 0;\n\n\t\t\t// Adjust for center-align\n\t\t\tif (align == \"center\") {\n\t\t\t\tlineStartAngle += (line.width / (radius - textHeight)) / 2 * -clockwise;\n\t\t\t\tdeltaAngle = lineStartAngle - startAngle;\n\t\t\t}\n\n\t\t\t// if (inward == \"auto\") {\n\t\t\t// \tlet midAngle;\n\t\t\t// \tif (align == \"left\") {\n\t\t\t// \t\tmidAngle = (lineStartAngle + deltaAngle / 2) * $math.DEGREES;\n\t\t\t// \t}\n\t\t\t// \telse if () {\n\t\t\t// \t\tmidAngle = (lineStartAngle - deltaAngle / 2) * $math.DEGREES;\n\t\t\t// \t}\n\t\t\t// \tinward = (midAngle >= 270) || (midAngle <= 90);\n\t\t\t// }\n\n\t\t\t// Rotate letters if they are facing outward\n\t\t\tlineStartAngle += (Math.PI * (inward ? 0 : 1)); // Rotate 180 if outward\n\n\t\t\t// Savepoint\n\t\t\tcontext.save();\n\t\t\tif (interactive) {\n\t\t\t\tghostContext.save();\n\t\t\t}\n\n\t\t\t// Assume starting angle\n\t\t\tcontext.rotate(lineStartAngle);\n\t\t\tif (interactive) {\n\t\t\t\tghostContext.rotate(lineStartAngle);\n\t\t\t}\n\n\t\t\tlet angleShift = 0;\n\t\t\t$array.each(line.textChunks, (chunk, _index) => {\n\n\t\t\t\t// Draw the letter\n\t\t\t\tconst char = chunk.text;\n\t\t\t\tconst charWidth = chunk.width;\n\n\t\t\t\t// Rotate half a letter\n\t\t\t\tangleShift = (charWidth / 2) / (radius - textHeight) * clockwise;\n\t\t\t\tcontext.rotate(angleShift);\n\t\t\t\tif (interactive) {\n\t\t\t\t\tghostContext.rotate(angleShift);\n\t\t\t\t}\n\n\t\t\t\t// Set style\n\t\t\t\tif (chunk.style) {\n\t\t\t\t\tcontext.save();\n\t\t\t\t\tghostContext.save();\n\n\t\t\t\t\tcontext.font = chunk.style;\n\t\t\t\t\tif (interactive) {\n\t\t\t\t\t\tghostContext.font = chunk.style;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (chunk.fill) {\n\t\t\t\t\tcontext.save();\n\t\t\t\t\tcontext.fillStyle = chunk.fill.toCSS();\n\t\t\t\t\t// Color does not affect ghostContext so we not set it\n\t\t\t\t}\n\n\t\t\t\t// Center letters\n\t\t\t\tcontext.textBaseline = \"middle\";\n\t\t\t\tcontext.textAlign = \"center\";\n\t\t\t\tif (interactive) {\n\t\t\t\t\tghostContext.textBaseline = \"middle\";\n\t\t\t\t\tghostContext.textAlign = \"center\";\n\t\t\t\t}\n\n\t\t\t\t// Plop the letter\n\t\t\t\tif (layerDirty) {\n\t\t\t\t\tcontext.fillText(char, 0, (inward ? 1 : -1) * (0 - radius + textHeight / 2));\n\t\t\t\t}\n\t\t\t\tif (interactive) {\n\t\t\t\t\tghostContext.fillText(char, 0, (inward ? 1 : -1) * (0 - radius + textHeight / 2));\n\t\t\t\t}\n\n\t\t\t\tif (chunk.fill) {\n\t\t\t\t\tcontext.restore();\n\t\t\t\t\t// Color does not affect ghostContext so we not set it\n\t\t\t\t}\n\n\t\t\t\t// Reset style\n\t\t\t\tif (chunk.style) {\n\t\t\t\t\tcontext.restore();\n\t\t\t\t\tghostContext.restore();\n\t\t\t\t}\n\n\t\t\t\t// Rotate half a letter and add spacing\n\t\t\t\tangleShift = (charWidth / 2 + kerning) / (radius - textHeight) * clockwise;\n\t\t\t\tcontext.rotate(angleShift);\n\t\t\t\tif (interactive) {\n\t\t\t\t\tghostContext.rotate(angleShift);\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\t// Restore angle\n\t\t\tcontext.restore();\n\t\t\tif (interactive) {\n\t\t\t\tghostContext.restore();\n\t\t\t}\n\n\t\t\t// Adjust radius (for `inside = true`)\n\t\t\tif (inside) {\n\t\t\t\tradius -= textHeight;\n\t\t\t}\n\n\t\t});\n\n\t\t// Restore\n\t\tcontext.restore();\n\t\tif (interactive) {\n\t\t\tghostContext.restore();\n\t\t}\n\t}\n\n\tpublic _measure(layer: CanvasLayer): IBounds {\n\t\tswitch (this.textType) {\n\t\t\tcase \"circular\":\n\t\t\t\treturn this._measureCircular(layer);\n\t\t\tdefault:\n\t\t\t\treturn super._measure(layer);\n\t\t}\n\t}\n\n\tpublic _measureCircular(layer: CanvasLayer): IBounds {\n\t\tconst context = layer.context;\n\t\tconst ghostContext = this._renderer._ghostContext;\n\t\tconst rtl = this.style.direction == \"rtl\";\n\n\t\t// Reset text info\n\t\tthis._textInfo = [];\n\t\tthis._textReversed = false;\n\n\t\t// Pre-render\n\t\tcontext.save();\n\t\tghostContext.save();\n\t\tthis._prerender(layer, true);\n\n\t\t// Split up text into lines\n\t\tconst lines = this.text.toString().replace(/\\r/g, \"\").split(/\\n/);\n\t\tlet styleRestored = true;\n\n\t\t// Iterate through the lines\n\t\tlet offsetY = 0;\n\t\t$array.each(lines, (line, _index) => {\n\n\t\t\t// Split up line into format/value chunks\n\t\t\tlet chunks = TextFormatter.chunk(line, false, this.style.ignoreFormatting);\n\n\t\t\t// Init line object\n\t\t\tlet lineInfo: ILine = {\n\t\t\t\toffsetY: offsetY,\n\t\t\t\tascent: 0,\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0,\n\t\t\t\tleft: 0,\n\t\t\t\tright: 0,\n\t\t\t\ttextChunks: []\n\t\t\t};\n\n\t\t\tlet currentStyle: string | undefined;\n\t\t\tlet currentFill: Color | undefined;\n\t\t\tlet currentChunkWidth: number | undefined;\n\n\t\t\t//while(chunk = chunks.shift()) {\n\t\t\t$array.each(chunks, (chunk, _index) => {\n\n\t\t\t\t// Format chunk\n\t\t\t\tif (chunk.type == \"format\") {\n\t\t\t\t\tif (chunk.text == \"[/]\") {\n\t\t\t\t\t\tif (!styleRestored) {\n\t\t\t\t\t\t\tcontext.restore();\n\t\t\t\t\t\t\tghostContext.restore();\n\t\t\t\t\t\t\tstyleRestored = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcurrentFill = undefined;\n\t\t\t\t\t\tcurrentStyle = undefined;\n\t\t\t\t\t\tcurrentChunkWidth = undefined;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tlet format = TextFormatter.getTextStyle(chunk.text);\n\t\t\t\t\t\tconst fontStyle = this._getFontStyle(format);\n\t\t\t\t\t\tcontext.save();\n\t\t\t\t\t\tghostContext.save();\n\t\t\t\t\t\tcontext.font = fontStyle;\n\t\t\t\t\t\tcurrentStyle = fontStyle;\n\t\t\t\t\t\tif (format.fill) {\n\t\t\t\t\t\t\tcurrentFill = <Color>format.fill;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ((<any>format).width) {\n\t\t\t\t\t\t\tcurrentChunkWidth = $type.toNumber((<any>format).width);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstyleRestored = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Text format\n\t\t\t\telse if (chunk.type == \"value\") {\n\n\t\t\t\t\t// Measure each letter\n\t\t\t\t\tconst chars = chunk.text.match(/./ug) || [];\n\t\t\t\t\tif (rtl) {\n\t\t\t\t\t\tchars.reverse();\n\t\t\t\t\t}\n\t\t\t\t\tfor (let i = 0; i < chars.length; i++) {\n\n\t\t\t\t\t\tconst char = chars[i];\n\n\t\t\t\t\t\t// Measure\n\t\t\t\t\t\tconst metrics = this._measureText(char, context);\n\t\t\t\t\t\tlet chunkWidth = metrics.width;\n\n\t\t\t\t\t\t// Chunk width?\n\t\t\t\t\t\tif (currentStyle && currentChunkWidth && (currentChunkWidth > chunkWidth)) {\n\t\t\t\t\t\t\tchunkWidth = currentChunkWidth;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst chunkHeight = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\n\t\t\t\t\t\tif (chunkHeight > lineInfo.height) {\n\t\t\t\t\t\t\tlineInfo.height = chunkHeight;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (metrics.actualBoundingBoxAscent > lineInfo.ascent) {\n\t\t\t\t\t\t\tlineInfo.ascent = metrics.actualBoundingBoxAscent;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlineInfo.width += chunkWidth;\n\t\t\t\t\t\tlineInfo.left += metrics.actualBoundingBoxLeft;\n\t\t\t\t\t\tlineInfo.right += metrics.actualBoundingBoxRight;\n\t\t\t\t\t\tlineInfo.textChunks.push({\n\t\t\t\t\t\t\tstyle: currentStyle,\n\t\t\t\t\t\t\tfill: currentFill,\n\t\t\t\t\t\t\ttext: char,\n\t\t\t\t\t\t\twidth: chunkWidth,\n\t\t\t\t\t\t\theight: chunkHeight + metrics.actualBoundingBoxDescent,\n\t\t\t\t\t\t\tleft: metrics.actualBoundingBoxLeft,\n\t\t\t\t\t\t\tright: metrics.actualBoundingBoxRight,\n\t\t\t\t\t\t\tascent: metrics.actualBoundingBoxAscent,\n\t\t\t\t\t\t\toffsetX: 0,\n\t\t\t\t\t\t\toffsetY: chunkHeight,\n\t\t\t\t\t\t\ttextDecoration: undefined\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (rtl) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (this.style.lineHeight instanceof Percent) {\n\t\t\t\tlineInfo.height *= this.style.lineHeight.value;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlineInfo.height *= this.style.lineHeight || 1.2;\n\t\t\t}\n\n\t\t\tthis._textInfo!.push(lineInfo);\n\n\t\t\t//lineInfo.offsetY += lineInfo.ascent;\n\t\t\toffsetY += lineInfo.height;\n\n\n\t\t});\n\n\t\tif (!styleRestored) {\n\t\t\tcontext.restore();\n\t\t\tghostContext.restore();\n\t\t}\n\n\t\t// Adjust chunk internal offsets\n\t\t$array.each(this._textInfo, (lineInfo) => {\n\t\t\t$array.each(lineInfo.textChunks, (chunk) => {\n\t\t\t\tchunk.offsetY += Math.round((lineInfo.height - chunk.height + (lineInfo.ascent - chunk.ascent)) / 2);\n\t\t\t});\n\t\t});\n\n\t\tcontext.restore();\n\t\tghostContext.restore();\n\n\t\treturn {\n\t\t\tleft: 0,\n\t\t\ttop: 0,\n\t\t\tright: 0,\n\t\t\tbottom: 0,\n\t\t};\n\t}\n\n}\n\n/**\n * @ignore\n */\nexport class CanvasImage extends CanvasDisplayObject implements IPicture {\n\tpublic width: number | undefined;\n\tpublic height: number | undefined;\n\tpublic image: HTMLImageElement | undefined;\n\tpublic tainted?: boolean;\n\n\tpublic shadowColor?: Color;\n\tpublic shadowBlur?: number;\n\tpublic shadowOffsetX?: number;\n\tpublic shadowOffsetY?: number;\n\tpublic shadowOpacity?: number;\n\n\tprotected _imageMask: HTMLCanvasElement | undefined;\n\n\tconstructor(renderer: CanvasRenderer, image: HTMLImageElement | undefined) {\n\t\tsuper(renderer);\n\t\tthis.image = image;\n\t}\n\n\tprotected _dispose(): void {\n\t\tsuper._dispose();\n\n\t\tif (this._imageMask) {\n\t\t\tclearCanvas(this._imageMask);\n\t\t}\n\t}\n\n\tgetLocalBounds(): IBounds {\n\t\tif (!this._localBounds) {\n\n\n\t\t\tlet w = 0;\n\t\t\tlet h = 0;\n\n\t\t\tif (this.width) {\n\t\t\t\tw = this.width;\n\t\t\t}\n\t\t\tif (this.height) {\n\t\t\t\th = this.height;\n\t\t\t}\n\n\t\t\tthis._localBounds = {\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0,\n\t\t\t\tright: w,\n\t\t\t\tbottom: h\n\t\t\t};\n\n\t\t\tthis._addBounds(this._localBounds);\n\t\t}\n\t\treturn this._localBounds;\n\t}\n\n\tprotected _render(parentLayer: CanvasLayer): void {\n\t\tsuper._render(parentLayer);\n\n\t\tif (this.image) {\n\t\t\tconst layer = this._layer || parentLayer;\n\n\t\t\tif (this.tainted === undefined) {\n\t\t\t\tthis.tainted = isTainted(this.image);\n\t\t\t\tlayer.tainted = true;\n\t\t\t}\n\n\t\t\tif (this.tainted && this._renderer._omitTainted) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (layer.dirty) {\n\n\t\t\t\tif (this.shadowColor) {\n\t\t\t\t\tlayer.context.shadowColor = this.shadowColor.toCSS(this.shadowOpacity || 1);\n\t\t\t\t}\n\t\t\t\tif (this.shadowBlur) {\n\t\t\t\t\tlayer.context.shadowBlur = this.shadowBlur;\n\t\t\t\t}\n\t\t\t\tif (this.shadowOffsetX) {\n\t\t\t\t\tlayer.context.shadowOffsetX = this.shadowOffsetX;\n\t\t\t\t}\n\t\t\t\tif (this.shadowOffsetY) {\n\t\t\t\t\tlayer.context.shadowOffsetY = this.shadowOffsetY;\n\t\t\t\t}\n\n\t\t\t\t// TODO should this round ?\n\t\t\t\tconst width = this.width || this.image.naturalWidth;\n\t\t\t\tconst height = this.height || this.image.naturalHeight;\n\n\t\t\t\tlayer.context.drawImage(this.image, 0, 0, width, height);\n\t\t\t}\n\n\t\t\tif (this.interactive && this._isInteractive()) {\n\t\t\t\tconst mask = this._getMask(this.image);\n\n\t\t\t\tthis._renderer._ghostContext.drawImage(mask, 0, 0);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic clear(): void {\n\t\tsuper.clear();\n\t\tthis.image = undefined;\n\t\tthis._imageMask = undefined;\n\t}\n\n\tprotected _getMask(image: HTMLImageElement): HTMLCanvasElement {\n\t\tif (this._imageMask === undefined) {\n\t\t\t// TODO should this round ?\n\t\t\tconst width = this.width || image.naturalWidth;\n\t\t\tconst height = this.height || image.naturalHeight;\n\n\t\t\t// We need to create a second canvas because destination-in clears out the entire canvas\n\t\t\tconst canvas = document.createElement(\"canvas\");\n\t\t\tcanvas.width = width;\n\t\t\tcanvas.height = height;\n\n\t\t\tconst context = canvas.getContext(\"2d\")!;\n\n\t\t\tcontext.imageSmoothingEnabled = false;\n\n\t\t\tcontext.fillStyle = this._getColorId();\n\t\t\tcontext.fillRect(0, 0, width, height);\n\n\t\t\tif (!isTainted(image)) {\n\t\t\t\tcontext.globalCompositeOperation = \"destination-in\";\n\t\t\t\tcontext.drawImage(image, 0, 0, width, height);\n\t\t\t}\n\n\t\t\tthis._imageMask = canvas;\n\t\t}\n\n\t\treturn this._imageMask;\n\t}\n\n}\n\n/**\n * @ignore\n */\nexport class CanvasRendererEvent<A> implements IRendererEvent<A> {\n\tpublic id: Id;\n\tpublic simulated: boolean = false;\n\tpublic native: boolean = true;\n\n\tconstructor(public event: A, public point: IPoint, public bbox: DOMRect) {\n\t\tif ($utils.supports(\"touchevents\") && event instanceof Touch) {\n\t\t\tthis.id = event.identifier;\n\n\t\t} else {\n\t\t\tthis.id = null;\n\t\t}\n\t}\n}\n\n/**\n * @ignore\n */\ninterface Event<Key extends keyof IRendererEvents> {\n\tobject: CanvasDisplayObject;\n\tcontext: unknown;\n\tcallback: (event: IRendererEvents[Key]) => void;\n\tdisposed: boolean;\n}\n\n/**\n * @ignore\n */\ninterface Events<Key extends keyof IRendererEvents> {\n\tdisposer: IDisposer;\n\tcallbacks: Array<Event<Key>>;\n\tdispatching: boolean;\n\tcleanup: boolean;\n}\n\n/**\n * @ignore\n */\nexport class CanvasRenderer extends ArrayDisposer implements IRenderer, IDisposer {\n\tpublic view: HTMLElement = document.createElement(\"div\");\n\tprotected _layerDom: HTMLElement = document.createElement(\"div\");\n\n\tpublic layers: Array<CanvasLayer> = [];\n\tpublic _dirtyLayers: Array<CanvasLayer> = [];\n\tpublic defaultLayer: CanvasLayer = this.getLayer(0);\n\n\tprotected _ghostView: HTMLCanvasElement;\n\tpublic _ghostContext: CanvasRenderingContext2D;\n\n\tprotected _patternCanvas: HTMLCanvasElement = document.createElement(\"canvas\");\n\tprotected _patternContext: CanvasRenderingContext2D = this._patternCanvas.getContext(\"2d\")!;\n\n\tprotected _width: number = 0;\n\tprotected _height: number = 0;\n\n\tprotected _clientWidth: number = 0;\n\tprotected _clientHeight: number = 0;\n\n\tpublic resolution: number;\n\tpublic interactionsEnabled: boolean = true;\n\n\tprotected _listeners: { [key: string]: CounterDisposer } = {};\n\tprotected _events: { [Key in keyof IRendererEvents]?: Events<Key> } = {};\n\n\tprotected _colorId: number = 0;\n\tprotected _colorMap: { [color: string]: CanvasDisplayObject } = {};\n\n\tpublic _forceInteractive: number = 0;\n\tpublic _omitTainted: boolean = false;\n\n\t// TODO this should store the Id as well\n\tpublic _hovering: Set<CanvasDisplayObject> = new Set();\n\tpublic _dragging: Array<{ id: Id, value: CanvasDisplayObject }> = [];\n\tpublic _mousedown: Array<{ id: Id, value: CanvasDisplayObject }> = [];\n\n\tprotected _lastPointerMoveEvent: { events: Array<IPointerEvent>, native: boolean } | undefined;\n\n\tpublic tapToActivate: boolean = false;\n\tpublic tapToActivateTimeout: number = 3000;\n\tpublic _touchActive: boolean = false;\n\tprotected _touchActiveTimeout?: number;\n\n\t/*protected _mouseMoveThrottler: Throttler = new Throttler(() => {\n\t\tthis._dispatchGlobalMousemove(this._lastPointerMoveEvent.event, this._lastPointerMoveEvent.native);\n\t});\n\t*/\n\n\tconstructor(resolution?: number) {\n\t\tsuper();\n\n\t\tif (resolution == null) {\n\t\t\tthis.resolution = window.devicePixelRatio;\n\t\t} else {\n\t\t\tthis.resolution = resolution;\n\t\t}\n\n\t\tthis.view.style.position = \"absolute\";\n\t\tthis.view.appendChild(this._layerDom);\n\n\t\tthis._disposers.push(new Disposer(() => {\n\t\t\t$object.each(this._events, (_key, events) => {\n\t\t\t\tevents.disposer.dispose();\n\t\t\t});\n\n\t\t\t$array.each(this.layers, (layer) => {\n\t\t\t\tclearCanvas(layer.view);\n\n\t\t\t\tif (layer.exportableView) {\n\t\t\t\t\tclearCanvas(layer.exportableView);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tclearCanvas(this._ghostView);\n\t\t\tclearCanvas(this._patternCanvas);\n\t\t}));\n\n\t\t// @todo : do the same for ghost\n\t\tthis._ghostView = document.createElement(\"canvas\");\n\t\tthis._ghostContext = this._ghostView.getContext(\"2d\", { alpha: false })!;\n\t\tthis._ghostContext.imageSmoothingEnabled = false;\n\n\t\tthis._ghostView.style.position = \"absolute\";\n\t\tthis._ghostView.style.top = \"0px\";\n\t\tthis._ghostView.style.left = \"0px\";\n\n\t\tthis._disposers.push($utils.addEventListener(this._ghostView, \"click\", (originalEvent: MouseEvent) => {\n\t\t\tconst event = this.getEvent(originalEvent);\n\t\t\tconst target = this._getHitTarget(event.point, event.bbox);\n\t\t\tconsole.debug(target);\n\t\t}));\n\n\t\t// Monitor for possible pixel ratio changes (when page is zoomed)\n\t\tthis._disposers.push($utils.onZoom(() => {\n\t\t\tif (resolution == null) {\n\t\t\t\tthis.resolution = window.devicePixelRatio;\n\t\t\t}\n\t\t}));\n\n\t\t// We need this in order top prevent default touch gestures when dragging\n\t\t// draggable elements\n\t\tif ($utils.supports(\"touchevents\")) {\n\t\t\tconst listener = (ev: any) => {\n\t\t\t\tif (this._dragging.length !== 0) {\n\t\t\t\t\t$array.eachContinue(this._dragging, (item) => {\n\t\t\t\t\t\tif (item.value.shouldCancelTouch()) {\n\t\t\t\t\t\t\tev.preventDefault();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// If touch down happends, delay touch out\n\t\t\t\tif (this._touchActiveTimeout) {\n\t\t\t\t\tthis._delayTouchDeactivate();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis._disposers.push($utils.addEventListener(window, \"touchstart\", listener, { passive: false }));\n\t\t\tthis._disposers.push($utils.addEventListener(this.view, \"touchstart\", listener, { passive: false }));\n\n\t\t\tthis._disposers.push($utils.addEventListener(this.view, \"touchmove\", () => {\n\t\t\t\t// If touch is moving, delay touch out\n\t\t\t\tif (this._touchActiveTimeout) {\n\t\t\t\t\tthis._delayTouchDeactivate();\n\t\t\t\t}\n\t\t\t}, { passive: true }));\n\n\t\t\tthis._disposers.push($utils.addEventListener(window, \"click\", (_ev: any) => {\n\t\t\t\tthis._touchActive = false;\n\t\t\t}, { passive: true }));\n\n\t\t\tthis._disposers.push($utils.addEventListener(this.view, \"click\", (_ev: any) => {\n\t\t\t\twindow.setTimeout(() => {\n\t\t\t\t\tthis._touchActive = true;\n\t\t\t\t\tthis._delayTouchDeactivate();\n\t\t\t\t}, 100);\n\t\t\t}, { passive: true }));\n\n\t\t}\n\n\t\t// Prevent scrolling of the window when hovering on \"wheelable\" object\n\t\tif ($utils.supports(\"wheelevents\")) {\n\t\t\tthis._disposers.push($utils.addEventListener(this.view, \"wheel\", (ev) => {\n\t\t\t\tlet prevent = false;\n\t\t\t\tthis._hovering.forEach((obj) => {\n\t\t\t\t\tif (obj.wheelable) {\n\t\t\t\t\t\tprevent = true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (prevent) {\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t}\n\t\t\t}, { passive: false }));\n\t\t}\n\n\t}\n\n\tprotected _delayTouchDeactivate(): void {\n\t\tif (this._touchActiveTimeout) {\n\t\t\tclearTimeout(this._touchActiveTimeout);\n\t\t}\n\t\tif (this.tapToActivateTimeout > 0) {\n\t\t\tthis._touchActiveTimeout = window.setTimeout(() => {\n\t\t\t\tthis._touchActive = false;\n\t\t\t}, this.tapToActivateTimeout);\n\t\t}\n\t}\n\n\tpublic get debugGhostView(): boolean {\n\t\treturn !!this._ghostView.parentNode;\n\t}\n\n\tpublic set debugGhostView(value: boolean) {\n\t\tif (value) {\n\t\t\tif (!this._ghostView.parentNode) {\n\t\t\t\tthis.view.appendChild(this._ghostView);\n\t\t\t}\n\n\t\t} else {\n\t\t\tif (this._ghostView.parentNode) {\n\t\t\t\tthis._ghostView.parentNode.removeChild(this._ghostView);\n\t\t\t}\n\t\t}\n\t}\n\n\tcreateLinearGradient(x1: number, y1: number, x2: number, y2: number): CanvasGradient {\n\t\treturn this.defaultLayer.context.createLinearGradient(x1, y1, x2, y2);\n\t}\n\n\tcreateRadialGradient(x1: number, y1: number, radius1: number, x2: number, y2: number, radius2: number): CanvasGradient {\n\t\treturn this.defaultLayer.context.createRadialGradient(x1, y1, radius1, x2, y2, radius2);\n\t}\n\n\tcreatePattern(graphics: CanvasGraphics, background: CanvasGraphics, repetition: string, width: number, height: number): CanvasPattern {\n\t\t// const patternCanvas = document.createElement(\"canvas\");\n\t\t// const patternContext = patternCanvas.getContext(\"2d\")!;\n\t\t// patternCanvas.width = width;\n\t\t// patternCanvas.height = height;\n\t\t// if (fill) {\n\t\t// \tpatternContext.fillStyle = fill.toCSS();\n\t\t// \tpatternContext.fillRect(0, 0, patternCanvas.width, patternCanvas.height);\n\t\t// }\n\n\t\t// const layer = {\n\t\t// \tview: patternCanvas,\n\t\t// \tcontext: patternContext,\n\t\t// \tvisible: true,\n\t\t// \torder: 0,\n\t\t// \twidth: width,\n\t\t// \theight: height,\n\t\t// \tdirty: true\n\t\t// };\n\n\t\t// // patternContext.arc(0, 0, 50, 0, .5 * Math.PI);\n\t\t// // patternContext.stroke();\n\n\t\t// image.targetLayer = layer;\n\t\t// image.render(layer);\n\n\t\t//this._layerDom.appendChild(patternCanvas);\n\n\t\tthis._patternCanvas.width = width;\n\t\tthis._patternCanvas.height = height;\n\n\t\tthis._patternContext.clearRect(0, 0, width, height);\n\n\t\t// patternCanvas.style.width = width * this.resolution + \"px\";\n\t\t// patternCanvas.style.height = height * this.resolution + \"px\";\n\n\t\tbackground.renderDetached(this._patternContext);\n\t\tgraphics.renderDetached(this._patternContext);\n\n\t\treturn this._patternContext.createPattern(this._patternCanvas, repetition)!;\n\t}\n\n\tmakeContainer(): CanvasContainer {\n\t\treturn new CanvasContainer(this);\n\t}\n\n\tmakeGraphics(): CanvasGraphics {\n\t\treturn new CanvasGraphics(this);\n\t}\n\n\tmakeText(text: string, style: CanvasTextStyle): CanvasText {\n\t\treturn new CanvasText(this, text, style);\n\t}\n\n\tmakeTextStyle(): CanvasTextStyle {\n\t\treturn new CanvasTextStyle();\n\t}\n\n\tmakeRadialText(text: string, style: CanvasTextStyle): CanvasRadialText {\n\t\treturn new CanvasRadialText(this, text, style);\n\t}\n\n\tmakePicture(image: HTMLImageElement | undefined): CanvasImage {\n\t\treturn new CanvasImage(this, image);\n\t}\n\n\tresize(width: number, height: number): void {\n\t\tthis._clientWidth = width;\n\t\tthis._clientHeight = height;\n\t\tthis._width = Math.floor(width * this.resolution);\n\t\tthis._height = Math.floor(height * this.resolution);\n\n\t\t$array.each(this.layers, (layer) => {\n\t\t\tif (layer) {\n\t\t\t\tlayer.dirty = true;\n\n\t\t\t\tif (layer.width != null) {\n\t\t\t\t\tlayer.view.width = layer.width;\n\t\t\t\t\tlayer.view.style.width = layer.width + \"px\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlayer.view.width = this._width;\n\t\t\t\t\tlayer.view.style.width = width + \"px\";\n\t\t\t\t}\n\n\t\t\t\tif (layer.height != null) {\n\t\t\t\t\tlayer.view.height = layer.height;\n\t\t\t\t\tlayer.view.style.height = layer.height + \"px\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlayer.view.height = this._height;\n\t\t\t\t\tlayer.view.style.height = height + \"px\";\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// @todo: do the same for ghost canvases\n\t\tthis._ghostView.width = this._width;\n\t\tthis._ghostView.height = this._height;\n\t\tthis._ghostView.style.width = width + \"px\";\n\t\tthis._ghostView.style.height = height + \"px\";\n\n\t\tthis.view.style.width = width + \"px\";\n\t\tthis.view.style.height = height + \"px\";\n\t}\n\n\tprivate createDetachedLayer(): CanvasLayer {\n\t\tconst view = document.createElement(\"canvas\");\n\t\tconst context = view.getContext(\"2d\")!;\n\t\tconst layer = {\n\t\t\tview: view,\n\t\t\tcontext: context,\n\t\t\torder: 0,\n\t\t\tvisible: true,\n\t\t\twidth: undefined,\n\t\t\theight: undefined,\n\t\t\tdirty: true,\n\t\t\ttainted: false\n\t\t};\n\n\t\tview.style.position = \"absolute\";\n\t\tview.style.top = \"0px\";\n\t\tview.style.left = \"0px\";\n\n\t\treturn layer;\n\t}\n\n\tgetLayerByOrder(order: number): CanvasLayer | undefined {\n\t\tconst layers = this.layers;\n\t\tconst length = layers.length;\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst layer = layers[i];\n\t\t\tif (layer.order == order) {\n\t\t\t\treturn layer;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetLayer(order: number, visible: boolean = true): CanvasLayer {\n\t\tlet existingLayer = this.getLayerByOrder(order);\n\t\tif (existingLayer) {\n\t\t\treturn existingLayer;\n\t\t}\n\n\t\tconst layer = this.createDetachedLayer();\n\t\tlayer.order = order;\n\t\tlayer.visible = visible;\n\n\t\tif (layer.visible && this._width) {\n\t\t\tlayer.view.width = this._width;\n\t\t\tlayer.view.style.width = this._clientWidth + \"px\";\n\t\t\tlayer.view.height = this._height;\n\t\t\tlayer.view.style.height = this._clientHeight + \"px\";\n\t\t}\n\n\t\tconst layers = this.layers;\n\n\t\tlayers.push(layer);\n\n\t\tlayers.sort((a, b) => {\n\t\t\tif (a.order > b.order) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\telse if (a.order < b.order) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\n\t\tconst length = layers.length;\n\t\tconst layerIndex = $array.indexOf(layers, layer);\n\t\tlet next;\n\n\t\tfor (let i = layerIndex + 1; i < length; i++) {\n\t\t\tif (layers[i].visible) {\n\t\t\t\tnext = layers[i];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (layer.visible) {\n\t\t\tif (next === undefined) {\n\t\t\t\tthis._layerDom.appendChild(layer.view);\n\n\t\t\t} else {\n\t\t\t\tthis._layerDom.insertBefore(layer.view, next.view);\n\t\t\t}\n\t\t}\n\n\t\treturn layer;\n\t}\n\n\trender(root: CanvasDisplayObject): void {\n\n\t\tthis._dirtyLayers.length = 0;\n\n\t\t$array.each(this.layers, (layer) => {\n\t\t\tif (layer) {\n\t\t\t\tif (layer.dirty && layer.visible) {\n\t\t\t\t\tconst context = layer.context;\n\n\t\t\t\t\tthis._dirtyLayers.push(layer);\n\n\t\t\t\t\tcontext.save();\n\t\t\t\t\tcontext.clearRect(0, 0, this._width, this._height);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis._ghostContext.save();\n\t\t//this._ghostContext.clearRect(0, 0, this._width, this._height);\n\t\t//this._ghostContext.beginPath();\n\t\tthis._ghostContext.fillStyle = '#000';\n\t\tthis._ghostContext.fillRect(0, 0, this._width, this._height);\n\n\t\troot.render(this.defaultLayer);\n\n\t\tthis._ghostContext.restore();\n\n\t\t//setTimeout(() => {\n\n\t\t// Remove this after the Chrome bug is fixed:\n\t\t// https://bugs.chromium.org/p/chromium/issues/detail?id=1279394\n\t\t$array.each(this.layers, (layer) => {\n\t\t\tif (layer) {\n\t\t\t\tconst context = layer.context;\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.moveTo(0, 0);\n\t\t\t\tcontext.stroke();\n\t\t\t}\n\t\t});\n\n\t\t$array.each(this._dirtyLayers, (layer) => {\n\t\t\tlayer.context.restore();\n\t\t\tlayer.dirty = false;\n\t\t});\n\t\t//}, 100)\n\n\t\tif (this._hovering.size && this._lastPointerMoveEvent) {\n\t\t\t//this._mouseMoveThrottler.run();\n\t\t\tconst native = this._lastPointerMoveEvent.native;\n\n\t\t\t$array.each(this._lastPointerMoveEvent.events, (event) => {\n\t\t\t\tthis._dispatchGlobalMousemove(event, native);\n\t\t\t});\n\t\t}\n\t}\n\n\tpaintId(obj: CanvasDisplayObject): string {\n\t\tconst id = distributeId(++this._colorId);\n\t\tconst color = Color.fromHex(id).toCSS();\n\t\tthis._colorMap[color] = obj;\n\t\treturn color;\n\t}\n\n\t_removeObject(obj: CanvasDisplayObject): void {\n\t\tif (obj._colorId !== undefined) {\n\t\t\tdelete this._colorMap[obj._colorId];\n\t\t}\n\t}\n\n\t// protected _identifyObjectByColor(colorId: number): CanvasDisplayObject | undefined {\n\t// \treturn this._colorMap[colorId];\n\t// }\n\n\tpublic getEvent<A extends IPointerEvent>(originalEvent: A, adjustPoint: boolean = true): CanvasRendererEvent<A> {\n\t\tconst bbox: DOMRect = adjustPoint ? this.view.getBoundingClientRect() : new DOMRect(0, 0, 0, 0);\n\n\t\treturn new CanvasRendererEvent(\n\t\t\toriginalEvent,\n\t\t\t(originalEvent.clientX || originalEvent.clientY ? {\n\t\t\t\tx: originalEvent.clientX - (originalEvent.clientX ? bbox.left : 0),\n\t\t\t\ty: originalEvent.clientY - (originalEvent.clientY ? bbox.top : 0),\n\t\t\t} : {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0\n\t\t\t}),\n\t\t\tbbox,\n\t\t);\n\t}\n\n\t_getHitTarget(point: IPoint, bbox: DOMRect): CanvasDisplayObject | undefined | false {\n\t\tif (point.x < 0 || point.x > bbox.width || point.y < 0 || point.y > bbox.height) {\n\t\t\treturn;\n\t\t}\n\t\telse {\n\t\t\tconst pixel = this._ghostContext.getImageData(\n\t\t\t\t// TODO should this round ?\n\t\t\t\tMath.round((point.x / bbox.width) * this._width),\n\t\t\t\tMath.round((point.y / bbox.height) * this._height),\n\t\t\t\t1,\n\t\t\t\t1\n\t\t\t);\n\n\t\t\tif (pixel.data[0] === 0 && pixel.data[1] === 0 && pixel.data[2] === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst colorId = Color.fromRGB(pixel.data[0], pixel.data[1], pixel.data[2]).toCSS();\n\t\t\tconst hit = this._colorMap[colorId];\n\n\t\t\treturn hit;\n\t\t}\n\t}\n\n\t_withEvents<Key extends keyof IRendererEvents>(key: Key, f: (events: Events<Key>) => void): void {\n\t\tconst events = this._events[key] as Events<Key> | undefined;\n\n\t\tif (events !== undefined) {\n\t\t\tevents.dispatching = true;\n\n\t\t\ttry {\n\t\t\t\tf(events);\n\n\t\t\t} finally {\n\t\t\t\tevents.dispatching = false;\n\n\t\t\t\tif (events.cleanup) {\n\t\t\t\t\tevents.cleanup = false;\n\n\t\t\t\t\t$array.keepIf(events.callbacks, (callback) => {\n\t\t\t\t\t\treturn !callback.disposed;\n\t\t\t\t\t});\n\n\t\t\t\t\tif (events.callbacks.length === 0) {\n\t\t\t\t\t\tevents.disposer.dispose();\n\t\t\t\t\t\tdelete this._events[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_dispatchEventAll<Key extends keyof IRendererEvents>(key: Key, event: IRendererEvents[Key]): void {\n\t\tif (!this.interactionsEnabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._withEvents(key, (events) => {\n\t\t\t$array.each(events.callbacks, (callback) => {\n\t\t\t\tif (!callback.disposed) {\n\t\t\t\t\tcallback.callback.call(callback.context, event);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\t_dispatchEvent<Key extends keyof IRendererEvents>(key: Key, target: CanvasDisplayObject, event: IRendererEvents[Key]): boolean {\n\t\tif (!this.interactionsEnabled) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet dispatched = false;\n\n\t\tthis._withEvents(key, (events) => {\n\t\t\t$array.each(events.callbacks, (callback) => {\n\t\t\t\tif (!callback.disposed && callback.object === target) {\n\t\t\t\t\tcallback.callback.call(callback.context, event);\n\t\t\t\t\tdispatched = true;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\treturn dispatched;\n\t}\n\n\t_dispatchMousedown(originalEvent: IPointerEvent): void {\n\n\t\tconst button = (<PointerEvent>originalEvent).button;\n\t\tif (button != 0 && button != 2 && button != 1 && button !== undefined) {\n\t\t\t// Ignore non-primary mouse buttons\n\t\t\treturn;\n\t\t}\n\n\t\tconst event = this.getEvent(originalEvent);\n\t\tconst target = this._getHitTarget(event.point, event.bbox);\n\n\n\t\tif (target) {\n\t\t\tconst id = event.id;\n\n\t\t\tlet dragged = false;\n\n\t\t\teachTargets(target, (obj) => {\n\t\t\t\tconst info = { id: id, value: obj };\n\n\t\t\t\tthis._mousedown.push(info);\n\n\t\t\t\tif (!dragged && this._dispatchEvent(\"pointerdown\", obj, event)) {\n\t\t\t\t\t// Only dispatch the first element which matches\n\t\t\t\t\tdragged = true;\n\n\t\t\t\t\tconst has = this._dragging.some((x) => {\n\t\t\t\t\t\treturn x.value === obj && x.id === id;\n\t\t\t\t\t});\n\n\t\t\t\t\tif (!has) {\n\t\t\t\t\t\tthis._dragging.push(info);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t});\n\t\t}\n\t}\n\n\t_dispatchGlobalMousemove(originalEvent: IPointerEvent, native: boolean): void {\n\t\tconst event = this.getEvent(originalEvent);\n\n\t\tconst target = this._getHitTarget(event.point, event.bbox);\n\t\tevent.native = native;\n\n\t\tif (target) {\n\t\t\tthis._hovering.forEach((obj) => {\n\t\t\t\tif (!obj.contains(target)) {\n\t\t\t\t\tthis._hovering.delete(obj);\n\t\t\t\t\tif (obj.cursorOverStyle) {\n\t\t\t\t\t\t$utils.setStyle(document.body, \"cursor\", obj._replacedCursorStyle!);\n\t\t\t\t\t}\n\t\t\t\t\tthis._dispatchEvent(\"pointerout\", obj, event);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (event.native) {\n\t\t\t\teachTargets(target, (obj) => {\n\t\t\t\t\tif (!this._hovering.has(obj)) {\n\t\t\t\t\t\tthis._hovering.add(obj);\n\t\t\t\t\t\tif (obj.cursorOverStyle) {\n\t\t\t\t\t\t\tobj._replacedCursorStyle = $utils.getStyle(document.body, \"cursor\");\n\t\t\t\t\t\t\t$utils.setStyle(document.body, \"cursor\", obj.cursorOverStyle);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._dispatchEvent(\"pointerover\", obj, event);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//} else if (target === false) {\n\t\t} else {\n\t\t\tthis._hovering.forEach((obj) => {\n\t\t\t\tif (obj.cursorOverStyle) {\n\t\t\t\t\t$utils.setStyle(document.body, \"cursor\", obj._replacedCursorStyle!);\n\t\t\t\t}\n\t\t\t\tthis._dispatchEvent(\"pointerout\", obj, event);\n\t\t\t});\n\n\t\t\tthis._hovering.clear();\n\t\t}\n\t\tthis._dispatchEventAll(\"globalpointermove\", event);\n\t}\n\n\t_dispatchGlobalMouseup(originalEvent: IPointerEvent, native: boolean): void {\n\t\tconst event = this.getEvent(originalEvent);\n\t\tevent.native = native;\n\t\t//const target = this._getHitTarget(event.point);\n\t\tthis._dispatchEventAll(\"globalpointerup\", event);\n\t}\n\n\t_dispatchDragMove(originalEvent: IPointerEvent): void {\n\t\tif (this._dragging.length !== 0) {\n\t\t\tconst event = this.getEvent(originalEvent);\n\t\t\tconst id = event.id;\n\n\t\t\tthis._dragging.forEach((obj) => {\n\t\t\t\tif (obj.id === id) {\n\t\t\t\t\tthis._dispatchEvent(\"pointermove\", obj.value, event);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t_dispatchDragEnd(originalEvent: IPointerEvent): void {\n\t\tconst button = (<PointerEvent>originalEvent).button;\n\t\tlet clickevent: \"click\" | \"rightclick\" | \"middleclick\";\n\t\tif (button == 0 || button === undefined) {\n\t\t\tclickevent = \"click\";\n\t\t}\n\t\telse if (button == 2) {\n\t\t\tclickevent = \"rightclick\";\n\t\t}\n\t\telse if (button == 1) {\n\t\t\tclickevent = \"middleclick\";\n\t\t}\n\t\telse {\n\t\t\t// Ignore non-primary mouse buttons\n\t\t\treturn;\n\t\t}\n\n\t\tconst event = this.getEvent(originalEvent);\n\t\tconst id = event.id;\n\n\t\tif (this._mousedown.length !== 0) {\n\t\t\tconst target = this._getHitTarget(event.point, event.bbox);\n\n\t\t\tif (target) {\n\t\t\t\tthis._mousedown.forEach((obj) => {\n\t\t\t\t\tif (obj.id === id && obj.value.contains(target)) {\n\t\t\t\t\t\tthis._dispatchEvent(clickevent, obj.value, event);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis._mousedown.length = 0;\n\t\t}\n\n\t\tif (this._dragging.length !== 0) {\n\t\t\tthis._dragging.forEach((obj) => {\n\t\t\t\tif (obj.id === id) {\n\t\t\t\t\tthis._dispatchEvent(\"pointerup\", obj.value, event);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis._dragging.length = 0;\n\t\t}\n\t}\n\n\t_dispatchDoubleClick(originalEvent: IPointerEvent): void {\n\t\tconst event = this.getEvent(originalEvent);\n\t\tconst target = this._getHitTarget(event.point, event.bbox);\n\n\t\tif (target) {\n\t\t\teachTargets(target, (obj) => {\n\t\t\t\tif (this._dispatchEvent(\"dblclick\", obj, event)) {\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t_dispatchWheel(originalEvent: WheelEvent): void {\n\t\tconst event = this.getEvent(originalEvent);\n\t\tconst target = this._getHitTarget(event.point, event.bbox);\n\n\t\tif (target) {\n\t\t\teachTargets(target, (obj) => {\n\t\t\t\tif (this._dispatchEvent(\"wheel\", obj, event)) {\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t_makeSharedEvent(key: string, f: () => IDisposer): IDisposer {\n\t\tif (this._listeners[key] === undefined) {\n\t\t\tconst listener = f();\n\n\t\t\tthis._listeners[key] = new CounterDisposer(() => {\n\t\t\t\tdelete this._listeners[key];\n\t\t\t\tlistener.dispose();\n\t\t\t});\n\t\t}\n\n\t\treturn this._listeners[key].increment();\n\t}\n\n\t_onPointerEvent(name: string, f: (event: Array<IPointerEvent>, native: boolean) => void): IDisposer {\n\t\tlet native = false;\n\t\tlet timer: number | null = null;\n\n\t\tfunction clear() {\n\t\t\ttimer = null;\n\t\t\tnative = false;\n\t\t}\n\n\t\treturn new MultiDisposer([\n\t\t\tnew Disposer(() => {\n\t\t\t\tif (timer !== null) {\n\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t}\n\n\t\t\t\tclear();\n\t\t\t}),\n\n\t\t\t$utils.addEventListener(this.view, $utils.getRendererEvent(name), (_) => {\n\t\t\t\tnative = true;\n\n\t\t\t\tif (timer !== null) {\n\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t}\n\n\t\t\t\ttimer = window.setTimeout(clear, 0);\n\t\t\t}),\n\n\t\t\tonPointerEvent(window, name, (ev) => {\n\t\t\t\tif (timer !== null) {\n\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t\ttimer = null;\n\t\t\t\t}\n\n\t\t\t\tf(ev, native);\n\n\t\t\t\tnative = false;\n\t\t\t}),\n\t\t]);\n\t}\n\n\t// This ensures that only a single DOM event is added (e.g. only a single mousemove event listener)\n\t_initEvent(key: keyof IRendererEvents): IDisposer | undefined {\n\t\tswitch (key) {\n\t\t\tcase \"globalpointermove\":\n\t\t\tcase \"pointerover\":\n\t\t\tcase \"pointerout\":\n\t\t\t\treturn this._makeSharedEvent(\"pointermove\", () => {\n\t\t\t\t\tconst listener = (events: Array<IPointerEvent>, native: boolean) => {\n\t\t\t\t\t\tthis._lastPointerMoveEvent = { events, native };\n\n\t\t\t\t\t\t$array.each(events, (event) => {\n\t\t\t\t\t\t\tthis._dispatchGlobalMousemove(event, native);\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\n\t\t\t\t\treturn new MultiDisposer([\n\t\t\t\t\t\tthis._onPointerEvent(\"pointerdown\", listener),\n\t\t\t\t\t\tthis._onPointerEvent(\"pointermove\", listener),\n\t\t\t\t\t]);\n\t\t\t\t});\n\t\t\tcase \"globalpointerup\":\n\t\t\t\treturn this._makeSharedEvent(\"pointerup\", () => {\n\t\t\t\t\tvar mouseup = this._onPointerEvent(\"pointerup\", (events, native) => {\n\t\t\t\t\t\t$array.each(events, (event) => {\n\t\t\t\t\t\t\tthis._dispatchGlobalMouseup(event, native);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis._lastPointerMoveEvent = { events, native };\n\t\t\t\t\t});\n\n\t\t\t\t\tvar pointercancel = this._onPointerEvent(\"pointercancel\", (events, native) => {\n\t\t\t\t\t\t$array.each(events, (event) => {\n\t\t\t\t\t\t\tthis._dispatchGlobalMouseup(event, native);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis._lastPointerMoveEvent = { events, native };\n\t\t\t\t\t});\n\n\t\t\t\t\treturn new Disposer(() => {\n\t\t\t\t\t\tmouseup.dispose();\n\t\t\t\t\t\tpointercancel.dispose();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\tcase \"click\":\n\t\t\tcase \"rightclick\":\n\t\t\tcase \"middleclick\":\n\t\t\tcase \"pointerdown\":\n\t\t\t/*\n\t\t\t\treturn this._makeSharedEvent(\"pointerdown\", () => {\n\t\t\t\t\treturn this._onPointerEvent(\"pointerdown\", (event, native) => {\n\t\t\t\t\t\tthis._lastPointerMoveEvent = { event, native };\n\t\t\t\t\t\tthis._dispatchMousedown(event)\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t*/\n\t\t\tcase \"pointermove\":\n\t\t\tcase \"pointerup\":\n\t\t\t\treturn this._makeSharedEvent(\"pointerdown\", () => {\n\t\t\t\t\t//const throttler = new Throttler();\n\n\t\t\t\t\tconst mousedown = onPointerEvent(this.view, \"pointerdown\", (events) => {\n\t\t\t\t\t\t$array.each(events, (ev) => {\n\t\t\t\t\t\t\tthis._dispatchMousedown(ev);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\t// TODO handle throttling properly for multitouch\n\t\t\t\t\tconst mousemove = this._onPointerEvent(\"pointermove\", (ev: Array<IPointerEvent>) => {\n\t\t\t\t\t\t//throttler.throttle(() => {\n\t\t\t\t\t\t$array.each(ev, (ev) => {\n\t\t\t\t\t\t\tthis._dispatchDragMove(ev);\n\t\t\t\t\t\t});\n\t\t\t\t\t\t//});\n\t\t\t\t\t});\n\n\t\t\t\t\tconst mouseup = this._onPointerEvent(\"pointerup\", (ev: Array<IPointerEvent>) => {\n\t\t\t\t\t\t$array.each(ev, (ev) => {\n\t\t\t\t\t\t\tthis._dispatchDragEnd(ev);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tconst pointercancel = this._onPointerEvent(\"pointercancel\", (ev: Array<IPointerEvent>) => {\n\t\t\t\t\t\t$array.each(ev, (ev) => {\n\t\t\t\t\t\t\tthis._dispatchDragEnd(ev);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\treturn new Disposer(() => {\n\t\t\t\t\t\tmousedown.dispose();\n\t\t\t\t\t\tmousemove.dispose();\n\t\t\t\t\t\tmouseup.dispose();\n\t\t\t\t\t\tpointercancel.dispose();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\tcase \"dblclick\":\n\t\t\t\treturn this._makeSharedEvent(\"dblclick\", () => {\n\t\t\t\t\treturn this._onPointerEvent(\"dblclick\", (ev) => {\n\t\t\t\t\t\t$array.each(ev, (ev) => {\n\t\t\t\t\t\t\tthis._dispatchDoubleClick(ev);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\tcase \"wheel\":\n\t\t\t\treturn this._makeSharedEvent(\"wheel\", () => {\n\t\t\t\t\treturn $utils.addEventListener(window, $utils.getRendererEvent(\"wheel\"), (event: WheelEvent) => {\n\t\t\t\t\t\tthis._dispatchWheel(event);\n\t\t\t\t\t}, { passive: false });\n\t\t\t\t});\n\t\t}\n\t}\n\n\t_addEvent<C, Key extends keyof IRendererEvents>(object: CanvasDisplayObject, key: Key, callback: (this: C, event: IRendererEvents[Key]) => void, context?: C): IDisposer {\n\t\tlet events: Events<Key> | undefined = this._events[key] as any;\n\n\t\tif (events === undefined) {\n\t\t\tevents = this._events[key] = {\n\t\t\t\tdisposer: this._initEvent(key)!,\n\t\t\t\tcallbacks: [],\n\t\t\t\tdispatching: false,\n\t\t\t\tcleanup: false,\n\t\t\t};\n\t\t}\n\n\t\tconst listener = { object, context, callback, disposed: false };\n\n\t\tevents!.callbacks.push(listener);\n\n\t\treturn new Disposer(() => {\n\t\t\tlistener.disposed = true;\n\n\t\t\tif (events!.dispatching) {\n\t\t\t\tevents!.cleanup = true;\n\n\t\t\t} else {\n\t\t\t\t$array.removeFirst(events!.callbacks, listener);\n\n\t\t\t\tif (events!.callbacks.length === 0) {\n\t\t\t\t\tevents!.disposer.dispose();\n\t\t\t\t\tdelete this._events[key];\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic getCanvas(root: CanvasDisplayObject, options?: ICanvasOptions): HTMLCanvasElement {\n\n\t\t// Make sure everything is rendered\n\t\tthis.render(root);\n\n\t\tif (!options) {\n\t\t\toptions = {};\n\t\t}\n\n\t\tlet scale: number = this.resolution;\n\n\t\t// Check if we need to scale\n\t\tif (options.minWidth && (options.minWidth > this._width)) {\n\t\t\tlet minScale = options.minWidth / this._width;\n\t\t\tif (minScale > scale) {\n\t\t\t\tscale = minScale * this.resolution;\n\t\t\t}\n\t\t}\n\n\t\tif (options.minHeight && (options.minHeight > this._height)) {\n\t\t\tlet minScale = options.minHeight / this._height;\n\t\t\tif (minScale > scale) {\n\t\t\t\tscale = minScale * this.resolution;\n\t\t\t}\n\t\t}\n\n\t\tif (options.maxWidth && (options.maxWidth < this._width)) {\n\t\t\tlet maxScale = options.maxWidth / this._width;\n\t\t\tif (maxScale < scale) {\n\t\t\t\tscale = maxScale * this.resolution;\n\t\t\t}\n\t\t}\n\n\t\tif (options.maxHeight && (options.maxHeight > this._height)) {\n\t\t\tlet maxScale = options.maxHeight / this._height;\n\t\t\tif (maxScale < scale) {\n\t\t\t\tscale = maxScale * this.resolution;\n\t\t\t}\n\t\t}\n\n\t\t// Check if we need to compensate for pixel ratio\n\t\tif (options.maintainPixelRatio) {\n\t\t\tscale /= this.resolution;\n\t\t}\n\n\t\t// Init list canvases to remove from DOM after export\n\t\tconst canvases: HTMLCanvasElement[] = [];\n\n\t\t// Set up new canvas for export\n\t\tlet forceRender = false;\n\t\tlet canvasWidth = this._width;\n\t\tlet canvasHeight = this._height;\n\t\tconst canvas = document.createElement(\"canvas\");\n\t\tif (scale != this.resolution) {\n\t\t\tforceRender = true;\n\t\t\tcanvasWidth = this._width * scale / this.resolution;\n\t\t\tcanvasHeight = this._height * scale / this.resolution;\n\t\t}\n\n\t\tcanvas.width = canvasWidth;\n\t\tcanvas.height = canvasHeight;\n\n\t\t// Add to DOM so it inherits CSS\n\t\tcanvas.style.position = \"fixed\";\n\t\tcanvas.style.top = \"-10000px\";\n\t\tthis.view.appendChild(canvas);\n\t\tcanvases.push(canvas);\n\n\t\t// Context\n\t\tconst context = canvas.getContext(\"2d\")!;\n\n\t\tlet width = 0;\n\t\tlet height = 0;\n\t\tlet needRerender = false;\n\n\t\t$array.each(this.layers, (layer) => {\n\t\t\tif (layer && layer.visible) {\n\t\t\t\tif (layer.tainted || forceRender) {\n\t\t\t\t\tneedRerender = true;\n\n\t\t\t\t\tlayer.exportableView = layer.view;\n\t\t\t\t\tlayer.exportableContext = layer.context;\n\n\t\t\t\t\tlayer.view = document.createElement(\"canvas\");\n\n\t\t\t\t\t// Add to DOM so it inherits CSS\n\t\t\t\t\tlayer.view.style.position = \"fixed\";\n\t\t\t\t\tlayer.view.style.top = \"-10000px\";\n\t\t\t\t\tthis.view.appendChild(layer.view);\n\t\t\t\t\tcanvases.push(layer.view);\n\n\t\t\t\t\tlayer.view.width = canvasWidth;\n\t\t\t\t\tlayer.view.height = canvasHeight;\n\n\t\t\t\t\tlayer.context = layer.view.getContext(\"2d\")!;\n\n\t\t\t\t\tlayer.dirty = true;\n\t\t\t\t\tlayer.scale = scale;\n\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (needRerender) {\n\t\t\tthis._omitTainted = true;\n\t\t\tthis.render(root);\n\t\t\tthis._omitTainted = false;\n\t\t}\n\n\t\t$array.each(this.layers, (layer) => {\n\t\t\tif (layer && layer.visible) {\n\n\t\t\t\t// Layer is fine. Just plop it into our target canvas\n\t\t\t\tcontext.drawImage(layer.view, 0, 0);\n\n\t\t\t\t// Restore layer original canvas\n\t\t\t\tif (layer.exportableView) {\n\t\t\t\t\tlayer.view = layer.exportableView;\n\t\t\t\t\tlayer.exportableView = undefined;\n\t\t\t\t}\n\n\t\t\t\tif (layer.exportableContext) {\n\t\t\t\t\tlayer.context = layer.exportableContext;\n\t\t\t\t\tlayer.exportableContext = undefined;\n\t\t\t\t}\n\n\t\t\t\tif (width < layer.view.clientWidth) {\n\t\t\t\t\twidth = layer.view.clientWidth;\n\t\t\t\t}\n\t\t\t\tif (height < layer.view.clientHeight) {\n\t\t\t\t\theight = layer.view.clientHeight;\n\t\t\t\t}\n\n\t\t\t\tlayer.scale = undefined;\n\t\t\t}\n\t\t});\n\n\t\tcanvas.style.width = width + \"px\";\n\t\tcanvas.style.height = height + \"px\";\n\n\t\t$array.each(canvases, (canvas) => {\n\t\t\tcanvas.style.position = \"\";\n\t\t\tcanvas.style.top = \"\";\n\t\t\tthis.view.removeChild(canvas);\n\t\t})\n\n\t\treturn canvas;\n\t}\n\n}\n\n/**\n * @ignore\n */\nexport interface CanvasLayer extends ILayer {\n\tview: HTMLCanvasElement;\n\tcontext: CanvasRenderingContext2D;\n\ttainted?: boolean;\n\texportableView?: HTMLCanvasElement;\n\texportableContext?: CanvasRenderingContext2D;\n\tscale?: number;\n}\n", "import type { IAnimation } from \"./util/Animation\";\nimport type { Entity } from \"./util/Entity\";\nimport type { Sprite } from \"./render/Sprite\";\nimport type { Theme } from \"./Theme\";\nimport type { IPoint } from \"./util/IPoint\";\nimport type { IRenderer, IPointerEvent } from \"./render/backend/Renderer\";\nimport type { Timezone } from \"./util/Timezone\";\n\nimport { Container } from \"./render/Container\";\nimport { Text } from \"./render/Text\";\nimport { HorizontalLayout } from \"./render/HorizontalLayout\";\nimport { VerticalLayout } from \"./render/VerticalLayout\";\nimport { GridLayout } from \"./render/GridLayout\";\nimport { IDisposer, Disposer } from \"./util/Disposer\";\nimport { ResizeSensor } from \"./util/ResizeSensor\";\nimport { InterfaceColors } from \"./util/InterfaceColors\";\nimport { Graphics } from \"./render/Graphics\";\nimport { Rectangle } from \"./render/Rectangle\";\nimport { Tooltip } from \"./render/Tooltip\";\nimport { NumberFormatter } from \"./util/NumberFormatter\";\nimport { DateFormatter } from \"./util/DateFormatter\";\nimport { DurationFormatter } from \"./util/DurationFormatter\";\nimport { ILocale, Language } from \"./util/Language\";\nimport { Events, EventDispatcher } from \"./util/EventDispatcher\";\nimport { DefaultTheme } from \"../themes/DefaultTheme\";\nimport { CanvasRenderer } from \"./render/backend/CanvasRenderer\";\nimport { p100, percent } from \"./util/Percent\";\nimport { color } from \"./util/Color\";\nimport { populateString } from \"./util/PopulateString\";\nimport { registry } from \"./Registry\";\n\nimport * as $order from \"./util/Order\";\nimport * as $array from \"./util/Array\";\nimport * as $object from \"./util/Object\";\nimport * as $utils from \"./util/Utils\";\nimport * as $type from \"./util/Type\";\n\n\nimport en from \"../../locales/en\";\n\n\nfunction rAF(fps: number | undefined, callback: (currentTime: number) => void): void {\n\tif (fps == null) {\n\t\trequestAnimationFrame(callback);\n\n\t} else {\n\t\tsetTimeout(() => {\n\t\t\trequestAnimationFrame(callback);\n\t\t}, 1000 / fps);\n\t}\n}\n\n\n/**\n * @ignore\n */\ninterface IParent extends Entity {\n\t_prepareChildren(): void;\n\t_updateChildren(): void;\n}\n\ninterface IBounds extends Entity {\n\tdepth(): number;\n\t_updateBounds(): void;\n}\n\n\nexport interface IRootEvents {\n\tframestarted: {\n\t\ttimestamp: number;\n\t};\n\tframeended: {\n\t\ttimestamp: number;\n\t};\n}\n\n\nexport interface IRootSettings {\n\tuseSafeResolution?: boolean;\n}\n\n\n// TODO implement Disposer\n/**\n * Root element of the chart.\n *\n * @see {@link https://www.amcharts.com/docs/v5/getting-started/#Root_element} for more info\n */\nexport class Root implements IDisposer {\n\n\t/**\n\t * A reference to original chart container (div element).\n\t */\n\tpublic dom: HTMLElement;\n\tpublic _inner: HTMLElement;\n\n\tprotected _isDirty: boolean = false;\n\tprotected _isDirtyParents: boolean = false;\n\tprotected _dirty: { [id: number]: Entity } = {};\n\tprotected _dirtyParents: { [id: number]: IParent } = {};\n\tprotected _dirtyBounds: { [id: number]: IBounds } = {};\n\tprotected _dirtyPositions: { [id: number]: Sprite } = {};\n\n\tprotected _ticker: ((currentTime: number) => void) | null = null;\n\tprotected _tickers: Array<(currentTime: number) => void> = [];\n\n\t/**\n\t * Root's event dispatcher.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/events/} for more info\n\t */\n\tpublic events: EventDispatcher<Events<this, IRootEvents>> = new EventDispatcher();\n\n\t/**\n\t * @ignore\n\t * @todo needs description\n\t */\n\tpublic animationTime: number | null = null;\n\n\tprivate _animations: Array<IAnimation> = [];\n\n\tpublic _renderer: IRenderer;\n\n\tpublic _rootContainer!: Container;\n\n\t/**\n\t * Main content container.\n\t */\n\tpublic container!: Container;\n\n\t/**\n\t * A [[Container]] used to display tooltips in.\n\t */\n\tpublic tooltipContainer!: Container\n\n\tpublic _tooltip!: Tooltip;\n\n\t// Locale-related\n\n\t/**\n\t * @ignore\n\t */\n\tpublic language: Language = Language.new(this, {});\n\n\t/**\n\t * Locale used by the chart.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/locales/}\n\t */\n\tpublic locale: ILocale = en;\n\n\t// Date-time related\n\n\t/**\n\t * Use UTC when formatting date/time.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/#UTC_and_time_zones} for more info\n\t */\n\tpublic utc: boolean = false;\n\n\t/**\n\t * If set, will format date/time in specific time zone.\n\t *\n\t * The value should be named time zone, e.g.:\n\t * `\"America/Vancouver\"`, `\"Australia/Sydney\"`, `\"UTC\"`.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#Time_zone} for more info\n\t * @since 5.1.0\n\t */\n\tpublic timezone?: Timezone;\n\n\t/**\n\t * The maximum FPS that the Root will run at.\n\t *\n\t * If `undefined` it will run at the highest FPS.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#Performance} for more info\n\t */\n\tpublic fps: number | undefined;\n\n\t/**\n\t * Number formatter.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-numbers/} for more info\n\t */\n\tpublic numberFormatter: NumberFormatter = NumberFormatter.new(this, {});\n\n\t/**\n\t * Date/time formatter.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/} for more info\n\t */\n\tpublic dateFormatter: DateFormatter = DateFormatter.new(this, {});\n\n\t/**\n\t * Duration formatter.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/} for more info\n\t */\n\tpublic durationFormatter: DurationFormatter = DurationFormatter.new(this, {});\n\n\n\t// Accessibility\n\n\t/**\n\t * Global tab index for using for the whole chart\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/accessibility/} for more info\n\t */\n\tpublic tabindex: number = 0;\n\n\t//@todo maybe make this better\n\tprotected _tabindexes: Sprite[] = [];\n\n\tprotected _focusElementDirty: boolean = false;\n\tprotected _focusElementContainer: HTMLDivElement | undefined;\n\tprotected _focusedSprite: Sprite | undefined;\n\tprotected _isShift: boolean | undefined;\n\tprotected _keyboardDragPoint: IPoint | undefined;\n\tprotected _tooltipElementContainer: HTMLDivElement | undefined;\n\tprotected _readerAlertElement: HTMLDivElement | undefined;\n\n\tpublic _logo?: Container;\n\n\t/**\n\t * Used for dynamically-created CSS and JavaScript with strict source policies.\n\t */\n\tpublic nonce?: string;\n\n\t/**\n\t * Special color set to be used for various controls.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/#Interface_colors} for more info\n\t */\n\tpublic interfaceColors: InterfaceColors;\n\n\t/**\n\t * An instance of vertical layout object that can be used to set `layout` setting\n\t * of a [[Container]].\n\t *\n\t * @default VerticalLayout.new()\n\t */\n\tpublic verticalLayout: VerticalLayout = VerticalLayout.new(this, {});\n\n\t/**\n\t * An instance of horizontal layout object that can be used to set `layout` setting\n\t * of a [[Container]].\n\t *\n\t * @default HorizontalLayout.new()\n\t */\n\tpublic horizontalLayout: VerticalLayout = HorizontalLayout.new(this, {});\n\n\t/**\n\t * An instance of grid layout object that can be used to set `layout` setting\n\t * of a [[Container]].\n\t *\n\t * @default VerticalLayout.new()\n\t */\n\tpublic gridLayout: VerticalLayout = GridLayout.new(this, {});\n\n\t/**\n\t * Indicates whether chart should resized automatically when parent container\n\t * width and/or height changes.\n\t *\n\t * If disabled (`autoResize = false`) you can make the chart resize manually\n\t * by calling root element's `resize()` method.\n\t */\n\tpublic autoResize: boolean = true;\n\n\tprotected _fontHash: string = \"\";\n\n\tprotected _isDisposed: boolean = false;\n\tprotected _disposers: Array<IDisposer> = [];\n\n\tprotected _resizeSensorDisposer?: IDisposer;\n\n\tpublic _tooltips: Array<Tooltip> = [];\n\n\tprotected _htmlElementContainer: HTMLDivElement | undefined;\n\tprotected _htmlEnabledContainers: Container[] = [];\n\n\tprotected constructor(id: string | HTMLElement, settings: IRootSettings = {}, isReal: boolean) {\n\n\t\tif (!isReal) {\n\t\t\tthrow new Error(\"You cannot use `new Class()`, instead use `Class.new()`\");\n\t\t}\n\n\t\tif (settings.useSafeResolution == null) {\n\t\t\tsettings.useSafeResolution = true;\n\t\t}\n\n\t\tlet resolution;\n\n\t\tif (settings.useSafeResolution) {\n\t\t\tresolution = $utils.getSafeResolution();\n\t\t}\n\n\t\tthis._renderer = new CanvasRenderer(resolution);\n\n\t\tlet dom: HTMLElement | null;\n\n\t\tif (id instanceof HTMLElement) {\n\t\t\tdom = id;\n\t\t}\n\t\telse {\n\t\t\tdom = document.getElementById(id);\n\t\t}\n\n\t\t$array.each(registry.rootElements, (root) => {\n\t\t\tif (root.dom === dom) {\n\t\t\t\tthrow new Error(\"You cannot have multiple Roots on the same DOM node\");\n\t\t\t}\n\t\t});\n\n\t\tthis.interfaceColors = InterfaceColors.new(this, {});\n\n\t\tif (dom === null) {\n\t\t\tthrow new Error(\"Could not find HTML element with id `\" + id + \"`\");\n\t\t}\n\n\t\tthis.dom = dom;\n\n\t\tlet inner: HTMLDivElement = document.createElement(\"div\");\n\t\tinner.style.position = \"relative\";\n\t\tinner.style.height = \"100%\";\n\t\tdom.appendChild(inner);\n\n\t\tthis._inner = inner;\n\n\t\tthis._updateComputedStyles();\n\n\t\tregistry.rootElements.push(this);\n\t}\n\n\tpublic static new(id: string | HTMLElement, settings?: IRootSettings): Root {\n\t\tconst root = new Root(id, settings, true);\n\t\troot._init();\n\t\treturn root;\n\t}\n\n\tpublic moveDOM(id: string | HTMLElement): void {\n\t\tlet dom: HTMLElement | null;\n\n\t\tif (id instanceof HTMLElement) {\n\t\t\tdom = id;\n\t\t}\n\t\telse {\n\t\t\tdom = document.getElementById(id);\n\t\t}\n\n\t\tif (dom) {\n\t\t\twhile (this.dom.childNodes.length > 0) {\n\t\t\t\tdom.appendChild(this.dom.childNodes[0]);\n\t\t\t}\n\t\t\tthis.dom = dom;\n\t\t\tthis._initResizeSensor();\n\t\t\tthis.resize();\n\t\t}\n\n\t}\n\n\n\tprotected _handleLogo(): void {\n\t\tif (this._logo) {\n\t\t\tconst w = this.dom.offsetWidth;\n\t\t\tconst h = this.dom.offsetHeight;\n\t\t\tif ((w <= 150) || (h <= 60)) {\n\t\t\t\tthis._logo.hide();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis._logo.show();\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _showBranding(): void {\n\t\tif (!this._logo) {\n\t\t\tconst logo = this.tooltipContainer.children.push(Container.new(this, {\n\t\t\t\tinteractive: true,\n\t\t\t\tinteractiveChildren: false,\n\t\t\t\tposition: \"absolute\",\n\t\t\t\tsetStateOnChildren: true,\n\t\t\t\tpaddingTop: 9,\n\t\t\t\tpaddingRight: 9,\n\t\t\t\tpaddingBottom: 9,\n\t\t\t\tpaddingLeft: 9,\n\t\t\t\tscale: .6,\n\t\t\t\ty: percent(100),\n\t\t\t\tcenterY: p100,\n\t\t\t\ttooltipText: \"Created using amCharts 5\",\n\t\t\t\ttooltipX: p100,\n\t\t\t\tcursorOverStyle: \"pointer\",\n\t\t\t\tbackground: Rectangle.new(this, {\n\t\t\t\t\tfill: color(0x474758),\n\t\t\t\t\tfillOpacity: 0,\n\t\t\t\t\ttooltipY: 5\n\t\t\t\t})\n\t\t\t}));\n\n\t\t\tconst tooltip = Tooltip.new(this, {\n\t\t\t\tpointerOrientation: \"horizontal\",\n\t\t\t\tpaddingTop: 4,\n\t\t\t\tpaddingRight: 7,\n\t\t\t\tpaddingBottom: 4,\n\t\t\t\tpaddingLeft: 7\n\t\t\t});\n\t\t\ttooltip.label.setAll({\n\t\t\t\tfontSize: 12\n\t\t\t});\n\t\t\ttooltip.get(\"background\")!.setAll({\n\t\t\t\tfill: this.interfaceColors.get(\"background\"),\n\t\t\t\tstroke: this.interfaceColors.get(\"grid\"),\n\t\t\t\tstrokeOpacity: 0.3\n\t\t\t})\n\t\t\tlogo.set(\"tooltip\", tooltip);\n\n\t\t\tlogo.events.on(\"click\", () => {\n\t\t\t\twindow.open(\"https://www.amcharts.com/\", \"_blank\");\n\t\t\t});\n\n\t\t\tlogo.states.create(\"hover\", {});\n\n\t\t\tconst m = logo.children.push(Graphics.new(this, {\n\t\t\t\tstroke: color(0xcccccc),\n\t\t\t\tstrokeWidth: 3,\n\t\t\t\tsvgPath: \"M5 25 L13 25h13.6c3.4 0 6 0 10.3-4.3s5.2-12 8.6-12c3.4 0 4.3 8.6 7.7 8.6M83.4 25H79.8c-3.4 0-6 0-10.3-4.3s-5.2-12-8.6-12-4.3 8.6-7.7 8.6\"\n\t\t\t}));\n\n\t\t\tm.states.create(\"hover\", { stroke: color(0x3CABFF) });\n\n\t\t\tconst a = logo.children.push(Graphics.new(this, {\n\t\t\t\tstroke: color(0x888888),\n\t\t\t\tstrokeWidth: 3,\n\t\t\t\tsvgPath: \"M83.4 25h-31C37 25 39.5 4.4 28.4 4.4S18.9 24.2 4.3 25H0\"\n\t\t\t}));\n\n\t\t\ta.states.create(\"hover\", { stroke: color(0x474758) });\n\n\t\t\t//logo.set(\"tooltip\", this._tooltip);\n\t\t\t//logo.setPrivate(\"tooltipTarget\", logo.get(\"background\"));\n\t\t\tthis._logo = logo;\n\n\t\t\tthis._handleLogo();\n\t\t}\n\t}\n\n\tprotected _init(): void {\n\t\tconst renderer = this._renderer;\n\t\tconst rect = this.dom.getBoundingClientRect();\n\t\tconst width = Math.floor(rect.width);\n\t\tconst height = Math.floor(rect.height);\n\t\tconst rootContainer = Container.new(this, { visible: true, width, height });\n\t\tthis._rootContainer = rootContainer;\n\t\tthis._rootContainer._defaultThemes.push(DefaultTheme.new(this));\n\n\t\tconst container = rootContainer.children.push(Container.new(this, { visible: true, width: p100, height: p100 }));\n\t\tthis.container = container;\n\n\t\trenderer.resize(width, height);\n\n\t\t//@todo: better appendChild - refer\n\t\tthis._inner.appendChild(renderer.view);\n\n\t\t// TODO: TMP TMP TMP for testing only, remove\n\t\t//document.body.appendChild((<any>renderer)._ghostView);\n\n\t\tthis._initResizeSensor();\n\n\t\t// HTML content holder\n\t\tthis._htmlElementContainer = document.createElement(\"div\");\n\t\tthis._htmlElementContainer.style.overflow = \"hidden\";\n\t\tthis._inner.appendChild(this._htmlElementContainer);\n\n\t\t// Create element which is used to make announcements to screen reader\n\t\tconst readerAlertElement = document.createElement(\"div\");\n\t\treaderAlertElement.setAttribute(\"role\", \"alert\");\n\t\treaderAlertElement.style.zIndex = \"-100000\";\n\t\treaderAlertElement.style.opacity = \"0\";\n\t\treaderAlertElement.style.position = \"absolute\";\n\t\treaderAlertElement.style.top = \"0\";\n\t\tthis._readerAlertElement = readerAlertElement;\n\t\tthis._inner.appendChild(this._readerAlertElement);\n\n\t\tconst focusElementContainer = document.createElement(\"div\");\n\t\tfocusElementContainer.style.position = \"absolute\";\n\t\tfocusElementContainer.style.pointerEvents = \"none\";\n\t\tfocusElementContainer.style.top = \"0px\";\n\t\tfocusElementContainer.style.left = \"0px\";\n\t\tfocusElementContainer.style.overflow = \"hidden\";\n\t\tfocusElementContainer.style.width = width + \"px\";\n\t\tfocusElementContainer.style.height = height + \"px\";\n\n\t\tfocusElementContainer.setAttribute(\"role\", \"application\");\n\n\t\t$utils.setInteractive(focusElementContainer, false);\n\t\tthis._focusElementContainer = focusElementContainer;\n\t\tthis._inner.appendChild(this._focusElementContainer);\n\n\t\tthis._tooltipElementContainer = document.createElement(\"div\");\n\t\tthis._inner.appendChild(this._tooltipElementContainer);\n\n\t\t// Add keyboard events for accessibility, e.g. simulating drag with arrow\n\t\t// keys and click with ENTER\n\t\tif ($utils.supports(\"keyboardevents\")) {\n\n\t\t\tthis._disposers.push($utils.addEventListener(window, \"keydown\", (ev: KeyboardEvent) => {\n\t\t\t\tif (ev.keyCode == 16) {\n\t\t\t\t\tthis._isShift = true;\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tthis._disposers.push($utils.addEventListener(window, \"keyup\", (ev: KeyboardEvent) => {\n\t\t\t\tif (ev.keyCode == 16) {\n\t\t\t\t\tthis._isShift = false;\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tthis._disposers.push($utils.addEventListener(focusElementContainer, \"keydown\", (ev: KeyboardEvent) => {\n\t\t\t\tconst focusedSprite = this._focusedSprite;\n\t\t\t\tif (focusedSprite) {\n\t\t\t\t\tif (ev.keyCode == 27) {\n\t\t\t\t\t\t// ESC pressed - lose current focus\n\t\t\t\t\t\t$utils.blur();\n\t\t\t\t\t\tthis._focusedSprite = undefined;\n\t\t\t\t\t}\n\t\t\t\t\tlet dragOffsetX = 0;\n\t\t\t\t\tlet dragOffsetY = 0;\n\t\t\t\t\t// TODO: figure out if using bogus MouseEvent is fine, or it will\n\t\t\t\t\t// fail on some platforms\n\t\t\t\t\tswitch (ev.keyCode) {\n\t\t\t\t\t\tcase 13:\n\t\t\t\t\t\t\tev.preventDefault();\n\t\t\t\t\t\t\tconst downEvent = renderer.getEvent(new MouseEvent(\"click\"));\n\t\t\t\t\t\t\tfocusedSprite.events.dispatch(\"click\", {\n\t\t\t\t\t\t\t\ttype: \"click\",\n\t\t\t\t\t\t\t\toriginalEvent: downEvent.event,\n\t\t\t\t\t\t\t\tpoint: downEvent.point,\n\t\t\t\t\t\t\t\tsimulated: true,\n\t\t\t\t\t\t\t\ttarget: focusedSprite\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\tcase 37:\n\t\t\t\t\t\t\tdragOffsetX = -6;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 39:\n\t\t\t\t\t\t\tdragOffsetX = 6;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 38:\n\t\t\t\t\t\t\tdragOffsetY = -6;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 40:\n\t\t\t\t\t\t\tdragOffsetY = 6;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (dragOffsetX != 0 || dragOffsetY != 0) {\n\t\t\t\t\t\tev.preventDefault();\n\n\t\t\t\t\t\tif (!focusedSprite.isDragging()) {\n\t\t\t\t\t\t\t// Start dragging\n\t\t\t\t\t\t\tthis._keyboardDragPoint = {\n\t\t\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\t\t\ty: 0\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst downEvent = renderer.getEvent(new MouseEvent(\"mousedown\", {\n\t\t\t\t\t\t\t\tclientX: 0,\n\t\t\t\t\t\t\t\tclientY: 0\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\t\tif (focusedSprite.events.isEnabled(\"pointerdown\")) {\n\t\t\t\t\t\t\t\tfocusedSprite.events.dispatch(\"pointerdown\", {\n\t\t\t\t\t\t\t\t\ttype: \"pointerdown\",\n\t\t\t\t\t\t\t\t\toriginalEvent: downEvent.event,\n\t\t\t\t\t\t\t\t\tpoint: downEvent.point,\n\t\t\t\t\t\t\t\t\tsimulated: true,\n\t\t\t\t\t\t\t\t\ttarget: focusedSprite\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// Move focus marker\n\t\t\t\t\t\t\t//this._positionFocusElement(focusedSprite);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Move incrementally\n\t\t\t\t\t\tconst dragPoint = this._keyboardDragPoint!;\n\t\t\t\t\t\tdragPoint.x += dragOffsetX;\n\t\t\t\t\t\tdragPoint.y += dragOffsetY;\n\t\t\t\t\t\tconst moveEvent = renderer.getEvent(new MouseEvent(\"mousemove\", {\n\t\t\t\t\t\t\tclientX: dragPoint.x,\n\t\t\t\t\t\t\tclientY: dragPoint.y\n\t\t\t\t\t\t}), false);\n\n\t\t\t\t\t\tif (focusedSprite.events.isEnabled(\"globalpointermove\")) {\n\t\t\t\t\t\t\tfocusedSprite.events.dispatch(\"globalpointermove\", {\n\t\t\t\t\t\t\t\ttype: \"globalpointermove\",\n\t\t\t\t\t\t\t\toriginalEvent: moveEvent.event,\n\t\t\t\t\t\t\t\tpoint: moveEvent.point,\n\t\t\t\t\t\t\t\tsimulated: true,\n\t\t\t\t\t\t\t\ttarget: focusedSprite\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tthis._disposers.push($utils.addEventListener(focusElementContainer, \"keyup\", (ev: KeyboardEvent) => {\n\t\t\t\tif (this._focusedSprite) {\n\t\t\t\t\tconst focusedSprite = this._focusedSprite;\n\t\t\t\t\tconst keyCode = ev.keyCode;\n\t\t\t\t\tswitch (keyCode) {\n\t\t\t\t\t\tcase 37:\n\t\t\t\t\t\tcase 39:\n\t\t\t\t\t\tcase 38:\n\t\t\t\t\t\tcase 40:\n\t\t\t\t\t\t\tif (focusedSprite.isDragging()) {\n\t\t\t\t\t\t\t\t// Simulate drag stop\n\t\t\t\t\t\t\t\tconst dragPoint = this._keyboardDragPoint!;\n\t\t\t\t\t\t\t\tconst upEvent = renderer.getEvent(new MouseEvent(\"mouseup\", {\n\t\t\t\t\t\t\t\t\tclientX: dragPoint.x,\n\t\t\t\t\t\t\t\t\tclientY: dragPoint.y\n\t\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\t\t\tif (focusedSprite.events.isEnabled(\"globalpointerup\")) {\n\t\t\t\t\t\t\t\t\tfocusedSprite.events.dispatch(\"globalpointerup\", {\n\t\t\t\t\t\t\t\t\t\ttype: \"globalpointerup\",\n\t\t\t\t\t\t\t\t\t\toriginalEvent: upEvent.event,\n\t\t\t\t\t\t\t\t\t\tpoint: upEvent.point,\n\t\t\t\t\t\t\t\t\t\tsimulated: true,\n\t\t\t\t\t\t\t\t\t\ttarget: focusedSprite\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//this._positionFocusElement(focusedSprite);\n\t\t\t\t\t\t\t\tthis._keyboardDragPoint = undefined;\n\t\t\t\t\t\t\t\t// @todo dispatch mouseup event instead of calling dragStop?\n\t\t\t\t\t\t\t\t// this._dispatchEvent(\"globalpointerup\", target, upEvent);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (focusedSprite.get(\"focusableGroup\")) {\n\t\t\t\t\t\t\t\t// Find next item in focusable group\n\t\t\t\t\t\t\t\tconst group = focusedSprite.get(\"focusableGroup\");\n\t\t\t\t\t\t\t\tconst items = this._tabindexes.filter(item => item.get(\"focusableGroup\") == group);\n\t\t\t\t\t\t\t\tlet index = items.indexOf(focusedSprite);\n\t\t\t\t\t\t\t\tconst lastIndex = items.length - 1;\n\t\t\t\t\t\t\t\tindex += (keyCode == 39 || keyCode == 40) ? 1 : -1;\n\t\t\t\t\t\t\t\tif (index < 0) {\n\t\t\t\t\t\t\t\t\tindex = lastIndex;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if (index > lastIndex) {\n\t\t\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t$utils.focus(items[index].getPrivate(\"focusElement\")!.dom);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\n\t\tthis._startTicker();\n\t\tthis.setThemes([]);\n\n\t\tthis._addTooltip();\n\n\t\tif (!this._hasLicense()) {\n\t\t\tthis._showBranding();\n\t\t}\n\t}\n\n\tprivate _initResizeSensor(): void {\n\t\tif (this._resizeSensorDisposer) {\n\t\t\tthis._resizeSensorDisposer.dispose();\n\t\t}\n\t\tthis._resizeSensorDisposer = new ResizeSensor(this.dom, () => {\n\t\t\tif (this.autoResize) {\n\t\t\t\tthis.resize();\n\t\t\t}\n\t\t});\n\t\tthis._disposers.push(this._resizeSensorDisposer);\n\t}\n\n\t/**\n\t * If automatic resizing of char is disabled (`root.autoResize = false`), it\n\t * can be resized manually by calling this method.\n\t */\n\tpublic resize(): void {\n\t\tconst dom = this.dom;\n\t\tconst rect = dom.getBoundingClientRect();\n\t\tconst w = Math.floor(rect.width);\n\t\tconst h = Math.floor(rect.height);\n\t\tif (w > 0 && h > 0) {\n\t\t\tconst htmlElementContainer = this._htmlElementContainer!;\n\t\t\thtmlElementContainer.style.width = w + \"px\";\n\t\t\thtmlElementContainer.style.height = h + \"px\";\n\n\t\t\tconst focusElementContainer = this._focusElementContainer!;\n\t\t\tfocusElementContainer.style.width = w + \"px\";\n\t\t\tfocusElementContainer.style.height = h + \"px\";\n\n\t\t\tthis._renderer.resize(w, h);\n\n\t\t\tconst rootContainer = this._rootContainer;\n\n\t\t\trootContainer.setPrivate(\"width\", w);\n\t\t\trootContainer.setPrivate(\"height\", h);\n\t\t\tthis._render();\n\t\t\tthis._handleLogo();\n\t\t}\n\t}\n\n\tprivate _render() {\n\t\tthis._renderer.render(this._rootContainer._display);\n\n\t\tif (this._focusElementDirty) {\n\t\t\tthis._updateCurrentFocus();\n\t\t\tthis._focusElementDirty = false;\n\t\t}\n\t}\n\n\tprivate _runTickers(currentTime: number) {\n\t\t$array.each(this._tickers, (f) => {\n\t\t\tf(currentTime);\n\t\t});\n\t}\n\n\tprivate _runAnimations(currentTime: number) {\n\t\t$array.keepIf(this._animations, (animation) => {\n\t\t\treturn animation._runAnimation(currentTime);\n\t\t});\n\t}\n\n\tprivate _runDirties() {\n\t\t//console.log(\"tick **************************************************************\");\n\t\tlet allParents: { [id: number]: IParent } = {};\n\n\t\twhile (this._isDirtyParents) {\n\t\t\t// This must be before calling _prepareChildren\n\t\t\tthis._isDirtyParents = false;\n\n\t\t\t$object.keys(this._dirtyParents).forEach((key) => {\n\t\t\t\tconst parent = this._dirtyParents[key];\n\n\t\t\t\tdelete this._dirtyParents[key];\n\n\t\t\t\tif (!parent.isDisposed()) {\n\t\t\t\t\tallParents[parent.uid] = parent;\n\t\t\t\t\tparent._prepareChildren();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t$object.keys(allParents).forEach((key) => {\n\t\t\tallParents[key]._updateChildren();\n\t\t});\n\n\t\tconst objects: Array<Entity> = [];\n\n\t\t//\t\tconsole.log(\"_beforeChanged\")\n\t\t$object.keys(this._dirty).forEach((key) => {\n\t\t\tconst entity = this._dirty[key];\n\n\t\t\tif (entity.isDisposed()) {\n\t\t\t\tdelete this._dirty[entity.uid];\n\n\t\t\t} else {\n\t\t\t\tobjects.push(entity);\n\t\t\t\tentity._beforeChanged();\n\t\t\t}\n\t\t});\n\n\t\t//\t\tconsole.log(\"_changed\")\n\t\tobjects.forEach((entity) => {\n\t\t\tentity._changed();\n\t\t\tdelete this._dirty[entity.uid];\n\t\t\tentity._clearDirty();\n\t\t});\n\n\t\tthis._isDirty = false;\n\n\t\tconst depths: { [id: number]: number } = {};\n\t\tconst bounds: Array<IBounds> = [];\n\n\t\t$object.keys(this._dirtyBounds).forEach((key) => {\n\t\t\tconst entity = this._dirtyBounds[key];\n\n\t\t\tdelete this._dirtyBounds[key];\n\n\t\t\tif (!entity.isDisposed()) {\n\t\t\t\tdepths[entity.uid] = entity.depth();\n\t\t\t\tbounds.push(entity);\n\t\t\t}\n\t\t});\n\n\t\t// High depth -> low depth\n\t\tbounds.sort((x, y) => {\n\t\t\treturn $order.compare(depths[y.uid], depths[x.uid]);\n\t\t});\n\n\t\t//\t\tconsole.log(\"_updateBounds\")\n\t\tbounds.forEach((entity) => {\n\t\t\tentity._updateBounds();\n\t\t});\n\n\t\t//\t\tconsole.log(\"_updatePosition\")\n\t\tconst dirtyPositions = this._dirtyPositions;\n\t\t$object.keys(dirtyPositions).forEach((key) => {\n\t\t\tconst sprite = dirtyPositions[key];\n\n\t\t\tdelete dirtyPositions[key];\n\n\t\t\tif (!sprite.isDisposed()) {\n\t\t\t\tsprite._updatePosition();\n\t\t\t}\n\t\t});\n\n\t\t//\t\tconsole.log(\"_afterChanged\")\n\t\tobjects.forEach((entity) => {\n\t\t\tentity._afterChanged();\n\t\t});\n\n\t}\n\n\tprivate _renderFrame(currentTime: number): boolean {\n\t\tif (this.events.isEnabled(\"framestarted\")) {\n\t\t\tthis.events.dispatch(\"framestarted\", {\n\t\t\t\ttype: \"framestarted\",\n\t\t\t\ttarget: this,\n\t\t\t\ttimestamp: currentTime,\n\t\t\t});\n\t\t}\n\n\t\tthis._checkComputedStyles();\n\t\tthis._runTickers(currentTime);\n\t\tthis._runAnimations(currentTime);\n\t\tthis._runDirties();\n\t\tthis._render();\n\t\tthis._positionHTMLElements();\n\n\t\tif (this.events.isEnabled(\"frameended\")) {\n\t\t\tthis.events.dispatch(\"frameended\", {\n\t\t\t\ttype: \"frameended\",\n\t\t\t\ttarget: this,\n\t\t\t\ttimestamp: currentTime,\n\t\t\t});\n\t\t}\n\n\n\t\treturn this._tickers.length === 0 &&\n\t\t\tthis._animations.length === 0 &&\n\t\t\t!this._isDirty;\n\t}\n\n\tprivate _runTicker(currentTime: number) {\n\t\tif (!this.isDisposed()) {\n\t\t\tthis.animationTime = currentTime;\n\n\t\t\tconst done = this._renderFrame(currentTime);\n\n\t\t\t// No more work to do\n\t\t\tif (done) {\n\t\t\t\tthis._ticker = null;\n\t\t\t\tthis.animationTime = null;\n\n\t\t\t} else {\n\t\t\t\trAF(this.fps, this._ticker!);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _runTickerNow() {\n\t\tif (!this.isDisposed()) {\n\t\t\tfor (; ;) {\n\t\t\t\tconst currentTime = performance.now();\n\n\t\t\t\tthis.animationTime = currentTime;\n\n\t\t\t\tconst done = this._renderFrame(currentTime);\n\n\t\t\t\tif (done) {\n\t\t\t\t\tthis.animationTime = null;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _startTicker() {\n\t\tif (this._ticker === null) {\n\t\t\tthis.animationTime = null;\n\n\t\t\tthis._ticker = (currentTime) => {\n\t\t\t\tthis._runTicker(currentTime);\n\t\t\t};\n\n\t\t\trAF(this.fps, this._ticker!);\n\t\t}\n\t}\n\n\tpublic _addDirtyEntity(entity: Entity) {\n\t\tif (this._dirty[entity.uid] === undefined) {\n\t\t\tthis._isDirty = true;\n\t\t\tthis._dirty[entity.uid] = entity;\n\t\t\tthis._startTicker();\n\t\t}\n\t}\n\n\tpublic _addDirtyParent(parent: IParent) {\n\t\tif (this._dirtyParents[parent.uid] === undefined) {\n\t\t\tthis._isDirty = true;\n\t\t\tthis._isDirtyParents = true;\n\t\t\tthis._dirtyParents[parent.uid] = parent;\n\t\t\tthis._startTicker();\n\t\t}\n\t}\n\n\tpublic _addDirtyBounds(entity: IBounds) {\n\t\tif (this._dirtyBounds[entity.uid] === undefined) {\n\t\t\tthis._isDirty = true;\n\t\t\tthis._dirtyBounds[entity.uid] = entity;\n\t\t\tthis._startTicker();\n\t\t}\n\t}\n\n\tpublic _addDirtyPosition(sprite: Sprite) {\n\t\tif (this._dirtyPositions[sprite.uid] === undefined) {\n\t\t\tthis._isDirty = true;\n\t\t\tthis._dirtyPositions[sprite.uid] = sprite;\n\t\t\tthis._startTicker();\n\t\t}\n\t}\n\n\tpublic _addAnimation(animation: IAnimation) {\n\t\t// TODO use numeric id instead\n\t\tif (this._animations.indexOf(animation) === -1) {\n\t\t\tthis._animations.push(animation);\n\t\t\tthis._startTicker();\n\t\t}\n\t}\n\n\tpublic _markDirty() {\n\t\tthis._isDirty = true;\n\t}\n\n\tpublic _markDirtyRedraw() {\n\t\tthis.events.once(\"frameended\", () => {\n\t\t\tthis._isDirty = true;\n\t\t\tthis._startTicker();\n\t\t})\n\t}\n\n\tpublic eachFrame(f: (currentTime: number) => void): IDisposer {\n\t\tthis._tickers.push(f);\n\t\tthis._startTicker();\n\n\t\treturn new Disposer(() => {\n\t\t\t$array.removeFirst(this._tickers, f);\n\t\t});\n\t}\n\n\tpublic markDirtyGlobal(container?: Container): void {\n\t\tif (!container) {\n\t\t\tcontainer = this.container;\n\t\t}\n\t\tconsole.log(this.width());\n\t\tcontainer.walkChildren((child) => {\n\t\t\tif (child instanceof Container) {\n\t\t\t\tthis.markDirtyGlobal(child);\n\t\t\t}\n\t\t\tchild.markDirty();\n\t\t\tchild.markDirtyBounds();\n\t\t});\n\t}\n\n\t/**\n\t * Returns width of the target container, in pixels.\n\t *\n\t * @return Width\n\t */\n\tpublic width(): number {\n\t\t// TODO make this more efficient, maybe just return the renderer's width ?\n\t\treturn Math.floor(this.dom.getBoundingClientRect().width);\n\t}\n\n\t/**\n\t * Returns height of the target container, in pixels.\n\t *\n\t * @return Height\n\t */\n\tpublic height(): number {\n\t\t// TODO make this more efficient, maybe just return the renderer's height ?\n\t\treturn Math.floor(this.dom.getBoundingClientRect().height);\n\t}\n\n\t/**\n\t * Disposes root and all the content in it.\n\t */\n\tpublic dispose(): void {\n\t\tif (!this._isDisposed) {\n\t\t\tthis._isDisposed = true;\n\n\t\t\tthis._rootContainer.dispose();\n\t\t\tthis._renderer.dispose();\n\t\t\tthis.horizontalLayout.dispose();\n\t\t\tthis.verticalLayout.dispose();\n\t\t\tthis.interfaceColors.dispose();\n\n\t\t\t$array.each(this._disposers, (x) => {\n\t\t\t\tx.dispose();\n\t\t\t});\n\n\t\t\tif (this._inner) {\n\t\t\t\t$utils.removeElement(this._inner);\n\t\t\t}\n\n\t\t\t$array.remove(registry.rootElements, this);\n\t\t}\n\t}\n\n\t/**\n\t * Returns `true` if root element is disposed.\n\t *\n\t * @return Disposed?\n\t */\n\tpublic isDisposed(): boolean {\n\t\treturn this._isDisposed;\n\t}\n\n\t/**\n\t * Triggers screen reader read out a message.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/accessibility/} for more info\n\t * @param  text  Alert text\n\t */\n\tpublic readerAlert(text: string): void {\n\t\tthis._readerAlertElement!.innerHTML = $utils.stripTags(text);\n\t}\n\n\t/**\n\t * Sets themes to be used for the chart.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/themes/} for more info\n\t * @param  themes  A list of themes\n\t */\n\tpublic setThemes(themes: Array<Theme>): void {\n\t\tthis._rootContainer.set(\"themes\", themes);\n\n\t\t// otherwise new themes are not applied\n\t\tconst tooltipContainer = this.tooltipContainer;\n\t\tif (tooltipContainer) {\n\t\t\ttooltipContainer._applyThemes();\n\t\t}\n\n\t\t// @todo review this\n\t\tconst interfaceColors = this.interfaceColors;\n\t\tif (interfaceColors) {\n\t\t\tinterfaceColors._applyThemes();\n\t\t}\n\t}\n\n\tprotected _addTooltip() {\n\t\tif (!this.tooltipContainer) {\n\t\t\tconst tooltipContainer = this._rootContainer.children.push(Container.new(this, { position: \"absolute\", isMeasured: false, width: p100, height: p100, layer: 30 }));\n\t\t\tthis.tooltipContainer = tooltipContainer;\n\n\t\t\tconst tooltip = Tooltip.new(this, {});\n\t\t\tthis.container.set(\"tooltip\", tooltip);\n\t\t\ttooltip.hide(0);\n\t\t\tthis._tooltip = tooltip;\n\t\t}\n\t}\n\n\t/**\n\t * Accesibility\n\t */\n\n\tpublic _registerTabindexOrder(target: Sprite): void {\n\t\tif (target.get(\"focusable\")) {\n\t\t\t$array.pushOne(this._tabindexes, target);\n\t\t}\n\t\telse {\n\t\t\t$array.remove(this._tabindexes, target);\n\t\t}\n\t\tthis._invalidateTabindexes();\n\t}\n\n\tpublic _unregisterTabindexOrder(target: Sprite): void {\n\t\t$array.remove(this._tabindexes, target);\n\t\tthis._invalidateTabindexes();\n\t}\n\n\tpublic _invalidateTabindexes(): void {\n\n\t\tthis._tabindexes.sort((a: Sprite, b: Sprite) => {\n\t\t\tconst aindex = a.get(\"tabindexOrder\", 0);\n\t\t\tconst bindex = b.get(\"tabindexOrder\", 0);\n\t\t\tif (aindex == bindex) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\telse if (aindex > bindex) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t});\n\n\t\tconst groups: Array<string | number> = [];\n\t\t$array.each(this._tabindexes, (item, index) => {\n\t\t\tif (!item.getPrivate(\"focusElement\")) {\n\t\t\t\tthis._makeFocusElement(index, item);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis._moveFocusElement(index, item);\n\t\t\t}\n\t\t\tconst group = item.get(\"focusableGroup\");\n\t\t\tif (group) {\n\t\t\t\tif (groups.indexOf(group) !== -1) {\n\t\t\t\t\t// Non-first element in the group, make it not directly focusable\n\t\t\t\t\titem.getPrivate(\"focusElement\")!.dom.setAttribute(\"tabindex\", \"-1\");\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tgroups.push(group);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t}\n\n\tpublic _updateCurrentFocus(): void {\n\t\tif (this._focusedSprite) {\n\t\t\tthis._decorateFocusElement(this._focusedSprite);\n\t\t\tthis._positionFocusElement(this._focusedSprite);\n\t\t}\n\t}\n\n\tpublic _decorateFocusElement(target: Sprite, focusElement?: HTMLDivElement): void {\n\n\t\t// Decorate with proper accessibility attributes\n\t\tif (!focusElement) {\n\t\t\tfocusElement = target.getPrivate(\"focusElement\")!.dom;\n\t\t}\n\n\t\tif (!focusElement) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (target.get(\"visible\") && target.get(\"role\") != \"tooltip\" && !target.isHidden()) {\n\t\t\tif (focusElement.getAttribute(\"tabindex\") != \"-1\") {\n\t\t\t\tfocusElement.setAttribute(\"tabindex\", \"\" + this.tabindex);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"tabindex\")\n\t\t}\n\n\t\tconst role = target.get(\"role\");\n\t\tif (role) {\n\t\t\tfocusElement.setAttribute(\"role\", role);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"role\");\n\t\t}\n\n\t\tconst ariaLabel = target.get(\"ariaLabel\");\n\t\tif (ariaLabel) {\n\t\t\tconst label = populateString(target, ariaLabel);\n\t\t\tfocusElement.setAttribute(\"aria-label\", label);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-label\");\n\t\t}\n\n\t\tconst ariaLive = target.get(\"ariaLive\");\n\t\tif (ariaLive) {\n\t\t\tfocusElement.setAttribute(\"aria-live\", ariaLive);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-live\");\n\t\t}\n\n\t\tconst ariaChecked = target.get(\"ariaChecked\");\n\t\tif (ariaChecked != null) {\n\t\t\tfocusElement.setAttribute(\"aria-checked\", ariaChecked ? \"true\" : \"false\");\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-checked\");\n\t\t}\n\n\t\tif (target.get(\"ariaHidden\")) {\n\t\t\tfocusElement.setAttribute(\"aria-hidden\", \"hidden\");\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-hidden\");\n\t\t}\n\n\t\tconst ariaOrientation = target.get(\"ariaOrientation\");\n\t\tif (ariaOrientation) {\n\t\t\tfocusElement.setAttribute(\"aria-orientation\", ariaOrientation);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-orientation\");\n\t\t}\n\n\t\tconst ariaValueNow = target.get(\"ariaValueNow\");\n\t\tif (ariaValueNow) {\n\t\t\tfocusElement.setAttribute(\"aria-valuenow\", ariaValueNow);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-valuenow\");\n\t\t}\n\n\t\tconst ariaValueMin = target.get(\"ariaValueMin\");\n\t\tif (ariaValueMin) {\n\t\t\tfocusElement.setAttribute(\"aria-valuemin\", ariaValueMin);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-valuemin\");\n\t\t}\n\n\t\tconst ariaValueMax = target.get(\"ariaValueMax\");\n\t\tif (ariaValueMax) {\n\t\t\tfocusElement.setAttribute(\"aria-valuemax\", ariaValueMax);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-valuemax\");\n\t\t}\n\n\t\tconst ariaValueText = target.get(\"ariaValueText\");\n\t\tif (ariaValueText) {\n\t\t\tfocusElement.setAttribute(\"aria-valuetext\", ariaValueText);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-valuetext\");\n\t\t}\n\n\t\tconst ariaControls = target.get(\"ariaControls\");\n\t\tif (ariaControls) {\n\t\t\tfocusElement.setAttribute(\"aria-controls\", ariaControls);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-controls\");\n\t\t}\n\t}\n\n\tpublic _makeFocusElement(index: number, target: Sprite): void {\n\n\t\tif (target.getPrivate(\"focusElement\")) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Init\n\t\tconst focusElement = document.createElement(\"div\");\n\t\tif (target.get(\"role\") != \"tooltip\") {\n\t\t\tfocusElement.tabIndex = this.tabindex;\n\t\t}\n\t\tfocusElement.style.position = \"absolute\";\n\t\t$utils.setInteractive(focusElement, false);\n\n\t\tconst disposers: Array<IDisposer> = [];\n\n\t\ttarget.setPrivate(\"focusElement\", {\n\t\t\tdom: focusElement,\n\t\t\tdisposers,\n\t\t});\n\n\t\tthis._decorateFocusElement(target);\n\n\t\tdisposers.push($utils.addEventListener(focusElement, \"focus\", (ev: FocusEvent) => {\n\t\t\tthis._handleFocus(ev, index);\n\t\t}));\n\n\t\tdisposers.push($utils.addEventListener(focusElement, \"blur\", (ev: FocusEvent) => {\n\t\t\tthis._handleBlur(ev, index);\n\t\t}));\n\n\t\tthis._moveFocusElement(index, target);\n\n\t}\n\n\tpublic _removeFocusElement(target: Sprite): void {\n\t\t$array.remove(this._tabindexes, target);\n\t\tconst focusElement = target.getPrivate(\"focusElement\");\n\t\tif (focusElement) {\n\t\t\tconst container = this._focusElementContainer!;\n\t\t\tcontainer.removeChild(focusElement.dom);\n\t\t\t$array.each(focusElement.disposers, (x) => {\n\t\t\t\tx.dispose();\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic _hideFocusElement(target: Sprite): void {\n\t\tconst focusElement = target.getPrivate(\"focusElement\")!;\n\t\tfocusElement.dom.style.display = \"none\";\n\t}\n\n\tprotected _moveFocusElement(index: number, target: Sprite): void {\n\n\t\t// Get container\n\t\tconst container = this._focusElementContainer!;\n\t\tconst focusElement = target.getPrivate(\"focusElement\")!.dom;\n\n\t\tif (focusElement === this._focusElementContainer!.children[index]) {\n\t\t\t// Nothing to do\n\t\t\treturn;\n\t\t}\n\n\t\tconst next = this._focusElementContainer!.children[index + 1];\n\t\tif (next) {\n\t\t\tcontainer.insertBefore(focusElement, next);\n\t\t}\n\t\telse {\n\t\t\tcontainer.append(focusElement);\n\t\t}\n\t}\n\n\tprotected _positionFocusElement(target: Sprite): void {\n\t\tconst bounds = target.globalBounds();\n\n\t\tconst width = bounds.right == bounds.left ? target.width() : bounds.right - bounds.left;\n\t\tconst height = bounds.top == bounds.bottom ? target.height() : bounds.bottom - bounds.top;\n\n\t\tconst focusElement = target.getPrivate(\"focusElement\")!.dom;\n\t\tfocusElement.style.top = (bounds.top - 2) + \"px\";\n\t\tfocusElement.style.left = (bounds.left - 2) + \"px\";\n\t\tfocusElement.style.width = (width + 4) + \"px\";\n\t\tfocusElement.style.height = (height + 4) + \"px\";\n\n\t}\n\n\tprotected _handleFocus(ev: FocusEvent, index: number): void {\n\t\t// Get element\n\t\tconst focused = this._tabindexes[index];\n\n\t\t// Jump over hidden elements\n\t\tif (!focused.isVisibleDeep()) {\n\t\t\tthis._focusNext(<HTMLDivElement>ev.target, this._isShift ? -1 : 1);\n\t\t\treturn;\n\t\t}\n\n\t\t// Size and position\n\t\tthis._positionFocusElement(focused);\n\t\t//this._decorateFocusElement(focused);\n\n\t\tthis._focusedSprite = focused;\n\n\t\tif (focused.events.isEnabled(\"focus\")) {\n\t\t\tfocused.events.dispatch(\"focus\", {\n\t\t\t\ttype: \"focus\",\n\t\t\t\toriginalEvent: ev,\n\t\t\t\ttarget: focused\n\t\t\t});\n\t\t}\n\t}\n\n\tprotected _focusNext(el: HTMLDivElement, direction: 1 | -1): void {\n\t\tvar focusableElements = Array.from(document.querySelectorAll([\n\t\t\t'a[href]',\n\t\t\t'area[href]',\n\t\t\t'button:not([disabled])',\n\t\t\t'details',\n\t\t\t'input:not([disabled])',\n\t\t\t'iframe:not([disabled])',\n\t\t\t'select:not([disabled])',\n\t\t\t'textarea:not([disabled])',\n\t\t\t'[contentEditable=\"\"]',\n\t\t\t'[contentEditable=\"true\"]',\n\t\t\t'[contentEditable=\"TRUE\"]',\n\t\t\t'[tabindex]:not([tabindex^=\"-\"])',\n\t\t\t//':not([disabled])'\n\t\t].join(',')));\n\n\t\tlet index = focusableElements.indexOf(el) + direction;\n\n\t\tif (index < 0) {\n\t\t\tindex = focusableElements.length - 1;\n\t\t}\n\t\telse if (index >= focusableElements.length) {\n\t\t\tindex = 0;\n\t\t}\n\n\t\t(<HTMLElement>focusableElements[index]).focus();\n\t}\n\n\tprotected _handleBlur(ev: FocusEvent, _index: number): void {\n\t\tconst focused = this._focusedSprite;\n\t\tif (focused && focused.events.isEnabled(\"blur\")) {\n\t\t\tfocused.events.dispatch(\"blur\", {\n\t\t\t\ttype: \"blur\",\n\t\t\t\toriginalEvent: ev,\n\t\t\t\ttarget: focused\n\t\t\t});\n\t\t}\n\t\tthis._focusedSprite = undefined;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateTooltip(target: Text): void {\n\t\tconst text = $utils.stripTags(target._getText());\n\t\tlet tooltipElement = target.getPrivate(\"tooltipElement\");\n\t\tif (target.get(\"role\") == \"tooltip\" && text != \"\") {\n\t\t\tif (!tooltipElement) {\n\t\t\t\ttooltipElement = this._makeTooltipElement(target);\n\t\t\t}\n\t\t\tif (tooltipElement.innerHTML != text) {\n\t\t\t\ttooltipElement.innerHTML = text!;\n\t\t\t}\n\t\t}\n\t\telse if (tooltipElement) {\n\t\t\ttooltipElement.remove();\n\t\t\ttarget.removePrivate(\"tooltipElement\");\n\t\t}\n\t}\n\n\tpublic _makeTooltipElement(target: Text): HTMLDivElement {\n\t\tconst container = this._tooltipElementContainer!;\n\t\tconst tooltipElement = document.createElement(\"div\");\n\t\ttooltipElement.style.position = \"absolute\";\n\t\ttooltipElement.style.top = \"-1000000px\";\n\t\ttooltipElement.style.opacity = \"0.0000001\";\n\n\t\t$utils.setInteractive(tooltipElement, false);\n\n\t\tthis._decorateFocusElement(target, tooltipElement);\n\t\tcontainer.append(tooltipElement);\n\t\ttarget.setPrivate(\"tooltipElement\", tooltipElement);\n\t\treturn tooltipElement;\n\t}\n\n\tpublic _invalidateAccessibility(target: Sprite): void {\n\t\tthis._focusElementDirty = true;\n\t\tconst focusElement = target.getPrivate(\"focusElement\");\n\t\tif (target.get(\"focusable\")) {\n\t\t\tif (focusElement) {\n\t\t\t\tthis._decorateFocusElement(target);\n\t\t\t\tthis._positionFocusElement(target);\n\t\t\t}\n\t\t\t// else {\n\t\t\t// \tthis._renderer._makeFocusElement(0, this);\n\t\t\t// }\n\t\t}\n\t\telse if (focusElement) {\n\t\t\tthis._removeFocusElement(target);\n\t\t}\n\t\t//this.updateCurrentFocus();\n\t}\n\n\t/**\n\t * Returns `true` if `target` is currently focused.\n\t *\n\t * @param   target  Target\n\t * @return          Focused?\n\t */\n\tpublic focused(target: Sprite): boolean {\n\t\treturn this._focusedSprite === target;\n\t}\n\n\t/**\n\t * Converts document coordinates to coordinates withing root element.\n\t *\n\t * @param   point  Document point\n\t * @return         Root point\n\t */\n\tpublic documentPointToRoot(point: IPoint): IPoint {\n\t\tconst bbox = this.dom.getBoundingClientRect();\n\t\treturn {\n\t\t\tx: point.x - bbox.left,\n\t\t\ty: point.y - bbox.top\n\t\t};\n\t}\n\n\t/**\n\t * Converts root coordinates to document\n\t *\n\t * @param   point  Document point\n\t * @return         Root point\n\t */\n\tpublic rootPointToDocument(point: IPoint): IPoint {\n\t\tconst bbox = this.dom.getBoundingClientRect();\n\t\treturn {\n\t\t\tx: point.x + bbox.left,\n\t\t\ty: point.y + bbox.top\n\t\t};\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic addDisposer<T extends IDisposer>(disposer: T): T {\n\t\tthis._disposers.push(disposer);\n\t\treturn disposer;\n\t}\n\n\tprotected _updateComputedStyles(): boolean {\n\t\tconst styles = window.getComputedStyle(this.dom);\n\t\tlet fontHash = \"\";\n\t\t$object.each(styles, (key, val) => {\n\t\t\tif ($type.isString(key) && key.match(/^font/)) {\n\t\t\t\tfontHash += val;\n\t\t\t}\n\t\t})\n\t\tconst changed = fontHash != this._fontHash;\n\t\tif (changed) {\n\t\t\tthis._fontHash = fontHash;\n\t\t}\n\t\treturn changed;\n\t}\n\n\tprotected _checkComputedStyles(): void {\n\t\tif (this._updateComputedStyles()) {\n\t\t\tthis._invalidateLabelBounds(this.container);\n\t\t}\n\t}\n\n\tprotected _invalidateLabelBounds(target: Sprite): void {\n\t\tif (target instanceof Container) {\n\t\t\ttarget.children.each((child) => {\n\t\t\t\tthis._invalidateLabelBounds(child);\n\t\t\t});\n\t\t}\n\t\telse if (target instanceof Text) {\n\t\t\ttarget.markDirtyBounds();\n\t\t}\n\t}\n\n\t/**\n\t * To all the clever heads out there. Yes, we did not make any attempts to\n\t * scramble this.\n\t *\n\t * This is a part of a tool meant for our users to manage their commercial\n\t * licenses for removal of amCharts branding from charts.\n\t *\n\t * The only legit way to do so is to purchase a commercial license for amCharts:\n\t * https://www.amcharts.com/online-store/\n\t *\n\t * Removing or altering this code, or disabling amCharts branding in any other\n\t * way is against the license and thus illegal.\n\t */\n\tprotected _hasLicense(): boolean {\n\t\tfor (let i = 0; i < registry.licenses.length; i++) {\n\t\t\tif (registry.licenses[i].match(/^AM5C.{5,}/i)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic _licenseApplied(): void {\n\t\tif (this._logo) {\n\t\t\tthis._logo.set(\"forceHidden\", true);\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic get debugGhostView(): boolean {\n\t\treturn this._renderer.debugGhostView;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic set debugGhostView(value: boolean) {\n\t\tthis._renderer.debugGhostView = value;\n\t}\n\n\t/**\n\t * Set this to `true` if you need chart to require first a tap onto it before\n\t * touch gesture related functionality like zoom/pan is turned on.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#Touch_related_options} for more info\n\t * @default false\n\t * @since 5.2.9\n\t * @param  value  Needs a tap to activate touch functions\n\t */\n\tpublic set tapToActivate(value: boolean) {\n\t\tthis._renderer.tapToActivate = value;\n\t}\n\n\t/**\n\t * @return Needs a tap to activate touch functions\n\t */\n\tpublic get tapToActivate(): boolean {\n\t\treturn this._renderer.tapToActivate;\n\t}\n\n\t/**\n\t * If `tapToActivate` is set to `true`, this setting will determine number\n\t * of milliseconds the chart will stay \"active\", before releasing the\n\t * controls back to the page.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#Touch_related_options} for more info\n\t * @default 3000\n\t * @since 5.2.9\n\t * @param  value  Timeout\n\t */\n\tpublic set tapToActivateTimeout(value: number) {\n\t\tthis._renderer.tapToActivateTimeout = value;\n\t}\n\n\t/**\n\t * @return Timeout\n\t */\n\tpublic get tapToActivateTimeout(): number {\n\t\treturn this._renderer.tapToActivateTimeout;\n\t}\n\n\tpublic _makeHTMLElement(target: Container): HTMLDivElement {\n\n\t\t// Get container\n\t\tconst container = this._htmlElementContainer!;\n\n\t\t// Init\n\t\tconst htmlElement = document.createElement(\"div\");\n\t\ttarget.setPrivate(\"htmlElement\", htmlElement);\n\n\t\t//htmlElement.tabIndex = this.tabindex;\n\t\thtmlElement.style.position = \"absolute\";\n\t\thtmlElement.style.overflow = \"auto\";\n\t\thtmlElement.style.boxSizing = \"border-box\";\n\n\t\t// Translate events\n\t\tif (target.events.isEnabled(\"click\")) {\n\t\t\tthis._disposers.push($utils.addEventListener<PointerEvent | MouseEvent>(htmlElement, \"click\", (ev: IPointerEvent) => {\n\t\t\t\tconst downEvent = this._renderer.getEvent(ev);\n\t\t\t\ttarget.events.dispatch(\"click\", {\n\t\t\t\t\ttype: \"click\",\n\t\t\t\t\toriginalEvent: downEvent.event,\n\t\t\t\t\tpoint: downEvent.point,\n\t\t\t\t\tsimulated: false,\n\t\t\t\t\ttarget: target\n\t\t\t\t});\n\t\t\t}));\n\t\t}\n\n\t\tthis._positionHTMLElement(target);\n\n\t\tcontainer.append(htmlElement);\n\n\t\t$array.pushOne(this._htmlEnabledContainers, target);\n\n\t\treturn htmlElement;\n\t}\n\n\tpublic _positionHTMLElements(): void {\n\t\t$array.each(this._htmlEnabledContainers, (target) => {\n\t\t\tthis._positionHTMLElement(target);\n\t\t});\n\t}\n\n\tpublic _positionHTMLElement(target: Container): void {\n\t\tconst htmlElement = target.getPrivate(\"htmlElement\");\n\t\tif (htmlElement) {\n\n\t\t\t// Translate settings\n\t\t\tconst visualSettings = [\"paddingTop\", \"paddingRight\", \"paddingBottom\", \"paddingLeft\", \"minWidth\", \"minHeight\", \"maxWidth\", \"maxHeight\"];\n\t\t\t$array.each(visualSettings, (setting: any) => {\n\t\t\t\tconst value = target.get(setting);\n\t\t\t\tif (value) {\n\t\t\t\t\thtmlElement.style[setting] = value + \"px\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\thtmlElement.style[setting] = \"\";\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Deal with opacity\n\t\t\tconst opacity = target.compositeOpacity();\n\t\t\tsetTimeout(() => {\n\t\t\t\thtmlElement.style.opacity = opacity + \"\";\n\t\t\t}, 10);\n\n\t\t\tconst visible = target.isVisibleDeep();\n\t\t\tif (visible) {\n\t\t\t\thtmlElement.style.display = \"block\";\n\t\t\t}\n\n\t\t\t// Deal with position\n\t\t\tconst bounds = target.globalBounds();\n\t\t\thtmlElement.style.top = (bounds.top) + \"px\";\n\t\t\thtmlElement.style.left = (bounds.left) + \"px\";\n\n\t\t\t// Use width/height if those are set\n\t\t\tconst width = target.get(\"width\");\n\t\t\tconst height = target.get(\"height\");\n\n\t\t\tlet w: number = 0;\n\t\t\tlet h: number = 0;\n\n\t\t\tif (width) {\n\t\t\t\tw = target.width();\n\t\t\t}\n\n\t\t\tif (height) {\n\t\t\t\th = target.height();\n\t\t\t}\n\n\t\t\tif (!width || !height) {\n\t\t\t\thtmlElement.style.width = \"\";\n\t\t\t\thtmlElement.style.height = \"\";\n\t\t\t\tconst bbox = htmlElement.getBoundingClientRect();\n\t\t\t\tw = bbox.width;\n\t\t\t\th = bbox.height;\n\n\t\t\t\ttarget._adjustedLocalBounds = { left: 0, right: 0, top: 0, bottom: 0 };\n\t\t\t\ttarget.setPrivate(\"minWidth\", w);\n\t\t\t\ttarget.setPrivate(\"minHeight\", h);\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttarget.removePrivate(\"minWidth\");\n\t\t\t\ttarget.removePrivate(\"minHeight\");\n\t\t\t}\n\n\t\t\tif (w > 0) {\n\t\t\t\thtmlElement.style.minWidth = (w) + \"px\";\n\t\t\t}\n\t\t\tif (h > 0) {\n\t\t\t\thtmlElement.style.minHeight = (h) + \"px\";\n\t\t\t}\n\n\t\t\t// Hide or show\n\t\t\tif (!visible || opacity == 0) {\n\t\t\t\thtmlElement.style.display = \"none\";\n\t\t\t}\n\n\t\t}\n\t}\n\n\tpublic _setHTMLContent(target: Container, html: string): void {\n\t\tlet htmlElement = target.getPrivate(\"htmlElement\");\n\t\tif (!htmlElement) {\n\t\t\thtmlElement = this._makeHTMLElement(target);\n\t\t}\n\t\tif (htmlElement.innerHTML != html) {\n\t\t\thtmlElement.innerHTML = html;\n\t\t}\n\t}\n\n\tpublic _removeHTMLContent(target: Container): void {\n\t\tlet htmlElement = target.getPrivate(\"htmlElement\");\n\t\tif (htmlElement) {\n\t\t\tthis._htmlElementContainer!.removeChild(htmlElement);\n\t\t}\n\t\t$array.remove(this._htmlEnabledContainers, target);\n\t}\n}\n", "import type { Root } from \"../Root\"\n\nimport { Entity, IEntitySettings, IEntityPrivate, IEntityEvents } from \"./Entity\";\nimport { StyleRule } from \"./Utils\"\nimport { MultiDisposer, IDisposer, CounterDisposer } from \"../../core/util/Disposer\";\n\nimport * as $utils from \"./Utils\"\n\n\n/**\n * @ignore\n */\nlet rules: CounterDisposer | undefined;\n\n/**\n * @ignore\n */\nfunction modalCSS(element: ShadowRoot | null, root: Root, _prefix?: string): IDisposer {\n\tconst ic = root.interfaceColors;\n\tconst active = ic.get(\"secondaryButton\")!.toCSS();\n\tconst text = ic.get(\"text\")!.toCSS();\n\tconst shadow = ic.get(\"alternativeBackground\")!.toCSS(0.45);\n\t//const altbg = ic.get(\"alternativeBackground\")!.toCSS();\n\n\tif (!rules) {\n\t\tconst disposer = new MultiDisposer([\n\n\t\t\tnew StyleRule(element, \".am5-modal\", {\n\t\t\t\t\"width\": \"100%\",\n\t\t\t\t\"height\": \"100%\",\n\t\t\t\t\"position\": \"absolute\",\n\t\t\t\t\"z-index\": \"100000\",\n\t\t\t\t\"top\": \"0\",\n\t\t\t\t\"left\": \"0\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-curtain\", {\n\t\t\t\t\"top\": \"0\",\n\t\t\t\t\"left\": \"0\",\n\t\t\t\t\"width\": \"100%\",\n\t\t\t\t\"height\": \"100%\",\n\t\t\t\t\"position\": \"absolute\",\n\t\t\t\t\"background\": ic.get(\"background\")!.toCSS(0.5),\n\t\t\t\t\"z-index\": \"100\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-wrapper\", {\n\t\t\t\t\"top\": \"0\",\n\t\t\t\t\"left\": \"0\",\n\t\t\t\t\"width\": \"100%\",\n\t\t\t\t\"height\": \"100%\",\n\t\t\t\t\"position\": \"absolute\",\n\t\t\t\t\"text-align\": \"center\",\n\t\t\t\t\"white-space\": \"nowrap\",\n\t\t\t\t\"background\": ic.get(\"background\")!.toCSS(0.5),\n\t\t\t\t\"z-index\": \"101\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-wrapper:before\", {\n\t\t\t\t\"content\": \"''\",\n\t\t\t\t\"display\": \"inline-block\",\n\t\t\t\t\"height\": \"100%\",\n\t\t\t\t\"vertical-align\": \"middle\",\n\t\t\t\t\"margin-right\": \"-0.25em\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-content\", {\n\t\t\t\t\"display\": \"inline-block\",\n\t\t\t\t\"padding\": \"1.2em\",\n\t\t\t\t\"vertical-align\": \"middle\",\n\t\t\t\t\"text-align\": \"left\",\n\t\t\t\t\"white-space\": \"normal\",\n\t\t\t\t\"background\": ic.get(\"background\")!.toCSS(),\n\t\t\t\t//\"border\": \"1px solid \" + ic.get(\"alternativeBackground\")!.toCSS(),\n\t\t\t\t\"border-radius\": \"4px\",\n\t\t\t\t\"-webkit-box-shadow\": \"0px 0px 36px 0px \" + shadow,\n\t\t\t\t\"box-shadow\": \"0px 0px 36px 0px \" + shadow,\n\t\t\t\t\"color\": text\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-content h1\", {\n\t\t\t\t\"font-size\": \"1em\",\n\t\t\t\t\"margin\": \"0 0 0.5em 0\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-table\", {\n\t\t\t\t\"display\": \"table\",\n\t\t\t\t\"margin\": \"1em 0\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-table-row\", {\n\t\t\t\t\"display\": \"table-row\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-table-heading\", {\n\t\t\t\t\"display\": \"table-heading\",\n\t\t\t\t\"padding\": \"3px 10px 3px 0\",\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-table-cell\", {\n\t\t\t\t\"display\": \"table-cell\",\n\t\t\t\t\"padding\": \"3px 0 3px 0\",\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-table-cell > *\", {\n\t\t\t\t\"vertical-align\": \"middle\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-content input[type=text], .am5-modal-content input[type=number], .am5-modal-content select\", {\n\t\t\t\t\"border\": \"1px solid \" + active,\n\t\t\t\t\"border-radius\": \"4px\",\n\t\t\t\t\"padding\": \"3px 5px\",\n\t\t\t\t\"margin\": \"2px\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-input-narrow\", {\n\t\t\t\t\"width\": \"50px\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-button\", {\n\t\t\t\t\"font-weight\": \"400\",\n\t\t\t\t\"color\": ic.get(\"secondaryButtonText\")!.toCSS(),\n\t\t\t\t\"line-height\": \"1.5\",\n\t\t\t\t\"text-align\": \"center\",\n\t\t\t\t\"text-decoration\": \"none\",\n\t\t\t\t\"vertical-align\": \"middle\",\n\t\t\t\t\"cursor\": \"pointer\",\n\t\t\t\t\"padding\": \"0.2em 0.8em\",\n\t\t\t\t\"font-size\": \"1em\",\n\t\t\t\t\"border-radius\": \"0.25em\",\n\t\t\t\t\"margin\": \"0 0.25em 0 0\",\n\t\t\t\t\"border\": \"1px solid \" + ic.get(\"secondaryButtonStroke\")!.toCSS(),\n\t\t\t\t\"background\": ic.get(\"secondaryButton\")!.toCSS()\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-button:hover\", {\n\t\t\t\t\"background\": ic.get(\"secondaryButtonHover\")!.toCSS()\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-button.am5-modal-primary\", {\n\t\t\t\t\"color\": ic.get(\"primaryButtonText\")!.toCSS(),\n\t\t\t\t\"border\": \"1px solid \" + ic.get(\"primaryButtonStroke\")!.toCSS(),\n\t\t\t\t\"background\": ic.get(\"primaryButton\")!.toCSS()\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-button.am5-modal-primary:hover\", {\n\t\t\t\t\"background\": ic.get(\"primaryButtonHover\")!.toCSS()\n\t\t\t}),\n\n\t\t]);\n\n\t\trules = new CounterDisposer(() => {\n\t\t\trules = undefined;\n\t\t\tdisposer.dispose();\n\t\t});\n\t}\n\n\treturn rules.increment();\n}\n\n\nexport interface IModalSettings extends IEntitySettings {\n\n\t/**\n\t * HTML content of the modal.\n\t */\n\tcontent?: string;\n\n\t/**\n\t * When modal is open, all interactions for the underlying chart will be\n\t * disabled.\n\t *\n\t * @default true\n\t * @since 5.2.11\n\t */\n\tdeactivateRoot?: boolean;\n\n}\n\nexport interface IModalPrivate extends IEntityPrivate {\n\tcontainer: HTMLDivElement;\n\tcurtain: HTMLDivElement;\n\twrapper: HTMLDivElement;\n\tcontent: HTMLDivElement;\n}\n\nexport interface IModalEvents extends IEntityEvents {\n\t\"opened\": {}\n\t\"closed\": {}\n\t\"cancelled\": {}\n}\n\n/**\n * Used to display a modal dialog with HTML content.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/modal-popups/} for more info\n */\nexport class Modal extends Entity {\n\tpublic static className: string = \"Modal\";\n\tpublic static classNames: Array<string> = Entity.classNames.concat([Modal.className]);\n\n\tdeclare public _settings: IModalSettings;\n\tdeclare public _privateSettings: IModalPrivate;\n\tdeclare public _events: IModalEvents;\n\n\t//protected _currentPass: number = 0;\n\n\tprotected _afterNew() {\n\t\t// Applying themes because this will not have parents\n\t\tsuper._afterNewApplyThemes();\n\n\t\t// Defaults\n\t\tthis._setRawDefault(\"deactivateRoot\", true);\n\n\t\t// Load CSS\n\t\tmodalCSS($utils.getShadowRoot(this._root.dom), this._root);\n\n\t\t// Create elements\n\t\tconst container = document.createElement(\"div\");\n\t\tcontainer.className = \"am5-modal\";\n\t\tcontainer.style.display = \"none\";\n\t\tthis.root._inner.appendChild(container);\n\t\tthis.setPrivate(\"container\", container);\n\n\t\tconst curtain = document.createElement(\"div\");\n\t\tcurtain.className = \"am5-modal-curtain\";\n\t\tcontainer.appendChild(curtain);\n\t\tthis.setPrivate(\"curtain\", curtain);\n\n\t\t$utils.addEventListener(curtain, \"click\", () => {\n\t\t\tthis.cancel();\n\t\t});\n\n\t\tconst wrapper = document.createElement(\"div\");\n\t\twrapper.className = \"am5-modal-wrapper\";\n\t\tcontainer.appendChild(wrapper);\n\t\tthis.setPrivate(\"wrapper\", wrapper);\n\n\t\tconst content = document.createElement(\"div\");\n\t\tcontent.className = \"am5-modal-content\";\n\t\twrapper.appendChild(content);\n\t\tthis.setPrivate(\"content\", content);\n\n\t\tconst html = this.get(\"content\");\n\t\tif (html) {\n\t\t\tcontent.innerHTML = html;\n\t\t}\n\n\t\t// Close on ESC\n\t\tif ($utils.supports(\"keyboardevents\")) {\n\t\t\tthis._disposers.push($utils.addEventListener(document, \"keydown\", (ev: KeyboardEvent) => {\n\t\t\t\tif (this.isOpen() && ev.keyCode == 27) {\n\t\t\t\t\tthis.cancel();\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t}\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tif (this.isDirty(\"content\")) {\n\t\t\tthis.getPrivate(\"content\").innerHTML = this.get(\"content\", \"\");\n\t\t}\n\t}\n\n\t/**\n\t * Returns `true` if modal is currently open.\n\t * \n\t * @return  Modal open?\n\t */\n\tpublic isOpen(): boolean {\n\t\treturn this.getPrivate(\"container\").style.display != \"none\";\n\t}\n\n\t/**\n\t * Opens modal.\n\t */\n\tpublic open(): void {\n\t\tthis.getPrivate(\"container\").style.display = \"block\";\n\t\tif (this.get(\"deactivateRoot\")) {\n\t\t\tthis.setTimeout(() => {\n\t\t\t\tthis._root._renderer.interactionsEnabled = false;\n\t\t\t}, 10);\n\t\t}\n\t\tthis.events.dispatch(\"opened\", {\n\t\t\ttype: \"opened\",\n\t\t\ttarget: this\n\t\t});\n\t}\n\n\t/**\n\t * Closes modal.\n\t */\n\tpublic close(): void {\n\t\tthis.getPrivate(\"container\").style.display = \"none\";\n\t\tif (this.get(\"deactivateRoot\")) {\n\t\t\tthis._root._renderer.interactionsEnabled = true;\n\t\t}\n\t\tthis.events.dispatch(\"closed\", {\n\t\t\ttype: \"closed\",\n\t\t\ttarget: this\n\t\t});\n\t}\n\n\t/**\n\t * Closes modal and invokes `cancelled` event.\n\t */\n\tpublic cancel(): void {\n\t\tthis.getPrivate(\"container\").style.display = \"none\";\n\t\tif (this.get(\"deactivateRoot\")) {\n\t\t\tthis._root._renderer.interactionsEnabled = true;\n\t\t}\n\t\tthis.events.dispatch(\"cancelled\", {\n\t\t\ttype: \"cancelled\",\n\t\t\ttarget: this\n\t\t});\n\t}\n\n\t/**\n\t * Disposes modal.\n\t */\n\tpublic dispose() {\n\t\tsuper.dispose();\n\t\tthis.root.dom.removeChild(this.getPrivate(\"container\"));\n\t}\n\n}", "import { Entity, IEntitySettings, IEntityPrivate } from \"../../core/util/Entity\";\nimport type { Sprite } from \"../../core/render/Sprite\";\nimport type { Series } from \"../../core/render/Series\";\n\nexport interface IBulletSettings extends IEntitySettings {\n\n\t/**\n\t * Horizontal location within target element.\n\t *\n\t * 0 - left, 1 - right, or anything inbetweeen.\n\t */\n\tlocationX?: number;\n\n\t/**\n\t * Vertical location within target element.\n\t *\n\t * 0 - top, 1 - bottom, or anything inbetweeen.\n\t */\n\tlocationY?: number;\n\n\t/**\n\t * A visual element of the bullet.\n\t */\n\tsprite: Sprite;\n\n\t/**\n\t * If set to `true`, the bullet will redraw its `sprite` element whenever\n\t * anything in its parent series changes.\n\t *\n\t * @default false\n\t */\n\tdynamic?: boolean;\n\n\t/**\n\t * If set to `true`, the bullet will be automatically rotated to face\n\t * direction of line it is attached to.\n\t *\n\t * NOTE: Works only in  [[Flow]] and [[MapPointSeries]] (when [[MapPoint]] is\n\t * attached to a [[MapLine]]).\n\t *\n\t * @default false\n\t */\n\tautoRotate?: boolean;\n\n\t/**\n\t * If `autoRotate` is set to `true`, value of `autoRotateAngle` will be added\n\t * to the automatically-calculated angle.\n\t */\n\tautoRotateAngle?: number;\n\n}\n\nexport interface IBulletPrivate extends IEntityPrivate {\n\thidden?:boolean;\n}\n\n/**\n * A universal placeholder for bullet elements.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/bullets/} for more info\n */\nexport class Bullet extends Entity {\n\tpublic static className: string = \"Bullet\";\n\tpublic static classNames: Array<string> = Entity.classNames.concat([Bullet.className]);\n\n\tdeclare public _settings: IBulletSettings;\n\tdeclare public _privateSettings: IBulletPrivate;\n\n\t// used by MapPolygons where one data item can have multiple bullets of the same kind\n\tpublic _index?: number;\n\n\t/**\n\t * Target series object if it's a bullet for series.\n\t */\n\tpublic series: Series | undefined;\n\n\tprotected _afterNew() {\n\t\t// Applying themes because bullet will not have parent\n\t\tsuper._afterNewApplyThemes();\n\t}\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tif (this.isDirty(\"sprite\")) {\n\t\t\tconst sprite = this.get(\"sprite\");\n\t\t\tif (sprite) {\n\t\t\t\tsprite.setAll({ position: \"absolute\", role: \"figure\" });\n\t\t\t\tthis._disposers.push(sprite);\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDirty(\"locationX\") || this.isDirty(\"locationY\")) {\n\t\t\tif (this.series) {\n\t\t\t\tthis.series._positionBullet(this);\n\t\t\t}\n\t\t}\n\t}\n}\n", "import { Graphics, IGraphicsSettings, IGraphicsPrivate } from \"./Graphics\";\n\nexport interface ICircleSettings extends IGraphicsSettings {\n\n\t/**\n\t * Circle radius in pixels.\n\t */\n\tradius?: number;\n\n}\n\nexport interface ICirclePrivate extends IGraphicsPrivate {\n}\n\n/**\n * Draws a circle.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\n * @important\n */\nexport class Circle extends Graphics {\n\n\tdeclare public _settings: ICircleSettings;\n\tdeclare public _privateSettings: ICirclePrivate;\n\n\tpublic static className: string = \"Circle\";\n\tpublic static classNames: Array<string> = Graphics.classNames.concat([Circle.className]);\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tif (this.isDirty(\"radius\")) {\n\t\t\tthis._clear = true;\n\t\t}\n\t}\n\n\tpublic _changed() {\n\t\tsuper._changed();\n\n\t\tif (this._clear) {\n\t\t\tthis._display.drawCircle(0, 0, this.get(\"radius\", 10));\n\t\t}\n\t}\n}\n", "import { Graphics, IGraphicsSettings, IGraphicsPrivate } from \"./Graphics\";\r\n\r\nexport interface IEllipseSettings extends IGraphicsSettings {\r\n\r\n\t/**\r\n\t * The ellipse's major-axis radius. Must be non-negative.\r\n\t */\r\n\r\n\tradiusX: number\r\n\r\n\t/**\r\n\t * The ellipse's minor-axis radius. Must be non-negative.\r\n\t */\r\n\tradiusY: number\r\n}\r\n\r\nexport interface IEllipsePrivate extends IGraphicsPrivate {\r\n}\r\n\r\n/**\r\n * Draws a Ellipse.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\r\n * @important\r\n */\r\nexport class Ellipse extends Graphics {\r\n\r\n\tdeclare public _settings: IEllipseSettings;\r\n\tdeclare public _privateSettings: IEllipsePrivate;\r\n\r\n\tpublic static className: string = \"Ellipse\";\r\n\tpublic static classNames: Array<string> = Graphics.classNames.concat([Ellipse.className]);\r\n\r\n\tpublic _beforeChanged() {\r\n\t\tsuper._beforeChanged();\r\n\r\n\t\tif (this.isDirty(\"radiusX\") || this.isDirty(\"radiusY\") || this.isDirty(\"rotation\")) {\r\n\t\t\tthis._clear = true;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic _changed() {\r\n\t\tsuper._changed();\r\n\r\n\t\tif (this._clear) {\r\n\t\t\tthis._display.drawEllipse(0, 0, Math.abs(this.get(\"radiusX\")), Math.abs(this.get(\"radiusY\")));\r\n\t\t}\r\n\t}\r\n}\r\n", "import { Graphics, IGraphicsSettings, IGraphicsPrivate } from \"./Graphics\";\r\nimport type { Percent } from \"../../core/util/Percent\";\r\nimport * as $utils from \"../../core/util/Utils\";\r\n\r\nexport interface IStarSettings extends IGraphicsSettings {\r\n\r\n\t/**\r\n\t * Star's radius in pixels.\r\n\t */\r\n\tradius?: number;\r\n\r\n\t/**\r\n\t * Star's inner radius in pixels.\r\n\t */\r\n\tinnerRadius?: number | Percent;\r\n\r\n\t/**\r\n\t * Number of spikes\r\n\t */\r\n\tspikes?: number;\r\n\r\n}\r\n\r\nexport interface IStarPrivate extends IGraphicsPrivate {\r\n}\r\n\r\n/**\r\n * Draws a Star.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\r\n * @important\r\n */\r\nexport class Star extends Graphics {\r\n\r\n\tdeclare public _settings: IStarSettings;\r\n\tdeclare public _privateSettings: IStarPrivate;\r\n\r\n\tpublic static className: string = \"Star\";\r\n\tpublic static classNames: Array<string> = Graphics.classNames.concat([Star.className]);\r\n\r\n\tpublic _beforeChanged() {\r\n\t\tsuper._beforeChanged();\r\n\r\n\t\tif (this.isDirty(\"radius\") || this.isDirty(\"innerRadius\") || this.isDirty(\"spikes\")) {\r\n\t\t\tthis._clear = true;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic _changed() {\r\n\t\tsuper._changed();\r\n\r\n\t\tif (this._clear) {\r\n\t\t\tconst display = this._display;\r\n\t\t\tconst r = this.get(\"radius\", 0);\r\n\t\t\tconst ir = $utils.relativeToValue(this.get(\"innerRadius\", 0), r);\r\n\t\t\tconst spikes = this.get(\"spikes\", 0);\r\n\t\t\tconst step = Math.PI / spikes;\r\n\t\t\tlet angle = Math.PI / 2 * 3;\r\n\r\n\t\t\tdisplay.moveTo(0, - r)\r\n\r\n\t\t\tfor (let i = 0; i < spikes; i++) {\r\n\t\t\t\tdisplay.lineTo(Math.cos(angle) * r, Math.sin(angle) * r)\r\n\t\t\t\tangle += step\r\n\r\n\t\t\t\tdisplay.lineTo(Math.cos(angle) * ir, Math.sin(angle) * ir)\r\n\t\t\t\tangle += step\r\n\t\t\t}\r\n\t\t\tdisplay.lineTo(0, -r)\r\n\t\t}\r\n\t}\r\n}\r\n", "import type { IBounds } from \"../../util/IBounds\"\nimport type { IGradient, IGradientStop } from \"../backend/Renderer\";\nimport type { Sprite } from \"../Sprite\";\n\nimport { Entity, IEntitySettings, IEntityPrivate } from \"../../util/Entity\"\n\n\nexport interface IGradientSettings extends IEntitySettings {\n\n\t/**\n\t * A list of color steps for the gradient.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/gradients/} for more info\n\t */\n\tstops?: Array<IGradientStop>;\n\n\t/**\n\t * Gradient target.\n\t */\n\ttarget?: Sprite;\n\n}\n\nexport interface IGradientPrivate extends IEntityPrivate {\n}\n\n/**\n * Base class for gradients.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/gradients/} for more info\n */\nexport abstract class Gradient extends Entity {\n\n\tdeclare public _settings: IGradientSettings;\n\tdeclare public _privateSettings: IGradientPrivate;\n\n\tpublic static className: string = \"Gradient\";\n\tpublic static classNames: Array<string> = Entity.classNames.concat([Gradient.className]);\n\n\tprotected _afterNew() {\n\t\t// Applying themes because gradient will not have parent\n\t\tsuper._afterNewApplyThemes();\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic getFill(_target: Sprite): IGradient {\n\t\treturn {\n\t\t\taddColorStop: (_offset: number, _color: string) => { }\n\t\t};\n\t}\n\n\tpublic _changed() {\n\t\tsuper._changed();\n\n\t\t//if (this.isDirty(\"target\") && this.get(\"target\")) {\n\t\t//\tthis.get(\"target\")!.events.on(\"boundschanged\", () => {\n\n\t\t//\t});\n\t\t//}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic getBounds(target: Sprite): IBounds {\n\t\tconst gradientTarget = this.get(\"target\");\n\t\tif (gradientTarget) {\n\t\t\tlet bounds = gradientTarget.globalBounds();\n\n\t\t\tconst p0 = target.toLocal({ x: bounds.left, y: bounds.top });\n\t\t\tconst p1 = target.toLocal({ x: bounds.right, y: bounds.top });\n\t\t\tconst p2 = target.toLocal({ x: bounds.right, y: bounds.bottom });\n\t\t\tconst p3 = target.toLocal({ x: bounds.left, y: bounds.bottom });\n\n\t\t\treturn {\n\t\t\t\tleft: Math.min(p0.x, p1.x, p2.x, p3.x),\n\t\t\t\ttop: Math.min(p0.y, p1.y, p2.y, p3.y),\n\t\t\t\tright: Math.max(p0.x, p1.x, p2.x, p3.x),\n\t\t\t\tbottom: Math.max(p0.y, p1.y, p2.y, p3.y)\n\t\t\t}\n\t\t}\n\t\treturn target._display.getLocalBounds();\n\t}\n\n}\n", "import type { IGradient } from \"../backend/Renderer\";\nimport type { Sprite } from \"../Sprite\";\n\nimport { Gradient, IGradientSettings, IGradientPrivate } from \"./Gradient\";\nimport { Color } from \"../../util/Color\";\n\nimport * as $array from \"../../util/Array\";\nimport * as $type from \"../../util/Type\";\nimport * as $math from \"../../util/Math\";\n\n\nexport interface ILinearGradientSettings extends IGradientSettings {\n\n\t/**\n\t * Gradient rotation, in degrees.\n\t *\n\t * @default 90\n\t */\n\trotation?: number;\n\n}\n\nexport interface ILinearGradientPrivate extends IGradientPrivate {\n}\n\n/**\n * Linear gradient.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/gradients/} for more info\n */\nexport class LinearGradient extends Gradient {\n\n\tdeclare public _settings: ILinearGradientSettings;\n\tdeclare public _privateSettings: ILinearGradientPrivate;\n\n\tpublic static className: string = \"LinearGradient\";\n\tpublic static classNames: Array<string> = Gradient.classNames.concat([LinearGradient.className]);\n\n\t/**\n\t * @ignore\n\t */\n\tpublic getFill(target: Sprite): IGradient {\n\t\tconst rotation = this.get(\"rotation\", 0);\n\t\tlet bounds = this.getBounds(target);\n\n\t\tlet l = bounds.left || 0;\n\t\tlet r = bounds.right || 0;\n\t\tlet t = bounds.top || 0;\n\t\tlet b = bounds.bottom || 0;\n\n\t\tlet cos = $math.cos(rotation);\n\t\tlet sin = $math.sin(rotation);\n\n\t\tlet w = cos * (r - l);\n\t\tlet h = sin * (b - t);\n\n\t\tlet longer = Math.max(w, h);\n\n\t\tconst gradient = this._root._renderer.createLinearGradient(\n\t\t\tl,\n\t\t\tt,\n\t\t\tl + longer * cos,\n\t\t\tt + longer * sin\n\t\t);\n\n\t\tconst stops = this.get(\"stops\")!;\n\t\tif (stops) {\n\t\t\tlet i = 0;\n\t\t\t$array.each(stops, (stop) => {\n\n\t\t\t\tlet offset = stop.offset;\n\n\t\t\t\tif (!$type.isNumber(offset)) {\n\t\t\t\t\toffset = i / (stops.length - 1);\n\t\t\t\t}\n\n\t\t\t\tlet opacity = stop.opacity;\n\n\t\t\t\tif (!$type.isNumber(opacity)) {\n\t\t\t\t\topacity = 1;\n\t\t\t\t}\n\n\t\t\t\tlet color = stop.color;\n\n\t\t\t\tif (color) {\n\n\t\t\t\t\tconst lighten = stop.lighten;\n\t\t\t\t\tif (lighten) {\n\t\t\t\t\t\tcolor = Color.lighten(color, lighten)\n\t\t\t\t\t}\n\n\t\t\t\t\tconst brighten = stop.brighten;\n\t\t\t\t\tif (brighten) {\n\t\t\t\t\t\tcolor = Color.brighten(color, brighten)\n\t\t\t\t\t}\n\n\t\t\t\t\tgradient.addColorStop(offset, 'rgba(' + color.r + ',' + color.g + ',' + color.b + ',' + opacity + ')');\n\t\t\t\t}\n\t\t\t\ti++;\n\t\t\t})\n\t\t}\n\t\treturn gradient;\n\t}\n}\n", "import type { IPoint } from \"../../core/util/IPoint\";\n\nimport { Container, IContainerSettings, IContainerPrivate } from \"./Container\";\nimport { Label } from \"../../core/render/Label\";\nimport { p100 } from \"../../core/util/Percent\";\nimport { RoundedRectangle } from \"../../core/render/RoundedRectangle\";\nimport { Template } from \"../../core/util/Template\";\nimport { ListTemplate } from \"../../core/util/List\";\nimport { Color } from \"../../core/util/Color\";\nimport { Tooltip } from \"../../core/render/Tooltip\";\nimport { LinearGradient } from \"../../core/render/gradients/LinearGradient\";\n\nimport * as $utils from \"../../core/util/Utils\";\nimport * as $type from \"../../core/util/Type\";\n\nexport interface IHeatLegendSettings extends IContainerSettings {\n\n\t/**\n\t * Starting (lowest value) color.\n\t */\n\tstartColor: Color;\n\n\t/**\n\t * Ending (highest value) color.\n\t */\n\tendColor: Color;\n\n\t/**\n\t * Start (lowest) value.\n\t */\n\tstartValue?: number;\n\n\t/**\n\t * End (highest) value.\n\t */\n\tendValue?: number;\n\n\t/**\n\t * Text for start label.\n\t */\n\tstartText?: string;\n\n\t/**\n\t * Text for end label.\n\t */\n\tendText?: string;\n\n\t/**\n\t * Number of steps\n\t *\n\t * @default 1\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/legend/heat-legend/#Gradient_or_steps} for more info\n\t */\n\tstepCount?: number;\n\n\t/**\n\t * Orientation of the heat legend.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/legend/heat-legend/#Orientation} for more info\n\t */\n\torientation: \"horizontal\" | \"vertical\";\n\n}\n\nexport interface IHeatLegendPrivate extends IContainerPrivate {\n}\n\n/**\n * Heat legend.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/legend/heat-legend/} for more info\n */\nexport class HeatLegend extends Container {\n\n\t/**\n\t * A [[Container]] that all labels are placed in.\n\t *\n\t * @default Container.new()\n\t */\n\tpublic readonly labelContainer: Container = this.children.push(Container.new(this._root, {}));\n\n\t/**\n\t * A [[Container]] that all markers are placed in.\n\t *\n\t * @default Container.new()\n\t */\n\tpublic readonly markerContainer: Container = this.children.push(Container.new(this._root, {}));\n\n\t/**\n\t * A start [[Label]].\n\t *\n\t * @default Label.new()\n\t */\n\tpublic readonly startLabel: Label = this.labelContainer.children.push(Label.new(this._root, { themeTags: [\"start\"] }));\n\n\t/**\n\t * An end [[Label]].\n\t *\n\t * @default Label.new()\n\t */\n\tpublic readonly endLabel: Label = this.labelContainer.children.push(Label.new(this._root, { themeTags: [\"end\"] }));\n\n\tpublic static className: string = \"HeatLegend\";\n\tpublic static classNames: Array<string> = Container.classNames.concat([HeatLegend.className]);\n\n\tdeclare public _settings: IHeatLegendSettings;\n\tdeclare public _privateSettings: IHeatLegendPrivate;\n\n\n\tprotected _afterNew() {\n\t\tthis._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"heatlegend\", this._settings.orientation]);\n\t\tsuper._afterNew();\n\t\tthis.set(\"tooltip\", Tooltip.new(this._root, {\n\t\t\tthemeTags: [\"heatlegend\"]\n\t\t}));\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeMarker(): RoundedRectangle {\n\t\tconst marker = this.markers.make();\n\t\tmarker.states.create(\"disabled\", {});\n\t\treturn marker;\n\t}\n\n\t/**\n\t * List of rectangle elements used for default legend markers.\n\t *\n\t * @default new ListTemplate<RoundedRectangle>\n\t */\n\tpublic readonly markers: ListTemplate<RoundedRectangle> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => RoundedRectangle._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.markers.template.get(\"themeTags\", []), [this.get(\"orientation\"), \"heatlegend\", \"marker\"])\n\t\t}, [this.markers.template])\n\t);\n\n\n\t/**\n\t * Moves and shows tooltip at specific value.\n\t *\n\t * Can also specify optional text to show in tooltip, as well as the color.\n\t *\n\t * @param  value  Value\n\t * @param  text   Text\n\t * @param  color  Color\n\t */\n\tpublic showValue(value: number, text?: string, color?: Color) {\n\t\tconst tooltip = this.getTooltip();\n\t\tif (tooltip && $type.isNumber(value)) {\n\n\t\t\tconst startValue = this.get(\"startValue\", 0);\n\t\t\tconst endValue = this.get(\"endValue\", 1);\n\n\t\t\tconst c = (value - startValue) / (endValue - startValue);\n\t\t\tconst startColor = this.get(\"startColor\")!;\n\t\t\tconst endColor = this.get(\"endColor\")!;\n\n\t\t\tif (!text) {\n\t\t\t\ttext = this.getNumberFormatter().format(value);\n\t\t\t}\n\n\t\t\tif (!color) {\n\t\t\t\tcolor = Color.interpolate(c, startColor, endColor);\n\t\t\t}\n\n\t\t\ttooltip.label.set(\"text\", text);\n\t\t\tlet p:IPoint;\n\n\t\t\tif (this.get(\"orientation\") == \"vertical\") {\n\t\t\t\tp = this.markerContainer.toGlobal({ x: 0, y: this.innerHeight() * (1 - c) });\n\t\t\t}\n\t\t\telse {\n\t\t\t\tp = this.markerContainer.toGlobal({ x: this.innerWidth() * c, y: 0 });\n\t\t\t}\n\n\t\t\tlet background = tooltip.get(\"background\");\n\t\t\tif (background) {\n\t\t\t\tbackground.set(\"fill\", Color.interpolate(c, startColor, endColor))\n\t\t\t}\n\t\t\ttooltip.set(\"pointTo\", p);\n\t\t\ttooltip.show();\n\t\t}\n\t}\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\n\t\tconst labelContainer = this.labelContainer;\n\t\tconst orientation = this.get(\"orientation\");\n\t\tconst startLabel = this.startLabel;\n\t\tconst endLabel = this.endLabel;\n\t\tconst tooltip = this.getTooltip();\n\n\t\tif (this.isDirty(\"orientation\")) {\n\t\t\tif (orientation == \"vertical\") {\n\t\t\t\tthis.markerContainer.setAll({ layout: this._root.verticalLayout, height: p100 });\n\t\t\t\tthis.set(\"layout\", this._root.horizontalLayout);\n\t\t\t\tstartLabel.setAll({ y: p100, x: undefined, centerY: p100, centerX: p100 });\n\t\t\t\tendLabel.setAll({ y: 0, x: undefined, centerY: 0, centerX: p100 });\n\t\t\t\tlabelContainer.setAll({ height: p100, width: undefined });\n\t\t\t\tif (tooltip) {\n\t\t\t\t\ttooltip.set(\"pointerOrientation\", \"horizontal\");\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.markerContainer.setAll({ layout: this._root.horizontalLayout, width: p100 });\n\t\t\t\tthis.set(\"layout\", this._root.verticalLayout);\n\t\t\t\tstartLabel.setAll({ x: 0, y: undefined, centerX: 0, centerY: 0 });\n\t\t\t\tendLabel.setAll({ x: p100, y: undefined, centerX: p100, centerY: 0 });\n\t\t\t\tlabelContainer.setAll({ width: p100, height: undefined });\n\t\t\t\tif (tooltip) {\n\t\t\t\t\ttooltip.set(\"pointerOrientation\", \"vertical\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDirty(\"stepCount\")) {\n\t\t\tconst stepCount = this.get(\"stepCount\", 1);\n\t\t\tconst startColor = this.get(\"startColor\")!;\n\t\t\tconst endColor = this.get(\"endColor\")!;\n\t\t\tthis.markerContainer.children.clear();\n\t\t\tif (stepCount > 1) {\n\t\t\t\tfor (let i = 0; i < stepCount; i++) {\n\t\t\t\t\tconst marker = this.makeMarker();\n\n\t\t\t\t\tif (orientation == \"vertical\") {\n\t\t\t\t\t\tthis.markerContainer.children.moveValue(marker, 0);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.markerContainer.children.push(marker);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (startColor && endColor) {\n\t\t\t\t\t\tmarker.set(\"fill\", Color.interpolate(i / stepCount, startColor, endColor));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (stepCount == 1) {\n\t\t\t\tconst marker = this.makeMarker();\n\t\t\t\tthis.markerContainer.children.push(marker);\n\t\t\t\tconst gradient = LinearGradient.new(this._root, { stops: [{ color: startColor }, { color: endColor }] });\n\n\t\t\t\tif (orientation == \"vertical\") {\n\t\t\t\t\tgradient.set(\"rotation\", 90);\n\t\t\t\t\tlet stops = gradient.get(\"stops\");\n\t\t\t\t\tif (stops) {\n\t\t\t\t\t\tstops.reverse();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tgradient.set(\"rotation\", 0);\n\t\t\t\t}\n\t\t\t\tif (startColor && endColor) {\n\t\t\t\t\tmarker.set(\"fillGradient\", gradient);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDirty(\"startText\") || this.isDirty(\"startValue\")) {\n\t\t\tstartLabel.set(\"text\", this.get(\"startText\", this.getNumberFormatter().format(this.get(\"startValue\", 0))));\n\t\t}\n\n\t\tif (this.isDirty(\"endText\") || this.isDirty(\"endValue\")) {\n\t\t\tendLabel.set(\"text\", this.get(\"endText\", this.getNumberFormatter().format(this.get(\"endValue\", 1))))\n\t\t}\n\t}\n}\n", "import type { DataItem } from \"../../core/render/Component\";\nimport { Series, ISeriesSettings, ISeriesDataItem, ISeriesPrivate, ISeriesEvents } from \"./Series\";\nimport { Container } from \"../../core/render/Container\";\nimport { Label } from \"../../core/render/Label\";\nimport { RoundedRectangle } from \"../../core/render/RoundedRectangle\";\nimport { Template } from \"../../core/util/Template\";\nimport { ListTemplate } from \"../../core/util/List\";\nimport type { Entity, IEntitySettings } from \"../../core/util/Entity\";\nimport type { Color } from \"../../core/util/Color\";\nimport * as $utils from \"../../core/util/Utils\";\n\nexport interface ILegendDataItem extends ISeriesDataItem {\n\n\t/**\n\t * [[Container]] element holding all other legend item elements, labels,\n\t * markers, etc.\n\t */\n\titemContainer: Container;\n\n\t/**\n\t * Marker element.\n\t */\n\tmarker: Container;\n\n\t/**\n\t * Marker rectangle element.\n\t */\n\tmarkerRectangle: RoundedRectangle;\n\n\t/**\n\t * Label element.\n\t */\n\tlabel: Label;\n\n\t/**\n\t * Value label element.\n\t */\n\tvalueLabel: Label;\n\n\t/**\n\t * Marker fill color.\n\t */\n\tfill?: Color;\n\n\t/**\n\t * Marker stroke (outline) color.\n\t */\n\tstroke?: Color;\n\n\t/**\n\t * Name of the legend item.\n\t */\n\tname?: string;\n\n}\n\nexport interface ILegendItemSettings extends IEntitySettings {\n\tvisible?: boolean;\n}\n\n/**\n * @ignore\n */\nexport interface ILegendItem extends Entity {\n\t_settings: ILegendItemSettings;\n\tisHidden?: () => boolean;\n\tshow?: () => void;\n\thide?: () => void;\n\tcreateLegendMarker?: () => {}\n\tcomponent?: Series;\n\t// how to define that properties of dataItem should have legendDataItem?\n}\n\n//type ILegendDataItemSettings = { [K in keyof ILegendDataItem]?: string; };\n\nexport interface ILegendSettings extends ISeriesSettings {\n\n\t/**\n\t * If set to `true` the legend will not try to mimic appearance of the actual\n\t * item but rather show default square marker.\n\t *\n\t * @default false\n\t */\n\tuseDefaultMarker?: boolean;\n\n\t/**\n\t * A key to look up in data for a name of the data item.\n\t *\n\t */\n\tnameField?: string;\n\n\t/**\n\t * A key to look up in data for a fill of the data item.\n\t *\n\t */\n\tfillField?: string;\n\n\t/**\n\t * A key to look up in data for a stroke of the data item.\n\t *\n\t */\n\tstrokeField?: string;\n\n\t/**\n\t * Which legend item element will be clickable to toggle related chart item:\n\t * * `\"itemContainer\"` - the whole legend item (default).\n\t * * `\"marker\"` - legend item marker.\n\t * * `\"none\"` - disables toggling of legend item.\n\t *\n\t * @default \"itemContainer\"\n\t * @since 5.0.13\n\t */\n\tclickTarget?: \"itemContainer\" | \"marker\" | \"none\"\n\n}\n\nexport interface ILegendPrivate extends ISeriesPrivate {\n}\n\nexport interface ILegendEvents extends ISeriesEvents {\n\n}\n\n/**\n * A universal legend control.\n *\n * @important\n * @see {@link https://www.amcharts.com/docs/v5/concepts/legend/} for more info\n */\nexport class Legend extends Series {\n\tprotected _afterNew() {\n\t\tthis._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"legend\"]);\n\t\tthis.fields.push(\"name\", \"stroke\", \"fill\");\n\t\tsuper._afterNew();\n\t}\n\n\tpublic static className: string = \"Legend\";\n\tpublic static classNames: Array<string> = Series.classNames.concat([Legend.className]);\n\n\tdeclare public _settings: ILegendSettings;\n\tdeclare public _privateSettings: ILegendPrivate;\n\tdeclare public _dataItemSettings: ILegendDataItem;\n\tdeclare public _events: ILegendEvents;\n\n\n\t/**\n\t * List of all [[Container]] elements for legend items.\n\t *\n\t * @default new ListTemplate<Container>\n\t */\n\tpublic readonly itemContainers: ListTemplate<Container> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => Container._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.itemContainers.template.get(\"themeTags\", []), [\"legend\", \"item\"]),\n\t\t\tthemeTagsSelf: $utils.mergeTags(this.itemContainers.template.get(\"themeTagsSelf\", []), [\"itemcontainer\"]),\n\t\t\tbackground: RoundedRectangle.new(this._root, {\n\t\t\t\tthemeTags: $utils.mergeTags(this.itemContainers.template.get(\"themeTags\", []), [\"legend\", \"item\", \"background\"]),\n\t\t\t\tthemeTagsSelf: $utils.mergeTags(this.itemContainers.template.get(\"themeTagsSelf\", []), [\"itemcontainer\"])\n\t\t\t})\n\t\t}, [this.itemContainers.template])\n\t);\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeItemContainer(dataItem: DataItem<this[\"_dataItemSettings\"]>): Container {\n\t\tconst itemContainer = this.children.push(this.itemContainers.make());\n\t\titemContainer._setDataItem(dataItem);\n\t\tthis.itemContainers.push(itemContainer);\n\t\titemContainer.states.create(\"disabled\", {});\n\t\treturn itemContainer;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeMarker(): Container {\n\t\tconst marker = this.markers.make();\n\t\tthis.markers.push(marker);\n\t\tmarker.states.create(\"disabled\", {});\n\t\treturn marker;\n\t}\n\n\t/**\n\t * List of legend marker elements.\n\t *\n\t * @default new ListTemplate<Container>\n\t */\n\tpublic readonly markers: ListTemplate<Container> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => Container._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.markers.template.get(\"themeTags\", []), [\"legend\", \"marker\"])\n\t\t}, [this.markers.template])\n\t);\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeLabel(): Label {\n\t\tconst label = this.labels.make();\n\t\tlabel.states.create(\"disabled\", {});\n\t\treturn label;\n\t}\n\n\t/**\n\t * List of legend label elements.\n\t *\n\t * @default new ListTemplate<Label>\n\t */\n\tpublic readonly labels: ListTemplate<Label> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => Label._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.labels.template.get(\"themeTags\", []), [\"legend\", \"label\"])\n\t\t}, [this.labels.template])\n\t);\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeValueLabel(): Label {\n\t\tconst valueLabel = this.valueLabels.make();\n\t\tvalueLabel.states.create(\"disabled\", {});\n\t\treturn valueLabel;\n\t}\n\n\t/**\n\t * List of legend value label elements.\n\t *\n\t * @default new ListTemplate<label>\n\t */\n\tpublic readonly valueLabels: ListTemplate<Label> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => Label._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.valueLabels.template.get(\"themeTags\", []), [\"legend\", \"label\", \"value\"])\n\t\t}, [this.valueLabels.template])\n\t);\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeMarkerRectangle(): RoundedRectangle {\n\t\tconst markerRectangle = this.markerRectangles.make();\n\t\tmarkerRectangle.states.create(\"disabled\", {});\n\t\treturn markerRectangle;\n\t}\n\n\t/**\n\t * List of rectangle elements used for default legend markers.\n\t *\n\t * @default new ListTemplate<RoundedRectangle>\n\t */\n\tpublic readonly markerRectangles: ListTemplate<RoundedRectangle> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => RoundedRectangle._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.markerRectangles.template.get(\"themeTags\", []), [\"legend\", \"marker\", \"rectangle\"])\n\t\t}, [this.markerRectangles.template])\n\t);\n\n\n\tprotected processDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper.processDataItem(dataItem);\n\n\t\tconst itemContainer = this.makeItemContainer(dataItem);\n\n\t\tconst nameField = this.get(\"nameField\");\n\t\tconst fillField = this.get(\"fillField\");\n\t\tconst strokeField = this.get(\"strokeField\");\n\n\t\tif (itemContainer) {\n\t\t\tconst clickTarget = this.get(\"clickTarget\", \"itemContainer\");\n\n\t\t\tconst item = dataItem.dataContext as ILegendItem;\n\n\t\t\tif (item && item.set) {\n\t\t\t\titem.set(<any>\"legendDataItem\", dataItem);\n\t\t\t}\n\n\t\t\titemContainer._setDataItem(dataItem);\n\t\t\tdataItem.set(\"itemContainer\", itemContainer);\n\n\t\t\tconst marker = this.makeMarker();\n\t\t\tif (marker) {\n\t\t\t\titemContainer.children.push(marker);\n\t\t\t\tmarker._setDataItem(dataItem);\n\t\t\t\tdataItem.set(\"marker\", marker);\n\n\t\t\t\tconst useDefaultMarker = this.get(\"useDefaultMarker\");\n\n\t\t\t\tconst markerRectangle = marker.children.push(this.makeMarkerRectangle());\n\n\t\t\t\tlet fill = dataItem.get(\"fill\");\n\t\t\t\tlet stroke = dataItem.get(\"stroke\");\n\n\t\t\t\tdataItem.set(\"markerRectangle\", markerRectangle);\n\n\t\t\t\tif (item && item.get) {\n\t\t\t\t\tfill = item.get(fillField as any, fill);\n\t\t\t\t\tstroke = item.get(strokeField as any, stroke);\n\t\t\t\t}\n\n\t\t\t\tif (!stroke) {\n\t\t\t\t\tstroke = fill;\n\t\t\t\t}\n\n\t\t\t\tif (!useDefaultMarker) {\n\t\t\t\t\tif (item && item.createLegendMarker) {\n\t\t\t\t\t\titem.createLegendMarker();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (item.on) {\n\t\t\t\t\t\titem.on(fillField as any, () => {\n\t\t\t\t\t\t\tmarkerRectangle.set(\"fill\", item.get(fillField as any));\n\t\t\t\t\t\t})\n\n\t\t\t\t\t\titem.on(strokeField as any, () => {\n\t\t\t\t\t\t\tmarkerRectangle.set(\"stroke\", item.get(strokeField as any));\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tmarkerRectangle.setAll({ fill, stroke });\n\n\t\t\t\t// this solves if template field is set on slice\n\t\t\t\tconst component = item.component;\n\t\t\t\tif (component && component.updateLegendMarker) {\n\t\t\t\t\tcomponent.updateLegendMarker(item as any);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst label = this.makeLabel();\n\n\t\t\tif (label) {\n\t\t\t\titemContainer.children.push(label);\n\t\t\t\tlabel._setDataItem(dataItem);\n\t\t\t\tdataItem.set(\"label\", label);\n\n\t\t\t\tlabel.text.on(\"text\", () => {\n\t\t\t\t\titemContainer.set(\"ariaLabel\", label.text._getText() + \"; \" + this._t(\"Press ENTER to toggle\"));\n\t\t\t\t});\n\n\t\t\t\tif (item && item.get) {\n\t\t\t\t\tdataItem.set(\"name\", item.get(nameField as any) as string);\n\t\t\t\t}\n\n\t\t\t\tlet name = dataItem.get(\"name\");\n\n\t\t\t\tif (name) {\n\t\t\t\t\tlabel.set(\"text\", name);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst valueLabel = this.makeValueLabel();\n\t\t\tif (valueLabel) {\n\t\t\t\titemContainer.children.push(valueLabel);\n\t\t\t\tvalueLabel._setDataItem(dataItem);\n\t\t\t\tdataItem.set(\"valueLabel\", valueLabel);\n\t\t\t}\n\n\t\t\tif (item && item.show) {\n\n\t\t\t\tthis._disposers.push(item.on(\"visible\", (visible) => {\n\t\t\t\t\titemContainer.set(\"disabled\", !visible)\n\t\t\t\t}));\n\n\t\t\t\tif (!item.get(\"visible\")) {\n\t\t\t\t\titemContainer.set(\"disabled\", true);\n\t\t\t\t}\n\n\t\t\t\tif (clickTarget != \"none\") {\n\t\t\t\t\tvar clickContainer = itemContainer;\n\t\t\t\t\tif (clickTarget == \"marker\") {\n\t\t\t\t\t\tclickContainer = marker;\n\t\t\t\t\t}\n\t\t\t\t\tthis._addClickEvents(clickContainer, item, dataItem)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Sort children\n\t\t\tthis.children.values.sort((a, b) => {\n\t\t\t\tvar targetA = a.dataItem!.dataContext;\n\t\t\t\tvar targetB = b.dataItem!.dataContext;\n\t\t\t\tif (targetA && targetB) {\n\t\t\t\t\tvar indexA = this.data.indexOf(targetA);\n\t\t\t\t\tvar indexB = this.data.indexOf(targetB);\n\t\t\t\t\tif (indexA > indexB) {\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t\telse if (indexA < indexB) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn 0;\n\t\t\t});\n\t\t}\n\n\t}\n\n\n\tprotected _addClickEvents(container: Container, item: ILegendItem, dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tcontainer.set(\"cursorOverStyle\", \"pointer\");\n\t\tcontainer.events.on(\"pointerover\", () => {\n\t\t\tconst component = item.component;\n\t\t\tif (component && component.hoverDataItem) {\n\t\t\t\tcomponent.hoverDataItem(item as any)\n\t\t\t}\n\t\t})\n\n\t\tcontainer.events.on(\"pointerout\", () => {\n\t\t\tconst component = item.component;\n\t\t\tif (component && component.hoverDataItem) {\n\t\t\t\tcomponent.unhoverDataItem(item as any)\n\t\t\t}\n\t\t})\n\n\t\tcontainer.events.on(\"click\", () => {\n\t\t\tconst labelText = dataItem.get(\"label\").text._getText();\n\n\t\t\tif (item.show && item.isHidden && (item.isHidden() || item.get(\"visible\") === false)) {\n\t\t\t\titem.show();\n\t\t\t\tcontainer.set(\"disabled\", false);\n\t\t\t\tthis._root.readerAlert(this._t(\"%1 shown\", this._root.locale, labelText));\n\t\t\t}\n\t\t\telse if (item.hide) {\n\t\t\t\titem.hide();\n\t\t\t\tcontainer.set(\"disabled\", true);\n\t\t\t\tthis._root.readerAlert(this._t(\"%1 hidden\", this._root.locale, labelText));\n\t\t\t}\n\t\t})\n\t}\n\n\n\t/**\n\t * @ignore\n\t */\n\tpublic disposeDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\n\t\tsuper.disposeDataItem(dataItem);\n\n\t\tconst dataContext = dataItem.dataContext as any;\n\t\tif (dataContext && dataContext.get) {\n\t\t\tconst di = dataContext.get(\"legendDataItem\");\n\t\t\tif (di == dataItem) {\n\t\t\t\tdataContext.set(\"legendDataItem\", undefined);\n\t\t\t}\n\t\t}\n\n\n\t\tlet itemContainer = dataItem.get(\"itemContainer\");\n\t\tif (itemContainer) {\n\t\t\tthis.itemContainers.removeValue(itemContainer);\n\t\t\titemContainer.dispose();\n\t\t}\n\n\t\tlet marker = dataItem.get(\"marker\");\n\t\tif (marker) {\n\t\t\tthis.markers.removeValue(marker);\n\t\t\tmarker.dispose();\n\t\t}\n\n\t\tlet markerRectangle = dataItem.get(\"markerRectangle\");\n\t\tif (markerRectangle) {\n\t\t\tthis.markerRectangles.removeValue(markerRectangle);\n\t\t\tmarkerRectangle.dispose();\n\t\t}\n\n\t\tlet label = dataItem.get(\"label\");\n\t\tif (label) {\n\t\t\tthis.labels.removeValue(label);\n\t\t\tlabel.dispose();\n\t\t}\n\n\t\tlet valueLabel = dataItem.get(\"valueLabel\");\n\t\tif (valueLabel) {\n\t\t\tthis.valueLabels.removeValue(valueLabel);\n\t\t\tvalueLabel.dispose();\n\t\t}\n\n\t}\n}\n", "/** @ignore *//** */\n\nimport type { IPoint } from \"./IPoint\"\nimport * as $math from \"./Math\";\nimport type { IGraphics } from \"../render/backend/Renderer\";\n\n/**\n * @ignore\n */\nexport function segmentedLine(display: IGraphics, segments: Array<Array<Array<IPoint>>>) {\n\tfor (let s = 0, len = segments.length; s < len; s++) {\n\t\tconst groups = segments[s];\n\t\tif (groups.length > 0) {\n\t\t\tlet firstGroup = groups[0];\n\t\t\tif (firstGroup.length > 0) {\n\t\t\t\tlet firstPoint = firstGroup[0];\n\t\t\t\tdisplay.moveTo(firstPoint.x, firstPoint.y);\n\t\t\t\tfor (let g = 0, len = groups.length; g < len; g++) {\n\t\t\t\t\tline(display, groups[g]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * @ignore\n */\nexport function line(display: IGraphics, points: Array<IPoint>) {\n\tfor (let p = 0, len = points.length; p < len; p++) {\n\t\tconst point = points[p];\n\t\tdisplay.lineTo(point.x, point.y);\n\t}\n}\n\n/**\n * @ignore\n */\nexport function moveTo(display: IGraphics, point: IPoint) {\n\tdisplay.moveTo(point.x, point.y);\n}\n\n/**\n * @ignore\n */\nexport function clear(display: IGraphics) {\n\tdisplay.clear();\n}\n\n/**\n * @ignore\n */\nexport function smoothedSegmentedline(display: IGraphics, segments: Array<Array<Array<IPoint>>>, tensionX: number, tensionY: number) {\n\tfor (let s = 0, len = segments.length; s < len; s++) {\n\t\tconst groups = segments[s];\n\t\tif (groups.length > 0) {\n\t\t\tlet firstGroup = groups[0];\n\t\t\tif (firstGroup.length > 0) {\n\t\t\t\tlet firstPoint = firstGroup[0];\n\t\t\t\tdisplay.moveTo(firstPoint.x, firstPoint.y);\n\t\t\t\tfor (let g = 0, len = groups.length; g < len; g++) {\n\t\t\t\t\tconst points = groups[g];\n\t\t\t\t\tif (points.length > 0) {\n\t\t\t\t\t\tdisplay.lineTo(points[0].x, points[0].y)\n\t\t\t\t\t}\n\t\t\t\t\tsmoothedLine(display, points, tensionX, tensionY);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * @ignore\n */\nexport function smoothedLine(display: IGraphics, points: Array<IPoint>, tensionX: number, tensionY: number) {\n\n\tfor (let i = points.length - 1; i > 0; i--) {\n\t\tlet p0 = points[i];\n\t\tlet p1 = points[i - 1];\n\n\t\tif (Math.abs(p0.x - p1.x) < 0.1 && Math.abs(p0.y - p1.y) < 0.1) {\n\t\t\tpoints.splice(i - 1, 1);\n\t\t}\n\t}\n\n\tif (points.length < 3 || (tensionX >= 1 && tensionY >= 1)) {\n\t\tline(display, points);\n\t\treturn;\n\t}\n\n\ttensionX = 1 - tensionX + 0.00001;\n\ttensionY = 1 - tensionY + 0.00001;\n\n\tlet first = points[0];\n\tlet last = points[points.length - 1];\n\n\tlet closed: boolean = false;\n\n\tif ($math.round(first.x, 3) == $math.round(last.x) && $math.round(first.y) == $math.round(last.y)) {\n\t\tclosed = true;\n\t}\n\n\t// Can't moveTo here, as it wont be possible to have fill then.\n\tlet path: string = \"\";\n\n\tfor (let i = 0, len = points.length - 1; i < len; i++) {\n\t\tlet p0: IPoint = points[i - 1];\n\n\t\tlet p1: IPoint = points[i];\n\n\t\tlet p2: IPoint = points[i + 1];\n\n\t\tlet p3: IPoint = points[i + 2];\n\n\t\tif (i === 0) {\n\t\t\tif (closed) {\n\t\t\t\tp0 = points[len - 2];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tp0 = points[0];\n\t\t\t}\n\t\t} else if (i == len - 1) {\n\t\t\tif (closed) {\n\t\t\t\tp3 = points[1];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tp3 = p2;\n\t\t\t}\n\t\t}\n\n\n\t\tlet controlPointA = $math.getCubicControlPointA(p0, p1, p2, tensionX, tensionY);\n\t\tlet controlPointB = $math.getCubicControlPointB(p1, p2, p3, tensionX, tensionY);\n\n\t\tdisplay.bezierCurveTo(controlPointA.x, controlPointA.y, controlPointB.x, controlPointB.y, p2.x, p2.y);\n\t}\n\n\treturn path;\n}\n", "import { Graphics, IGraphicsSettings, IGraphicsPrivate } from \"./Graphics\";\nimport type { IPoint } from \"../util/IPoint\";\nimport * as $draw from \"../util/Draw\";\n\nexport interface ILineSettings extends IGraphicsSettings {\n\n\t/**\n\t * A list of [[IPoint]] (x/y coordinates) points for the line.\n\t */\n\tpoints?: Array<IPoint>;\n\n\t/**\n\t * A list of [[IPoint]] arrays for different segments of the line.\n\t * \n\t * @since 5.1.4\n\t */\n\tsegments?: Array<Array<Array<IPoint>>>;\n}\n\nexport interface ILinePrivate extends IGraphicsPrivate {\n}\n\n/**\n * Draws a line.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\n * @important\n */\nexport class Line extends Graphics {\n\n\tdeclare public _settings: ILineSettings;\n\tdeclare public _privateSettings: ILinePrivate;\n\n\tpublic static className: string = \"Line\";\n\tpublic static classNames: Array<string> = Graphics.classNames.concat([Line.className]);\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tif (this.isDirty(\"points\") || this.isDirty(\"segments\") || this._sizeDirty || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\")) {\n\t\t\tthis._clear = true;\n\t\t}\n\t}\n\n\tpublic _changed() {\n\t\tsuper._changed();\n\n\t\tif (this._clear) {\n\n\t\t\tconst points = this.get(\"points\");\n\t\t\tconst segments = this.get(\"segments\");\n\n\t\t\tif (points && points.length > 0) {\n\t\t\t\tlet point = points[0];\n\n\t\t\t\tthis._display.moveTo(point.x, point.y);\n\t\t\t\t$draw.segmentedLine(this._display, [[points]]);\n\t\t\t}\n\t\t\telse if (segments) {\n\t\t\t\t$draw.segmentedLine(this._display, segments);\n\t\t\t}\n\t\t\telse if (!this.get(\"draw\")) {\n\t\t\t\tlet w = this.width();\n\t\t\t\tlet h = this.height();\n\n\t\t\t\tthis._display.moveTo(0, 0);\n\t\t\t\tthis._display.lineTo(w, h);\n\t\t\t}\n\t\t}\n\t}\n}\n", "import type { IPicture } from \"./backend/Renderer\";\nimport type { Color } from \"../util/Color\";\n\nimport { Sprite, ISpriteSettings, ISpritePrivate } from \"./Sprite\";\n\nimport * as $type from \"../util/Type\";\n\nexport interface IPictureSettings extends ISpriteSettings {\n\n\t/**\n\t * A source URI of the image.\n\t *\n\t * Can be relative or absolute URL, or data-uri.\n\t */\n\tsrc?: string;\n\n\t/**\n\t * Color of the element's shadow.\n\t *\n\t * For this to work at least one of the following needs to be set as well:\n\t * `shadowBlur`, `shadowOffsetX`, `shadowOffsetY`.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/shadows/} for more info\n\t */\n\tshadowColor?: Color | null;\n\n\t/**\n\t * Blurriness of the the shadow.\n\t *\n\t * The bigger the number, the more blurry shadow will be.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/shadows/} for more info\n\t */\n\tshadowBlur?: number;\n\n\t/**\n\t * Horizontal shadow offset in pixels.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/shadows/} for more info\n\t */\n\tshadowOffsetX?: number;\n\n\t/**\n\t * Vertical shadow offset in pixels.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/shadows/} for more info\n\t */\n\tshadowOffsetY?: number;\n\n\t/**\n\t * Opacity of the shadow (0-1).\n\t *\n\t * If not set, will use the same as `fillOpacity` of the element.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/shadows/} for more info\n\t */\n\tshadowOpacity?: number;\n\n}\n\nexport interface IPicturePrivate extends ISpritePrivate {\n}\n\n/**\n * Displays an image.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/images/} for more info\n * @important\n */\nexport class Picture extends Sprite {\n\n\tdeclare public _settings: IPictureSettings;\n\tdeclare public _privateSettings: IPicturePrivate;\n\n\tpublic _display: IPicture = this._root._renderer.makePicture(undefined);\n\n\tpublic static className: string = \"Picture\";\n\tpublic static classNames: Array<string> = Sprite.classNames.concat([Picture.className]);\n\n\tpublic _changed() {\n\t\tsuper._changed();\n\n\t\tif (this.isDirty(\"width\")) {\n\t\t\tconst width = this.get(\"width\");\n\t\t\tthis._display.width = $type.isNumber(width) ? width : undefined;\n\t\t}\n\n\t\tif (this.isDirty(\"height\")) {\n\t\t\tconst height = this.get(\"height\");\n\t\t\tthis._display.height = $type.isNumber(height) ? height : undefined;\n\t\t}\n\n\t\tif (this.isDirty(\"shadowColor\")) {\n\t\t\tthis._display.clear();\n\t\t\tconst shadowColor = this.get(\"shadowColor\");\n\t\t\tthis._display.shadowColor = shadowColor == null ? undefined : shadowColor;\n\t\t}\n\n\t\tif (this.isDirty(\"shadowBlur\")) {\n\t\t\tthis._display.clear();\n\t\t\tthis._display.shadowBlur = this.get(\"shadowBlur\");\n\t\t}\n\n\t\tif (this.isDirty(\"shadowOffsetX\")) {\n\t\t\tthis._display.clear();\n\t\t\tthis._display.shadowOffsetX = this.get(\"shadowOffsetX\");\n\t\t}\n\n\t\tif (this.isDirty(\"shadowOffsetY\")) {\n\t\t\tthis._display.clear();\n\t\t\tthis._display.shadowOffsetY = this.get(\"shadowOffsetY\");\n\t\t}\n\n\t\tif (this.isDirty(\"shadowOpacity\")) {\n\t\t\tthis._display.clear();\n\t\t\tthis._display.shadowOpacity = this.get(\"shadowOpacity\");\n\t\t}\n\n\t\tif (this.isDirty(\"src\")) {\n\t\t\tthis._display.clear();\n\t\t\tthis._load();\n\t\t}\n\t}\n\n\tprotected _load() {\n\t\tconst src = this.get(\"src\");\n\t\tif (src) {\n\t\t\tconst image = new Image();\n\t\t\t//image.crossOrigin = \"Anonymous\";\n\t\t\timage.src = src!;\n\t\t\timage.decode().then(() => {\n\t\t\t\tthis._display.image = image;\n\t\t\t\tthis._updateSize();\n\t\t\t}).catch((_error: any) => {\n\t\t\t\t// TODO: maybe raise error?\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic _updateSize() {\n\t\tsuper._updateSize();\n\n\t\tconst image = this._display.image;\n\t\tif (image) {\n\t\t\tlet w = this.getPrivate(\"width\", this.get(\"width\"));\n\t\t\tlet h = this.getPrivate(\"height\", this.get(\"height\"));\n\t\t\tconst r = image.width && image.height ? image.width / image.height : 0;\n\n\t\t\tif ($type.isNumber(w) && $type.isNumber(h)) {\n\t\t\t\tthis._display.width = w;\n\t\t\t\tthis._display.height = h;\n\t\t\t}\n\t\t\telse if ($type.isNumber(w) && r) {\n\t\t\t\th = w / r;\n\t\t\t}\n\t\t\telse if ($type.isNumber(h) && r) {\n\t\t\t\tw = h * r;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tw = image.width;\n\t\t\t\th = image.height;\n\t\t\t}\n\n\t\t\tif ($type.isNumber(w)) {\n\t\t\t\tthis._display.width = w;\n\t\t\t}\n\t\t\tif ($type.isNumber(h)) {\n\t\t\t\tthis._display.height = h;\n\t\t\t}\n\t\t\tthis.markDirtyBounds();\n\t\t\tthis.markDirty();\n\t\t}\n\t}\n}\n", "import { Text, ITextSettings, ITextPrivate } from \"./Text\";\nimport * as $math from \"../util/Math\";\nimport type { IRadialText } from \"./backend/Renderer\";\n\n/**\n * @ignore\n */\nexport interface IRadialTextSettings extends ITextSettings {\n\ttextType?: \"regular\" | \"circular\" | \"radial\" | \"aligned\" | \"adjusted\";\n\tradius?: number;\n\tstartAngle?: number;\n\tinside?: boolean;\n\torientation?: \"inward\" | \"outward\" | \"auto\";\n\tkerning?: number;\n}\n\n/**\n * @ignore\n */\nexport interface IRadialTextPrivate extends ITextPrivate {\n}\n\n/**\n * @ignore\n */\nexport class RadialText extends Text {\n\n\tdeclare public _settings: IRadialTextSettings;\n\tdeclare public _privateSettings: IRadialTextPrivate;\n\n\tpublic _display: IRadialText = this._root._renderer.makeRadialText(\"\", this.textStyle);\n\n\tprotected _afterNew() {\n\t\tsuper._afterNew();\n\t}\n\n\tpublic static className: string = \"RadialText\";\n\tpublic static classNames: Array<string> = Text.classNames.concat([RadialText.className]);\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tthis._display.clear();\n\n\t\tif (this.isDirty(\"textType\")) {\n\t\t\tthis._display.textType = this.get(\"textType\");\n\t\t\tthis.markDirtyBounds();\n\t\t}\n\n\t\tif (this.isDirty(\"radius\")) {\n\t\t\tthis._display.radius = this.get(\"radius\");\n\t\t\tthis.markDirtyBounds();\n\t\t}\n\n\t\tif (this.isDirty(\"startAngle\")) {\n\t\t\tthis._display.startAngle = (this.get(\"startAngle\", 0)! + 90) * $math.RADIANS;\n\t\t\tthis.markDirtyBounds();\n\t\t}\n\n\t\tif (this.isDirty(\"inside\")) {\n\t\t\tthis._display.inside = this.get(\"inside\");\n\t\t\tthis.markDirtyBounds();\n\t\t}\n\n\t\tif (this.isDirty(\"orientation\")) {\n\t\t\tthis._display.orientation = this.get(\"orientation\");\n\t\t\tthis.markDirtyBounds();\n\t\t}\n\n\t\tif (this.isDirty(\"kerning\")) {\n\t\t\tthis._display.kerning = this.get(\"kerning\");\n\t\t\tthis.markDirtyBounds();\n\t\t}\n\t}\n\n}\n", "// import * as $object from \"../util/Object\";\nimport { p50, Percent } from \"../util/Percent\";\nimport { Label, ILabelPrivate, ILabelSettings } from \"./Label\";\nimport { RadialText } from \"./RadialText\";\n\nimport * as $math from \"../util/Math\";\nimport * as $utils from \"../util/Utils\";\n\n\nexport interface IRadialLabelSettings extends ILabelSettings {\n\n\t/**\n\t * Pixel value to adjust radius with.\n\t *\n\t * Will add to (or subtract from if negative) whatever value `baseRadius` evaluates\n\t * to.\n\t */\n\tradius?: number;\n\n\t/**\n\t * Radius of the label's position.\n\t *\n\t * Can be either set in absolute pixel value, or percent.\n\t *\n\t * Relative value, depending on the situation, will most often mean its\n\t * position within certain circular object, like a slice: 0% meaning inner\n\t * edge, and 100% - the outer edge.\n\t *\n\t * @default 100%\n\t */\n\tbaseRadius?: number | Percent;\n\n\t/**\n\t * Label anngle in degrees.\n\t *\n\t * In most cases it will be set by the chart/series and does not need to\n\t * be set manually.\n\t */\n\tlabelAngle?: number;\n\n\t/**\n\t * Should the text \"face\" inward or outward from the arc the text is\n\t * following.\n\t *\n\t * `\"auto\"` means that facing will be chosen automatically based on the angle\n\t * to enhance readbility.\n\t *\n\t * Only applies if `type = \"circluar\"`.\n\t * \n\t * @default \"auto\"\n\t */\n\torientation?: \"inward\" | \"outward\" | \"auto\";\n\n\t/**\n\t * Should label be drawn inside (`true`) or outside (`false`) the arc.\n\t *\n\t * @default false\n\t */\n\tinside?: boolean;\n\n\t/**\n\t * Label type.\n\t *\n\t * * `\"regular\"` (default) - normal horizontal label.\n\t * * `\"circular\"` - arched label.\n\t * * `\"radial\"` - label radiating from the center of the arc.\n\t * * `\"aligned\"` - horizontal label aligned with other labels horizontally.\n\t * * `\"adjusted\"` - horizontal label adjusted in postion.\n\t *\n\t * @default \"regular\"\n\t */\n\ttextType?: \"regular\" | \"circular\" | \"radial\" | \"aligned\" | \"adjusted\";\n\n\t/**\n\t * Extra spacing between characters, in pixels.\n\t *\n\t * @default 0\n\t */\n\tkerning?: number;\n\n}\n\nexport interface IRadialLabelPrivate extends ILabelPrivate {\n\n\t/**\n\t * @ignore\n\t */\n\tleft?: boolean;\n\n\t/**\n\t * @ignore\n\t */\n\tradius?: number;\n\n\t/**\n\t * @ignore\n\t */\n\tinnerRadius?: number;\n\n}\n\nexport class RadialLabel extends Label {\n\n\tdeclare public _settings: IRadialLabelSettings;\n\tdeclare public _privateSettings: IRadialLabelPrivate;\n\n\tdeclare protected _text: RadialText;\n\n\tpublic static className: string = \"RadialLabel\";\n\tpublic static classNames: Array<string> = Label.classNames.concat([RadialLabel.className]);\n\n\tprotected _flipped: boolean = false;\n\n\tprotected _afterNew() {\n\t\tthis._textKeys.push(\"textType\", \"kerning\");\n\t\tsuper._afterNew();\n\t}\n\n\n\tpublic _makeText() {\n\t\tthis._text = this.children.push(RadialText.new(this._root, {}));\n\t}\n\n\t/**\n\t * Returns base radius in pixels.\n\t * \n\t * @return Base radius\n\t */\n\tpublic baseRadius(): number {\n\t\tconst radiusPrivate = this.getPrivate(\"radius\", 0);\n\t\tconst innerRadiusPrivate = this.getPrivate(\"innerRadius\", 0);\n\t\tconst baseRadius = this.get(\"baseRadius\", 0);\n\t\treturn innerRadiusPrivate + $utils.relativeToValue(baseRadius, radiusPrivate - innerRadiusPrivate);\n\t}\n\n\t/**\n\t * Returns radius adjustment in pixels.\n\t * \n\t * @return Radius\n\t */\n\tpublic radius(): number {\n\t\tconst inside = this.get(\"inside\", false);\n\t\treturn this.baseRadius() + this.get(\"radius\", 0) * (inside ? -1 : 1);\n\t}\n\n\tpublic _updateChildren() {\n\t\tsuper._updateChildren();\n\n\t\tif (this.isDirty(\"baseRadius\") || this.isPrivateDirty(\"radius\") || this.isPrivateDirty(\"innerRadius\") || this.isDirty(\"labelAngle\") || this.isDirty(\"radius\") || this.isDirty(\"inside\") || this.isDirty(\"orientation\") || this.isDirty(\"textType\")) {\n\n\t\t\tconst textType = this.get(\"textType\", \"adjusted\");\n\n\t\t\tconst inside = this.get(\"inside\", false);\n\n\t\t\tconst orientation = this.get(\"orientation\");\n\t\t\tlet labelAngle = $math.normalizeAngle(this.get(\"labelAngle\", 0));\n\n\t\t\tthis._text.set(\"startAngle\", this.get(\"labelAngle\", 0));\n\t\t\tthis._text.set(\"inside\", inside);\n\n\t\t\tconst sin = $math.sin(labelAngle);\n\t\t\tconst cos = $math.cos(labelAngle);\n\n\t\t\tlet baseRadius = this.baseRadius();\n\t\t\tlet radius = this.radius();\n\n\t\t\tthis._display.angle = 0;\n\n\t\t\tif (textType == \"circular\") {\n\n\t\t\t\tthis.setAll({\n\t\t\t\t\tpaddingTop: 0,\n\t\t\t\t\tpaddingBottom: 0,\n\t\t\t\t\tpaddingLeft: 0,\n\t\t\t\t\tpaddingRight: 0\n\t\t\t\t});\n\n\t\t\t\t// Circular labels are handled and positioned differently\n\n\t\t\t\tthis._text.set(\"orientation\", orientation);\n\t\t\t\tthis._text.set(\"radius\", radius);\n\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (baseRadius == 0) {\n\t\t\t\t\tlabelAngle = 0;\n\t\t\t\t\tradius = 0;\n\t\t\t\t}\n\n\t\t\t\t// Positioning of radial/regular labels are teh same\n\t\t\t\tlet x = radius * cos;\n\t\t\t\tlet y = radius * sin;\n\n\t\t\t\tif (textType == \"radial\") {\n\n\t\t\t\t\tthis.setRaw(\"x\", x);\n\t\t\t\t\tthis.setRaw(\"y\", y);\n\n\t\t\t\t\tif ((labelAngle < 90) || (labelAngle > 270) || orientation != \"auto\") {\n\t\t\t\t\t\tthis._display.angle = labelAngle;// + 90;\n\t\t\t\t\t\tthis._flipped = false;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis._display.angle = labelAngle + 180;\n\t\t\t\t\t\tthis._flipped = true;\n\t\t\t\t\t}\n\t\t\t\t\tthis._dirty.rotation = false;\n\t\t\t\t}\n\t\t\t\telse if (textType == \"adjusted\") {\n\t\t\t\t\tthis.setRaw(\"centerX\", p50);\n\t\t\t\t\tthis.setRaw(\"centerY\", p50);\n\t\t\t\t\tthis.setRaw(\"x\", x);\n\t\t\t\t\tthis.setRaw(\"y\", y);\n\t\t\t\t}\n\t\t\t\telse if (textType == \"regular\") {\n\t\t\t\t\tthis.setRaw(\"x\", x);\n\t\t\t\t\tthis.setRaw(\"y\", y);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.markDirtyPosition();\n\t\t\tthis.markDirtyBounds();\n\t\t}\n\t}\n\n\n\tpublic _updatePosition() {\n\n\t\tconst textType = this.get(\"textType\", \"regular\");\n\t\tconst inside = this.get(\"inside\", false);\n\n\t\tlet dx = 0;\n\t\tlet dy = 0;\n\t\tlet labelAngle = this.get(\"labelAngle\", 0);\n\t\tlet bounds = this.localBounds();\n\t\tlet w = bounds.right - bounds.left;\n\t\tlet h = bounds.bottom - bounds.top;\n\n\t\tif (textType == \"radial\") {\n\t\t\tif (this._flipped) {\n\t\t\t\tlet centerX = this.get(\"centerX\");\n\t\t\t\tif (centerX instanceof Percent) {\n\t\t\t\t\tw = w * (1 - centerX.value * 2);\n\t\t\t\t}\n\n\t\t\t\tdx = w * $math.cos(labelAngle);\n\t\t\t\tdy = w * $math.sin(labelAngle);\n\t\t\t}\n\t\t}\n\t\telse if (!inside && textType == \"adjusted\") {\n\t\t\tdx = w / 2 * $math.cos(labelAngle);\n\t\t\tdy = h / 2 * $math.sin(labelAngle);\n\t\t}\n\n\n\t\tthis.setRaw(\"dx\", dx);\n\t\tthis.setRaw(\"dy\", dy);\n\n\t\tsuper._updatePosition();\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic get text(): RadialText {\n\t\treturn this._text;\n\t}\n\n}\n", "import { Graphics, IGraphicsSettings, IGraphicsPrivate } from \"./Graphics\";\r\n\r\nexport interface ITriangleSettings extends IGraphicsSettings {\r\n}\r\n\r\nexport interface ITrianglePrivate extends IGraphicsPrivate {\r\n}\r\n\r\n/**\r\n * Draws a triangle.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\r\n * @important\r\n */\r\nexport class Triangle extends Graphics {\r\n\r\n\tdeclare public _settings: ITriangleSettings;\r\n\tdeclare public _privateSettings: ITrianglePrivate;\r\n\r\n\tpublic static className: string = \"Triangle\";\r\n\tpublic static classNames: Array<string> = Graphics.classNames.concat([Triangle.className]);\r\n\r\n\tpublic _beforeChanged() {\r\n\t\tsuper._beforeChanged();\r\n\r\n\t\tif (this.isDirty(\"width\") || this.isDirty(\"height\") || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\")) {\r\n\t\t\tthis._clear = true;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic _changed() {\r\n\t\tsuper._changed();\r\n\r\n\t\tif (this._clear && !this.get(\"draw\")) {\r\n\t\t\tthis._draw();\r\n\t\t}\r\n\t}\r\n\r\n\tprotected _draw() {\r\n\t\tconst w = this.width();\r\n\t\tconst h = this.height();\r\n\t\tconst display = this._display;\r\n\t\tdisplay.moveTo(-w / 2, h / 2);\r\n\t\tdisplay.lineTo(0, -h / 2);\r\n\t\tdisplay.lineTo(w / 2, h / 2);\r\n\t\tdisplay.lineTo(-w / 2, h / 2);\r\n\r\n\t}\r\n\r\n\tpublic _updateSize() {\r\n\t\tthis.markDirty()\r\n\t\tthis._clear = true;\r\n\t}\r\n}\r\n", "import type { Animation } from \"../util/Entity\";\nimport type { Time } from \"../util/Animation\";\n\nimport { RoundedRectangle } from \"../render/RoundedRectangle\";\nimport { Container, IContainerPrivate, IContainerSettings, IContainerEvents } from \"./Container\";\nimport { Graphics } from \"./Graphics\";\nimport { Button } from \"./Button\";\n\nimport * as $type from \"../util/Type\";\nimport * as $utils from \"../util/Utils\";\n\nexport interface IScrollbarSettings extends IContainerSettings {\n\n\t/**\n\t * Orientation of the scrollbar.\n\t */\n\torientation: \"horizontal\" | \"vertical\";\n\n\t/**\n\t * Relative start of the selected range, with 0 meaning beginning, and 1 the\n\t * end.\n\t */\n\tstart?: number;\n\n\t/**\n\t * Relative end of the selected range, with 0 meaning beginning, and 1 the\n\t * end.\n\t */\n\tend?: number;\n\n\t/**\n\t * Number of milliseconds to play scroll animations for.\n\t */\n\tanimationDuration?: number;\n\n\t/**\n\t * Easing function to use for animations.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/animations/#Easing_functions} for more info\n\t */\n\tanimationEasing?: (t: Time) => Time;\n\n}\n\nexport interface IScrollbarPrivate extends IContainerPrivate {\n\n\t/**\n\t * @ignore\n\t */\n\tisBusy?: boolean;\n\n\t/**\n\t * @ignore\n\t */\n\tpositionTextFunction?: (position: number) => string;\n\n}\n\nexport interface IScrollbarEvents extends IContainerEvents {\n\n\t/**\n\t * Invoked when range of the selection changes.\n\t */\n\trangechanged: { start: number, end: number, grip?: \"start\" | \"end\" };\n\n}\n\n/**\n * A control that allows zooming chart's axes, or other uses requiring range\n * selection.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/scrollbars/} for more info\n */\nexport class Scrollbar extends Container {\n\n\tpublic _addOrientationClass() {\n\t\tthis._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"scrollbar\", this._settings.orientation]);\n\t\tif (!this._settings.background) {\n\t\t\tthis._settings.background = RoundedRectangle.new(this._root, {\n\t\t\t\tthemeTags: $utils.mergeTags(this._settings.themeTags, [\"main\", \"background\"])\n\t\t\t});\n\t\t}\n\t}\n\n\tdeclare public _settings: IScrollbarSettings;\n\tdeclare public _privateSettings: IScrollbarPrivate;\n\tdeclare public _events: IScrollbarEvents;\n\n\tpublic static className: string = \"Scrollbar\";\n\tpublic static classNames: Array<string> = Container.classNames.concat([Scrollbar.className]);\n\n\t/**\n\t * A thumb elment - a draggable square between the grips, used for panning\n\t * the selection.\n\t */\n\tpublic thumb: RoundedRectangle = this._makeThumb();\n\n\t/**\n\t * Start grip button.\n\t */\n\tpublic startGrip: Button = this._makeButton();\n\n\t/**\n\t * End grip button.\n\t */\n\tpublic endGrip: Button = this._makeButton();\n\n\tprotected _thumbBusy: boolean = false;\n\n\tprotected _startDown: boolean = false;\n\n\tprotected _endDown: boolean = false;\n\n\tprotected _thumbDown: boolean = false;\n\n\tprotected _gripDown?: \"start\" | \"end\";\n\n\tprotected _makeButton(): Button {\n\t\treturn this.children.push(Button.new(this._root, {\n\t\t\tthemeTags: [\"resize\", \"button\", this.get(\"orientation\")], icon: Graphics.new(this._root, {\n\t\t\t\tthemeTags: [\"icon\"]\n\t\t\t})\n\t\t}));\n\t}\n\n\tprotected _makeThumb(): RoundedRectangle {\n\t\treturn this.children.push(RoundedRectangle.new(this._root, {\n\t\t\tthemeTags: [\"thumb\", this.get(\"orientation\")]\n\t\t}));\n\t}\n\n\tprotected _handleAnimation(animation: Animation<any>) {\n\t\tif (animation) {\n\t\t\tthis._disposers.push(\n\t\t\t\tanimation.events.on(\"stopped\", () => {\n\t\t\t\t\tthis.setPrivateRaw(\"isBusy\", false);\n\t\t\t\t\tthis._thumbBusy = false;\n\t\t\t\t})\n\t\t\t)\n\t\t}\n\t}\n\n\tprotected _afterNew() {\n\t\tthis._addOrientationClass();\n\t\tsuper._afterNew();\n\n\t\tconst startGrip = this.startGrip;\n\t\tconst endGrip = this.endGrip;\n\t\tconst thumb = this.thumb;\n\t\tconst background = this.get(\"background\");\n\n\t\tif (background) {\n\t\t\tthis._disposers.push(\n\t\t\t\tbackground.events.on(\"click\", (event) => {\n\t\t\t\t\tthis.setPrivateRaw(\"isBusy\", true);\n\t\t\t\t\tconst point = this._display.toLocal(event.point);\n\n\t\t\t\t\tconst w = this.width();\n\t\t\t\t\tconst h = this.height();\n\n\t\t\t\t\tconst orientation = this.get(\"orientation\");\n\n\t\t\t\t\tlet newMiddle: number;\n\n\t\t\t\t\tif (orientation == \"vertical\") {\n\t\t\t\t\t\tnewMiddle = (point.y - thumb.height() / 2) / h;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tnewMiddle = (point.x - thumb.width() / 2) / w;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet newCoordinate: number;\n\t\t\t\t\tlet key: \"x\" | \"y\";\n\n\t\t\t\t\tif (orientation == \"vertical\") {\n\t\t\t\t\t\tnewCoordinate = newMiddle * h;\n\t\t\t\t\t\tkey = \"y\";\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tnewCoordinate = newMiddle * w;\n\t\t\t\t\t\tkey = \"x\";\n\t\t\t\t\t}\n\n\n\t\t\t\t\tconst duration = this.get(\"animationDuration\", 0);\n\t\t\t\t\tif (duration > 0) {\n\t\t\t\t\t\tthis._thumbBusy = true;\n\t\t\t\t\t\tthis._handleAnimation(this.thumb.animate({ key: key, to: newCoordinate, duration: duration, easing: this.get(\"animationEasing\") }));\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.thumb.set(key, newCoordinate);\n\t\t\t\t\t\tthis._root.events.once(\"frameended\", () => {\n\t\t\t\t\t\t\tthis.setPrivateRaw(\"isBusy\", false);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t)\n\t\t}\n\n\t\tthis._disposers.push(thumb.events.on(\"dblclick\", (event) => {\n\n\t\t\tif (!$utils.isLocalEvent(event.originalEvent, this)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst duration = this.get(\"animationDuration\", 0);\n\t\t\tconst easing = this.get(\"animationEasing\");\n\n\t\t\tthis.animate({ key: \"start\", to: 0, duration: duration, easing: easing });\n\t\t\tthis.animate({ key: \"end\", to: 1, duration: duration, easing: easing });\n\t\t}));\n\n\t\tthis._disposers.push(startGrip.events.on(\"pointerdown\", () => {\n\t\t\tthis.setPrivateRaw(\"isBusy\", true);\n\t\t\tthis._startDown = true;\n\t\t\tthis._gripDown = \"start\";\n\t\t}))\n\n\t\tthis._disposers.push(endGrip.events.on(\"pointerdown\", () => {\n\t\t\tthis.setPrivateRaw(\"isBusy\", true);\n\t\t\tthis._endDown = true;\n\t\t\tthis._gripDown = \"end\";\n\t\t}))\n\n\t\tthis._disposers.push(thumb.events.on(\"pointerdown\", () => {\n\t\t\tthis.setPrivateRaw(\"isBusy\", true);\n\t\t\tthis._thumbDown = true;\n\t\t\tthis._gripDown = undefined;\n\t\t}))\n\n\t\tthis._disposers.push(startGrip.events.on(\"globalpointerup\", () => {\n\t\t\tif (this._startDown) {\n\t\t\t\tthis.setPrivateRaw(\"isBusy\", false);\n\t\t\t}\n\t\t\tthis._startDown = false;\n\t\t}))\n\n\t\tthis._disposers.push(endGrip.events.on(\"globalpointerup\", () => {\n\t\t\tif (this._endDown) {\n\t\t\t\tthis.setPrivateRaw(\"isBusy\", false);\n\t\t\t}\n\t\t\tthis._endDown = false;\n\t\t}))\n\n\t\tthis._disposers.push(thumb.events.on(\"globalpointerup\", () => {\n\t\t\tif (this._thumbDown) {\n\t\t\t\tthis.setPrivateRaw(\"isBusy\", false);\n\t\t\t}\n\t\t\tthis._thumbDown = false;\n\t\t}))\n\n\t\tthis._disposers.push(startGrip.on(\"x\", () => {\n\t\t\tthis._updateThumb();\n\t\t}));\n\n\t\tthis._disposers.push(endGrip.on(\"x\", () => {\n\t\t\tthis._updateThumb();\n\t\t}));\n\n\t\tthis._disposers.push(startGrip.on(\"y\", () => {\n\t\t\tthis._updateThumb();\n\t\t}));\n\n\t\tthis._disposers.push(endGrip.on(\"y\", () => {\n\t\t\tthis._updateThumb();\n\t\t}));\n\n\t\tthis._disposers.push(thumb.events.on(\"positionchanged\", () => {\n\t\t\tthis._updateGripsByThumb();\n\t\t}));\n\n\t\tif (this.get(\"orientation\") == \"vertical\") {\n\t\t\tstartGrip.set(\"x\", 0);\n\t\t\tendGrip.set(\"x\", 0);\n\n\t\t\tthis._disposers.push(thumb.adapters.add(\"y\", (value) => {\n\t\t\t\treturn Math.max(Math.min(Number(value), this.height() - thumb.height()), 0);\n\t\t\t}))\n\n\t\t\tthis._disposers.push(thumb.adapters.add(\"x\", (_value) => {\n\t\t\t\treturn this.width() / 2;\n\t\t\t}))\n\n\t\t\tthis._disposers.push(startGrip.adapters.add(\"x\", (_value) => {\n\t\t\t\treturn this.width() / 2;\n\t\t\t}))\n\n\t\t\tthis._disposers.push(endGrip.adapters.add(\"x\", (_value) => {\n\t\t\t\treturn this.width() / 2;\n\t\t\t}))\n\n\t\t\tthis._disposers.push(startGrip.adapters.add(\"y\", (value) => {\n\t\t\t\treturn Math.max(Math.min(Number(value), this.height()), 0);\n\t\t\t}))\n\n\t\t\tthis._disposers.push(endGrip.adapters.add(\"y\", (value) => {\n\t\t\t\treturn Math.max(Math.min(Number(value), this.height()), 0);\n\t\t\t}))\n\t\t}\n\t\telse {\n\t\t\tstartGrip.set(\"y\", 0);\n\t\t\tendGrip.set(\"y\", 0);\n\n\t\t\tthis._disposers.push(thumb.adapters.add(\"x\", (value) => {\n\t\t\t\treturn Math.max(Math.min(Number(value), this.width() - thumb.width()), 0);\n\t\t\t}))\n\n\t\t\tthis._disposers.push(thumb.adapters.add(\"y\", (_value) => {\n\t\t\t\treturn this.height() / 2;\n\t\t\t}))\n\n\t\t\tthis._disposers.push(startGrip.adapters.add(\"y\", (_value) => {\n\t\t\t\treturn this.height() / 2;\n\t\t\t}))\n\n\t\t\tthis._disposers.push(endGrip.adapters.add(\"y\", (_value) => {\n\t\t\t\treturn this.height() / 2;\n\t\t\t}))\n\n\t\t\tthis._disposers.push(startGrip.adapters.add(\"x\", (value) => {\n\t\t\t\treturn Math.max(Math.min(Number(value), this.width()), 0);\n\t\t\t}))\n\n\t\t\tthis._disposers.push(endGrip.adapters.add(\"x\", (value) => {\n\t\t\t\treturn Math.max(Math.min(Number(value), this.width()), 0);\n\t\t\t}))\n\t\t}\n\t}\n\n\tpublic _updateChildren() {\n\t\tsuper._updateChildren();\n\n\t\tif (this.isDirty(\"end\") || this.isDirty(\"start\") || this._sizeDirty) {\n\t\t\tthis.updateGrips();\n\t\t}\n\t}\n\n\tpublic _changed() {\n\t\tsuper._changed();\n\t\tif (this.isDirty(\"start\") || this.isDirty(\"end\")) {\n\t\t\tconst eventType = \"rangechanged\";\n\t\t\tif (this.events.isEnabled(eventType)) {\n\t\t\t\tthis.events.dispatch(eventType, { type: eventType, target: this, start: this.get(\"start\", 0), end: this.get(\"end\", 1), grip: this._gripDown });\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateGrips() {\n\t\tconst startGrip = this.startGrip;\n\t\tconst endGrip = this.endGrip;\n\n\t\tconst orientation = this.get(\"orientation\");\n\t\tconst height = this.height();\n\t\tconst width = this.width();\n\n\t\tif (orientation == \"vertical\") {\n\t\t\tstartGrip.set(\"y\", height * this.get(\"start\", 0));\n\t\t\tendGrip.set(\"y\", height * this.get(\"end\", 1));\n\t\t}\n\t\telse {\n\t\t\tstartGrip.set(\"x\", width * this.get(\"start\", 0));\n\t\t\tendGrip.set(\"x\", width * this.get(\"end\", 1));\n\t\t}\n\n\t\tconst valueFunction = this.getPrivate(\"positionTextFunction\");\n\t\tconst from = Math.round(this.get(\"start\", 0) * 100);\n\t\tconst to = Math.round(this.get(\"end\", 0) * 100);\n\t\tlet fromValue: string;\n\t\tlet toValue: string;\n\t\tif (valueFunction) {\n\t\t\tfromValue = valueFunction.call(this, this.get(\"start\", 0));\n\t\t\ttoValue = valueFunction.call(this, this.get(\"end\", 0));\n\t\t}\n\t\telse {\n\t\t\tfromValue = from + \"%\";\n\t\t\ttoValue = to + \"%\";\n\t\t}\n\n\t\tstartGrip.set(\"ariaLabel\", this._t(\"From %1\", undefined, fromValue));\n\t\tstartGrip.set(\"ariaValueNow\", \"\" + from);\n\t\tstartGrip.set(\"ariaValueText\", from + \"%\");\n\n\t\tstartGrip.set(\"ariaValueMin\", \"0\");\n\t\tstartGrip.set(\"ariaValueMax\", \"100\");\n\n\t\tendGrip.set(\"ariaLabel\", this._t(\"To %1\", undefined, toValue));\n\t\tendGrip.set(\"ariaValueNow\", \"\" + to);\n\t\tendGrip.set(\"ariaValueText\", to + \"%\");\n\n\t\tendGrip.set(\"ariaValueMin\", \"0\");\n\t\tendGrip.set(\"ariaValueMax\", \"100\");\n\t}\n\n\tprotected _updateThumb() {\n\t\tconst thumb = this.thumb;\n\t\tconst startGrip = this.startGrip;\n\t\tconst endGrip = this.endGrip;\n\n\t\tconst height = this.height();\n\t\tconst width = this.width();\n\n\t\tlet x0 = startGrip.x();\n\t\tlet x1 = endGrip.x();\n\n\t\tlet y0 = startGrip.y();\n\t\tlet y1 = endGrip.y();\n\n\t\tlet start: number = 0;\n\t\tlet end: number = 1;\n\n\t\tif (this.get(\"orientation\") == \"vertical\") {\n\t\t\tif ($type.isNumber(y0) && $type.isNumber(y1)) {\n\t\t\t\tif (!this._thumbBusy && !thumb.isDragging()) {\n\t\t\t\t\tthumb.set(\"height\", y1 - y0);\n\t\t\t\t\tthumb.set(\"y\", y0);\n\t\t\t\t}\n\t\t\t\tstart = y0 / height;\n\t\t\t\tend = y1 / height;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif ($type.isNumber(x0) && $type.isNumber(x1)) {\n\t\t\t\tif (!this._thumbBusy && !thumb.isDragging()) {\n\t\t\t\t\tthumb.set(\"width\", x1 - x0);\n\t\t\t\t\tthumb.set(\"x\", x0);\n\t\t\t\t}\n\t\t\t\tstart = x0 / width;\n\t\t\t\tend = x1 / width;\n\t\t\t}\n\t\t}\n\n\t\tif (this.getPrivate(\"isBusy\") && (this.get(\"start\") != start || this.get(\"end\") != end)) {\n\t\t\tthis.set(\"start\", start);\n\t\t\tthis.set(\"end\", end);\n\t\t}\n\n\t\tconst valueFunction = this.getPrivate(\"positionTextFunction\");\n\t\tconst from = Math.round(this.get(\"start\", 0) * 100);\n\t\tconst to = Math.round(this.get(\"end\", 0) * 100);\n\t\tlet fromValue: string;\n\t\tlet toValue: string;\n\t\tif (valueFunction) {\n\t\t\tfromValue = valueFunction.call(this, this.get(\"start\", 0));\n\t\t\ttoValue = valueFunction.call(this, this.get(\"end\", 0));\n\t\t}\n\t\telse {\n\t\t\tfromValue = from + \"%\";\n\t\t\ttoValue = to + \"%\";\n\t\t}\n\n\t\tthumb.set(\"ariaLabel\", this._t(\"From %1 to %2\", undefined, fromValue, toValue));\n\t\tthumb.set(\"ariaValueNow\", \"\" + from);\n\t\tthumb.set(\"ariaValueText\", from + \"%\");\n\t}\n\n\n\tprotected _updateGripsByThumb() {\n\n\t\tconst thumb = this.thumb;\n\t\tconst startGrip = this.startGrip;\n\t\tconst endGrip = this.endGrip;\n\n\t\tif (this.get(\"orientation\") == \"vertical\") {\n\t\t\tconst thumbSize = thumb.height();\n\t\t\tstartGrip.set(\"y\", thumb.y());\n\t\t\tendGrip.set(\"y\", thumb.y() + thumbSize);\n\t\t}\n\t\telse {\n\t\t\tconst thumbSize = thumb.width();\n\t\t\tstartGrip.set(\"x\", thumb.x());\n\t\t\tendGrip.set(\"x\", thumb.x() + thumbSize);\n\t\t}\n\t}\n}\n", "import { Scrollbar, IScrollbarPrivate, IScrollbarSettings, IScrollbarEvents } from \"./Scrollbar\";\r\n\r\nexport interface ISliderSettings extends IScrollbarSettings {\r\n}\r\n\r\nexport interface ISliderPrivate extends IScrollbarPrivate {\r\n}\r\n\r\nexport interface ISliderEvents extends IScrollbarEvents {\r\n}\r\n\r\n/**\r\n * A control that allows zooming chart's axes, or other uses requiring range\r\n * selection.\r\n */\r\nexport class Slider extends Scrollbar {\r\n\r\n\tdeclare public _settings: ISliderSettings;\r\n\tdeclare public _privateSettings: ISliderPrivate;\r\n\tdeclare public _events: ISliderEvents;\r\n\r\n\tpublic static className: string = \"Slider\";\r\n\tpublic static classNames: Array<string> = Scrollbar.classNames.concat([Slider.className]);\r\n\r\n\r\n\tprotected _afterNew() {\r\n\t\tthis._addOrientationClass();\r\n\t\tsuper._afterNew();\r\n\r\n\t\tthis.endGrip.setPrivate(\"visible\", false);\r\n\t\tthis.thumb.setPrivate(\"visible\", false);\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tpublic updateGrips() {\r\n\t\tsuper.updateGrips();\r\n\t\tconst startGrip = this.startGrip;\r\n\t\tthis.endGrip.setAll({ x: startGrip.x(), y: startGrip.y() });\r\n\t\tthis.setRaw(\"end\", this.get(\"start\"));\r\n\t}\r\n}\r\n", "const pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path;\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function(x1, y1, x, y) {\n    this._ += \"Q\" + (+x1) + \",\" + (+y1) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + (+x1) + \",\" + (+y1) + \",\" + (+x2) + \",\" + (+y2) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    }\n\n    // Is this arc empty? We’re done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,\" + (+(da >= pi)) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + (+w) + \"v\" + (+h) + \"h\" + (-w) + \"Z\";\n  },\n  toString: function() {\n    return this._;\n  }\n};\n\nexport default path;\n", "export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n", "export const abs = Math.abs;\nexport const atan2 = Math.atan2;\nexport const cos = Math.cos;\nexport const max = Math.max;\nexport const min = Math.min;\nexport const sin = Math.sin;\nexport const sqrt = Math.sqrt;\n\nexport const epsilon = 1e-12;\nexport const pi = Math.PI;\nexport const halfPi = pi / 2;\nexport const tau = 2 * pi;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x >= 1 ? halfPi : x <= -1 ? -halfPi : Math.asin(x);\n}\n", "import {path} from \"d3-path\";\nimport constant from \"./constant.js\";\nimport {abs, acos, asin, atan2, cos, epsilon, halfPi, max, min, pi, sin, sqrt, tau} from \"./math.js\";\n\nfunction arcInnerRadius(d) {\n  return d.innerRadius;\n}\n\nfunction arcOuterRadius(d) {\n  return d.outerRadius;\n}\n\nfunction arcStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction arcEndAngle(d) {\n  return d.endAngle;\n}\n\nfunction arcPadAngle(d) {\n  return d && d.padAngle; // Note: optional!\n}\n\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n  var x10 = x1 - x0, y10 = y1 - y0,\n      x32 = x3 - x2, y32 = y3 - y2,\n      t = y32 * x10 - x32 * y10;\n  if (t * t < epsilon) return;\n  t = (x32 * (y0 - y2) - y32 * (x0 - x2)) / t;\n  return [x0 + t * x10, y0 + t * y10];\n}\n\n// Compute perpendicular offset line of length rc.\n// http://mathworld.wolfram.com/Circle-LineIntersection.html\nfunction cornerTangents(x0, y0, x1, y1, r1, rc, cw) {\n  var x01 = x0 - x1,\n      y01 = y0 - y1,\n      lo = (cw ? rc : -rc) / sqrt(x01 * x01 + y01 * y01),\n      ox = lo * y01,\n      oy = -lo * x01,\n      x11 = x0 + ox,\n      y11 = y0 + oy,\n      x10 = x1 + ox,\n      y10 = y1 + oy,\n      x00 = (x11 + x10) / 2,\n      y00 = (y11 + y10) / 2,\n      dx = x10 - x11,\n      dy = y10 - y11,\n      d2 = dx * dx + dy * dy,\n      r = r1 - rc,\n      D = x11 * y10 - x10 * y11,\n      d = (dy < 0 ? -1 : 1) * sqrt(max(0, r * r * d2 - D * D)),\n      cx0 = (D * dy - dx * d) / d2,\n      cy0 = (-D * dx - dy * d) / d2,\n      cx1 = (D * dy + dx * d) / d2,\n      cy1 = (-D * dx + dy * d) / d2,\n      dx0 = cx0 - x00,\n      dy0 = cy0 - y00,\n      dx1 = cx1 - x00,\n      dy1 = cy1 - y00;\n\n  // Pick the closer of the two intersection points.\n  // TODO Is there a faster way to determine which intersection to use?\n  if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;\n\n  return {\n    cx: cx0,\n    cy: cy0,\n    x01: -ox,\n    y01: -oy,\n    x11: cx0 * (r1 / r - 1),\n    y11: cy0 * (r1 / r - 1)\n  };\n}\n\nexport default function() {\n  var innerRadius = arcInnerRadius,\n      outerRadius = arcOuterRadius,\n      cornerRadius = constant(0),\n      padRadius = null,\n      startAngle = arcStartAngle,\n      endAngle = arcEndAngle,\n      padAngle = arcPadAngle,\n      context = null;\n\n  function arc() {\n    var buffer,\n        r,\n        r0 = +innerRadius.apply(this, arguments),\n        r1 = +outerRadius.apply(this, arguments),\n        a0 = startAngle.apply(this, arguments) - halfPi,\n        a1 = endAngle.apply(this, arguments) - halfPi,\n        da = abs(a1 - a0),\n        cw = a1 > a0;\n\n    if (!context) context = buffer = path();\n\n    // Ensure that the outer radius is always larger than the inner radius.\n    if (r1 < r0) r = r1, r1 = r0, r0 = r;\n\n    // Is it a point?\n    if (!(r1 > epsilon)) context.moveTo(0, 0);\n\n    // Or is it a circle or annulus?\n    else if (da > tau - epsilon) {\n      context.moveTo(r1 * cos(a0), r1 * sin(a0));\n      context.arc(0, 0, r1, a0, a1, !cw);\n      if (r0 > epsilon) {\n        context.moveTo(r0 * cos(a1), r0 * sin(a1));\n        context.arc(0, 0, r0, a1, a0, cw);\n      }\n    }\n\n    // Or is it a circular or annular sector?\n    else {\n      var a01 = a0,\n          a11 = a1,\n          a00 = a0,\n          a10 = a1,\n          da0 = da,\n          da1 = da,\n          ap = padAngle.apply(this, arguments) / 2,\n          rp = (ap > epsilon) && (padRadius ? +padRadius.apply(this, arguments) : sqrt(r0 * r0 + r1 * r1)),\n          rc = min(abs(r1 - r0) / 2, +cornerRadius.apply(this, arguments)),\n          rc0 = rc,\n          rc1 = rc,\n          t0,\n          t1;\n\n      // Apply padding? Note that since r1 ≥ r0, da1 ≥ da0.\n      if (rp > epsilon) {\n        var p0 = asin(rp / r0 * sin(ap)),\n            p1 = asin(rp / r1 * sin(ap));\n        if ((da0 -= p0 * 2) > epsilon) p0 *= (cw ? 1 : -1), a00 += p0, a10 -= p0;\n        else da0 = 0, a00 = a10 = (a0 + a1) / 2;\n        if ((da1 -= p1 * 2) > epsilon) p1 *= (cw ? 1 : -1), a01 += p1, a11 -= p1;\n        else da1 = 0, a01 = a11 = (a0 + a1) / 2;\n      }\n\n      var x01 = r1 * cos(a01),\n          y01 = r1 * sin(a01),\n          x10 = r0 * cos(a10),\n          y10 = r0 * sin(a10);\n\n      // Apply rounded corners?\n      if (rc > epsilon) {\n        var x11 = r1 * cos(a11),\n            y11 = r1 * sin(a11),\n            x00 = r0 * cos(a00),\n            y00 = r0 * sin(a00),\n            oc;\n\n        // Restrict the corner radius according to the sector angle.\n        if (da < pi && (oc = intersect(x01, y01, x00, y00, x11, y11, x10, y10))) {\n          var ax = x01 - oc[0],\n              ay = y01 - oc[1],\n              bx = x11 - oc[0],\n              by = y11 - oc[1],\n              kc = 1 / sin(acos((ax * bx + ay * by) / (sqrt(ax * ax + ay * ay) * sqrt(bx * bx + by * by))) / 2),\n              lc = sqrt(oc[0] * oc[0] + oc[1] * oc[1]);\n          rc0 = min(rc, (r0 - lc) / (kc - 1));\n          rc1 = min(rc, (r1 - lc) / (kc + 1));\n        }\n      }\n\n      // Is the sector collapsed to a line?\n      if (!(da1 > epsilon)) context.moveTo(x01, y01);\n\n      // Does the sector’s outer ring have rounded corners?\n      else if (rc1 > epsilon) {\n        t0 = cornerTangents(x00, y00, x01, y01, r1, rc1, cw);\n        t1 = cornerTangents(x11, y11, x10, y10, r1, rc1, cw);\n\n        context.moveTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc1 < rc) context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r1, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), !cw);\n          context.arc(t1.cx, t1.cy, rc1, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the outer ring just a circular arc?\n      else context.moveTo(x01, y01), context.arc(0, 0, r1, a01, a11, !cw);\n\n      // Is there no inner ring, and it’s a circular sector?\n      // Or perhaps it’s an annular sector collapsed due to padding?\n      if (!(r0 > epsilon) || !(da0 > epsilon)) context.lineTo(x10, y10);\n\n      // Does the sector’s inner ring (or point) have rounded corners?\n      else if (rc0 > epsilon) {\n        t0 = cornerTangents(x10, y10, x11, y11, r0, -rc0, cw);\n        t1 = cornerTangents(x01, y01, x00, y00, r0, -rc0, cw);\n\n        context.lineTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc0 < rc) context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r0, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), cw);\n          context.arc(t1.cx, t1.cy, rc0, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the inner ring just a circular arc?\n      else context.arc(0, 0, r0, a10, a00, cw);\n    }\n\n    context.closePath();\n\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  arc.centroid = function() {\n    var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2,\n        a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - pi / 2;\n    return [cos(a) * r, sin(a) * r];\n  };\n\n  arc.innerRadius = function(_) {\n    return arguments.length ? (innerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : innerRadius;\n  };\n\n  arc.outerRadius = function(_) {\n    return arguments.length ? (outerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : outerRadius;\n  };\n\n  arc.cornerRadius = function(_) {\n    return arguments.length ? (cornerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : cornerRadius;\n  };\n\n  arc.padRadius = function(_) {\n    return arguments.length ? (padRadius = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), arc) : padRadius;\n  };\n\n  arc.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : startAngle;\n  };\n\n  arc.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : endAngle;\n  };\n\n  arc.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : padAngle;\n  };\n\n  arc.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), arc) : context;\n  };\n\n  return arc;\n}\n", "export var slice = Array.prototype.slice;\n\nexport default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n", "function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // falls through\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n", "import curveLinear from \"./linear.js\";\n\nexport var curveRadialLinear = curveRadial(curveLinear);\n\nfunction Radial(curve) {\n  this._curve = curve;\n}\n\nRadial.prototype = {\n  areaStart: function() {\n    this._curve.areaStart();\n  },\n  areaEnd: function() {\n    this._curve.areaEnd();\n  },\n  lineStart: function() {\n    this._curve.lineStart();\n  },\n  lineEnd: function() {\n    this._curve.lineEnd();\n  },\n  point: function(a, r) {\n    this._curve.point(r * Math.sin(a), r * -Math.cos(a));\n  }\n};\n\nexport default function curveRadial(curve) {\n\n  function radial(context) {\n    return new Radial(curve(context));\n  }\n\n  radial._curve = curve;\n\n  return radial;\n}\n", "import {min, sqrt} from \"../math.js\";\n\nconst sqrt3 = sqrt(3);\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size + min(size / 28, 0.75)) * 0.59436;\n    const t = r / 2;\n    const u = t * sqrt3;\n    context.moveTo(0, r);\n    context.lineTo(0, -r);\n    context.moveTo(-u, -t);\n    context.lineTo(u, t);\n    context.moveTo(-u, t);\n    context.lineTo(u, -t);\n  }\n};\n", "import {sqrt} from \"../math.js\";\n\nconst tan30 = sqrt(1 / 3);\nconst tan30_2 = tan30 * 2;\n\nexport default {\n  draw(context, size) {\n    const y = sqrt(size / tan30_2);\n    const x = y * tan30;\n    context.moveTo(0, -y);\n    context.lineTo(x, 0);\n    context.lineTo(0, y);\n    context.lineTo(-x, 0);\n    context.closePath();\n  }\n};\n", "import {sin, cos, sqrt, pi, tau} from \"../math.js\";\n\nconst ka = 0.89081309152928522810;\nconst kr = sin(pi / 10) / sin(7 * pi / 10);\nconst kx = sin(tau / 10) * kr;\nconst ky = -cos(tau / 10) * kr;\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size * ka);\n    const x = kx * r;\n    const y = ky * r;\n    context.moveTo(0, -r);\n    context.lineTo(x, y);\n    for (let i = 1; i < 5; ++i) {\n      const a = tau * i / 5;\n      const c = cos(a);\n      const s = sin(a);\n      context.lineTo(s * r, -c * r);\n      context.lineTo(c * x - s * y, s * x + c * y);\n    }\n    context.closePath();\n  }\n};\n", "import {sqrt} from \"../math.js\";\n\nconst sqrt3 = sqrt(3);\n\nexport default {\n  draw(context, size) {\n    const y = -sqrt(size / (sqrt3 * 3));\n    context.moveTo(0, y * 2);\n    context.lineTo(-sqrt3 * y, -y);\n    context.lineTo(sqrt3 * y, -y);\n    context.closePath();\n  }\n};\n", "import {sqrt} from \"../math.js\";\n\nconst sqrt3 = sqrt(3);\n\nexport default {\n  draw(context, size) {\n    const s = sqrt(size) * 0.6824;\n    const t = s  / 2;\n    const u = (s * sqrt3) / 2; // cos(Math.PI / 6)\n    context.moveTo(0, -s);\n    context.lineTo(u, t);\n    context.lineTo(-u, t);\n    context.closePath();\n  }\n};\n", "import {sqrt} from \"../math.js\";\n\nconst c = -0.5;\nconst s = sqrt(3) / 2;\nconst k = 1 / sqrt(12);\nconst a = (k / 2 + 1) * 3;\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size / a);\n    const x0 = r / 2, y0 = r * k;\n    const x1 = x0, y1 = r * k + r;\n    const x2 = -x1, y2 = y1;\n    context.moveTo(x0, y0);\n    context.lineTo(x1, y1);\n    context.lineTo(x2, y2);\n    context.lineTo(c * x0 - s * y0, s * x0 + c * y0);\n    context.lineTo(c * x1 - s * y1, s * x1 + c * y1);\n    context.lineTo(c * x2 - s * y2, s * x2 + c * y2);\n    context.lineTo(c * x0 + s * y0, c * y0 - s * x0);\n    context.lineTo(c * x1 + s * y1, c * y1 - s * x1);\n    context.lineTo(c * x2 + s * y2, c * y2 - s * x2);\n    context.closePath();\n  }\n};\n", "export default function() {}\n", "export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    (2 * that._x0 + that._x1) / 3,\n    (2 * that._y0 + that._y1) / 3,\n    (that._x0 + 2 * that._x1) / 3,\n    (that._y0 + 2 * that._y1) / 3,\n    (that._x0 + 4 * that._x1 + x) / 6,\n    (that._y0 + 4 * that._y1 + y) / 6\n  );\n}\n\nexport function Basis(context) {\n  this._context = context;\n}\n\nBasis.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 3: point(this, this._x1, this._y1); // falls through\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._context.lineTo((5 * this._x0 + this._x1) / 6, (5 * this._y0 + this._y1) / 6); // falls through\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new Basis(context);\n}\n", "import noop from \"../noop.js\";\nimport {point} from \"./basis.js\";\n\nfunction BasisClosed(context) {\n  this._context = context;\n}\n\nBasisClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x2, this._y2);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.moveTo((this._x2 + 2 * this._x3) / 3, (this._y2 + 2 * this._y3) / 3);\n        this._context.lineTo((this._x3 + 2 * this._x2) / 3, (this._y3 + 2 * this._y2) / 3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x2, this._y2);\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x2 = x, this._y2 = y; break;\n      case 1: this._point = 2; this._x3 = x, this._y3 = y; break;\n      case 2: this._point = 3; this._x4 = x, this._y4 = y; this._context.moveTo((this._x0 + 4 * this._x1 + x) / 6, (this._y0 + 4 * this._y1 + y) / 6); break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new BasisClosed(context);\n}\n", "import {point} from \"./basis.js\";\n\nfunction BasisOpen(context) {\n  this._context = context;\n}\n\nBasisOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; var x0 = (this._x0 + 4 * this._x1 + x) / 6, y0 = (this._y0 + 4 * this._y1 + y) / 6; this._line ? this._context.lineTo(x0, y0) : this._context.moveTo(x0, y0); break;\n      case 3: this._point = 4; // falls through\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new BasisOpen(context);\n}\n", "import {Basis} from \"./basis.js\";\n\nfunction Bundle(context, beta) {\n  this._basis = new Basis(context);\n  this._beta = beta;\n}\n\nBundle.prototype = {\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n    this._basis.lineStart();\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        j = x.length - 1;\n\n    if (j > 0) {\n      var x0 = x[0],\n          y0 = y[0],\n          dx = x[j] - x0,\n          dy = y[j] - y0,\n          i = -1,\n          t;\n\n      while (++i <= j) {\n        t = i / j;\n        this._basis.point(\n          this._beta * x[i] + (1 - this._beta) * (x0 + t * dx),\n          this._beta * y[i] + (1 - this._beta) * (y0 + t * dy)\n        );\n      }\n    }\n\n    this._x = this._y = null;\n    this._basis.lineEnd();\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\nexport default (function custom(beta) {\n\n  function bundle(context) {\n    return beta === 1 ? new Basis(context) : new Bundle(context, beta);\n  }\n\n  bundle.beta = function(beta) {\n    return custom(+beta);\n  };\n\n  return bundle;\n})(0.85);\n", "export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    that._x1 + that._k * (that._x2 - that._x0),\n    that._y1 + that._k * (that._y2 - that._y0),\n    that._x2 + that._k * (that._x1 - x),\n    that._y2 + that._k * (that._y1 - y),\n    that._x2,\n    that._y2\n  );\n}\n\nexport function Cardinal(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinal.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: point(this, this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; this._x1 = x, this._y1 = y; break;\n      case 2: this._point = 3; // falls through\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new Cardinal(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n", "import noop from \"../noop.js\";\nimport {point} from \"./cardinal.js\";\n\nexport function CardinalClosed(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalClosed(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n", "import {point} from \"./cardinal.js\";\n\nexport function CardinalOpen(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // falls through\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalOpen(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n", "import {epsilon} from \"../math.js\";\nimport {Cardinal} from \"./cardinal.js\";\n\nexport function point(that, x, y) {\n  var x1 = that._x1,\n      y1 = that._y1,\n      x2 = that._x2,\n      y2 = that._y2;\n\n  if (that._l01_a > epsilon) {\n    var a = 2 * that._l01_2a + 3 * that._l01_a * that._l12_a + that._l12_2a,\n        n = 3 * that._l01_a * (that._l01_a + that._l12_a);\n    x1 = (x1 * a - that._x0 * that._l12_2a + that._x2 * that._l01_2a) / n;\n    y1 = (y1 * a - that._y0 * that._l12_2a + that._y2 * that._l01_2a) / n;\n  }\n\n  if (that._l23_a > epsilon) {\n    var b = 2 * that._l23_2a + 3 * that._l23_a * that._l12_a + that._l12_2a,\n        m = 3 * that._l23_a * (that._l23_a + that._l12_a);\n    x2 = (x2 * b + that._x1 * that._l23_2a - x * that._l12_2a) / m;\n    y2 = (y2 * b + that._y1 * that._l23_2a - y * that._l12_2a) / m;\n  }\n\n  that._context.bezierCurveTo(x1, y1, x2, y2, that._x2, that._y2);\n}\n\nfunction CatmullRom(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRom.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: this.point(this._x2, this._y2); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; // falls through\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRom(context, alpha) : new Cardinal(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n", "import {CardinalClosed} from \"./cardinalClosed.js\";\nimport noop from \"../noop.js\";\nimport {point} from \"./catmullRom.js\";\n\nfunction CatmullRomClosed(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomClosed(context, alpha) : new CardinalClosed(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n", "import {CardinalOpen} from \"./cardinalOpen.js\";\nimport {point} from \"./catmullRom.js\";\n\nfunction CatmullRomOpen(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // falls through\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomOpen(context, alpha) : new CardinalOpen(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n", "import noop from \"../noop.js\";\n\nfunction LinearClosed(context) {\n  this._context = context;\n}\n\nLinearClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._point) this._context.closePath();\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    if (this._point) this._context.lineTo(x, y);\n    else this._point = 1, this._context.moveTo(x, y);\n  }\n};\n\nexport default function(context) {\n  return new LinearClosed(context);\n}\n", "function sign(x) {\n  return x < 0 ? -1 : 1;\n}\n\n// Calculate the slopes of the tangents (Hermite-type interpolation) based on\n// the following paper: Steffen, M. 1990. A Simple Method for Monotonic\n// Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.\n// NOV(II), P. 443, 1990.\nfunction slope3(that, x2, y2) {\n  var h0 = that._x1 - that._x0,\n      h1 = x2 - that._x1,\n      s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0),\n      s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0),\n      p = (s0 * h1 + s1 * h0) / (h0 + h1);\n  return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\n}\n\n// Calculate a one-sided slope.\nfunction slope2(that, t) {\n  var h = that._x1 - that._x0;\n  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;\n}\n\n// According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations\n// \"you can express cubic Hermite interpolation in terms of cubic Bézier curves\n// with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1\".\nfunction point(that, t0, t1) {\n  var x0 = that._x0,\n      y0 = that._y0,\n      x1 = that._x1,\n      y1 = that._y1,\n      dx = (x1 - x0) / 3;\n  that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);\n}\n\nfunction MonotoneX(context) {\n  this._context = context;\n}\n\nMonotoneX.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 =\n    this._t0 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n      case 3: point(this, this._t0, slope2(this, this._t0)); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    var t1 = NaN;\n\n    x = +x, y = +y;\n    if (x === this._x1 && y === this._y1) return; // Ignore coincident points.\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; point(this, slope2(this, t1 = slope3(this, x, y)), t1); break;\n      default: point(this, this._t0, t1 = slope3(this, x, y)); break;\n    }\n\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n    this._t0 = t1;\n  }\n}\n\nfunction MonotoneY(context) {\n  this._context = new ReflectContext(context);\n}\n\n(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function(x, y) {\n  MonotoneX.prototype.point.call(this, y, x);\n};\n\nfunction ReflectContext(context) {\n  this._context = context;\n}\n\nReflectContext.prototype = {\n  moveTo: function(x, y) { this._context.moveTo(y, x); },\n  closePath: function() { this._context.closePath(); },\n  lineTo: function(x, y) { this._context.lineTo(y, x); },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) { this._context.bezierCurveTo(y1, x1, y2, x2, y, x); }\n};\n\nexport function monotoneX(context) {\n  return new MonotoneX(context);\n}\n\nexport function monotoneY(context) {\n  return new MonotoneY(context);\n}\n", "function Natural(context) {\n  this._context = context;\n}\n\nNatural.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        n = x.length;\n\n    if (n) {\n      this._line ? this._context.lineTo(x[0], y[0]) : this._context.moveTo(x[0], y[0]);\n      if (n === 2) {\n        this._context.lineTo(x[1], y[1]);\n      } else {\n        var px = controlPoints(x),\n            py = controlPoints(y);\n        for (var i0 = 0, i1 = 1; i1 < n; ++i0, ++i1) {\n          this._context.bezierCurveTo(px[0][i0], py[0][i0], px[1][i0], py[1][i0], x[i1], y[i1]);\n        }\n      }\n    }\n\n    if (this._line || (this._line !== 0 && n === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n    this._x = this._y = null;\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\n// See https://www.particleincell.com/2012/bezier-splines/ for derivation.\nfunction controlPoints(x) {\n  var i,\n      n = x.length - 1,\n      m,\n      a = new Array(n),\n      b = new Array(n),\n      r = new Array(n);\n  a[0] = 0, b[0] = 2, r[0] = x[0] + 2 * x[1];\n  for (i = 1; i < n - 1; ++i) a[i] = 1, b[i] = 4, r[i] = 4 * x[i] + 2 * x[i + 1];\n  a[n - 1] = 2, b[n - 1] = 7, r[n - 1] = 8 * x[n - 1] + x[n];\n  for (i = 1; i < n; ++i) m = a[i] / b[i - 1], b[i] -= m, r[i] -= m * r[i - 1];\n  a[n - 1] = r[n - 1] / b[n - 1];\n  for (i = n - 2; i >= 0; --i) a[i] = (r[i] - a[i + 1]) / b[i];\n  b[n - 1] = (x[n] + a[n - 1]) / 2;\n  for (i = 0; i < n - 1; ++i) b[i] = 2 * x[i + 1] - a[i + 1];\n  return [a, b];\n}\n\nexport default function(context) {\n  return new Natural(context);\n}\n", "function Step(context, t) {\n  this._context = context;\n  this._t = t;\n}\n\nStep.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = this._y = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (0 < this._t && this._t < 1 && this._point === 2) this._context.lineTo(this._x, this._y);\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    if (this._line >= 0) this._t = 1 - this._t, this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // falls through\n      default: {\n        if (this._t <= 0) {\n          this._context.lineTo(this._x, y);\n          this._context.lineTo(x, y);\n        } else {\n          var x1 = this._x * (1 - this._t) + x * this._t;\n          this._context.lineTo(x1, this._y);\n          this._context.lineTo(x1, y);\n        }\n        break;\n      }\n    }\n    this._x = x, this._y = y;\n  }\n};\n\nexport default function(context) {\n  return new Step(context, 0.5);\n}\n\nexport function stepBefore(context) {\n  return new Step(context, 0);\n}\n\nexport function stepAfter(context) {\n  return new Step(context, 1);\n}\n", "import { Graphics, IGraphicsSettings, IGraphicsPrivate } from \"./Graphics\";\nimport * as $type from \"../util/Type\";\nimport { Percent } from \"../util/Percent\";\nimport type { IPoint } from \"../util/IPoint\";\nimport { arc } from \"d3-shape\";\nimport * as $math from \"../util/Math\";\n\nexport interface ISliceSettings extends IGraphicsSettings {\n\n\t/**\n\t * Radius in pixels.\n\t */\n\tradius?: number;\n\n\t/**\n\t * Slice \"width\" in degrees.\n\t */\n\tarc?: number;\n\n\t/**\n\t * Inner radius of the slice in pixels.\n\t */\n\tinnerRadius?: number;\n\n\t/**\n\t * Start angle in degrees.\n\t */\n\tstartAngle?: number;\n\n\t/**\n\t * Slice corner radius in pixels.\n\t */\n\tcornerRadius?: number;\n\n\t/**\n\t * Slice \"pull out\" radius in pixels.\n\t */\n\tshiftRadius?: number;\n\n\t/**\n\t * Number of pixels to add to whatever slice's `radius` value is. Negative\n\t * numbers can also be used.\n\t */\n\tdRadius?: number;\n\n\t/**\n\t * Number of pixels to add to whatever slice's `innerRadius` value is.\n\t * Negative numbers can also be used.\n\t */\n\tdInnerRadius?: number;\n\n}\n\nexport interface ISlicePrivate extends IGraphicsPrivate {\n}\n\n/**\n * Draws a slice shape.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\n */\nexport class Slice extends Graphics {\n\n\tdeclare public _settings: ISliceSettings;\n\tdeclare public _privateSettings: ISlicePrivate;\n\n\tpublic static className: string = \"Slice\";\n\tpublic static classNames: Array<string> = Graphics.classNames.concat([Slice.className]);\n\n\t/**\n\t * @ignore\n\t */\n\tpublic ix: number = 0;\n\n\t/**\n\t * @ignore\n\t */\n\tpublic iy: number = 0;\n\n\tprotected _generator = arc();\n\n\tpublic _getTooltipPoint(): IPoint {\n\t\tlet tooltipX = this.get(\"tooltipX\");\n\t\tlet tooltipY = this.get(\"tooltipY\");\n\n\t\tlet x = 0;\n\t\tlet y = 0;\n\n\t\tif ($type.isNumber(tooltipX)) {\n\t\t\tx = tooltipX;\n\t\t}\n\n\t\tif ($type.isNumber(tooltipY)) {\n\t\t\ty = tooltipY;\n\t\t}\n\n\t\tlet radius = this.get(\"radius\", 0);\n\t\tlet innerRadius = this.get(\"innerRadius\", 0);\n\n\t\tlet dRadius = this.get(\"dRadius\", 0);\n\t\tlet dInnerRadius = this.get(\"dInnerRadius\", 0);\n\n\t\tradius += dRadius;\n\t\tinnerRadius += dInnerRadius;\n\n\t\tif (innerRadius < 0) {\n\t\t\tinnerRadius = radius + innerRadius;\n\t\t}\n\n\t\tif (tooltipX instanceof Percent) {\n\t\t\tx = this.ix * (innerRadius + (radius - innerRadius) * tooltipX.value)\n\t\t}\n\n\t\tif (tooltipY instanceof Percent) {\n\t\t\ty = this.iy * (innerRadius + (radius - innerRadius) * tooltipY.value)\n\t\t}\n\n\t\tif (this.get(\"arc\") >= 360 && innerRadius == 0) {\n\t\t\tx = 0;\n\t\t\ty = 0;\n\t\t}\n\n\n\t\treturn { x, y };\n\t}\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tif (this.isDirty(\"radius\") || this.isDirty(\"arc\") || this.isDirty(\"innerRadius\") || this.isDirty(\"startAngle\") || this.isDirty(\"dRadius\") || this.isDirty(\"dInnerRadius\") || this.isDirty(\"cornerRadius\")) {\n\t\t\tthis._clear = true;\n\t\t}\n\t}\n\n\tpublic _changed() {\n\t\tsuper._changed();\n\n\t\tif (this._clear) {\n\t\t\tlet startAngle = this.get(\"startAngle\", 0);\n\t\t\tlet arc = this.get(\"arc\", 0);\n\t\t\tconst generator = this._generator;\n\n\t\t\tif(arc < 0){\n\t\t\t\tstartAngle = startAngle + arc;\n\t\t\t\tarc = arc * -1;\n\t\t\t}\n\n\t\t\tif(arc > 0.1){ // this fixes bug with full circle when arc is very small\n\t\t\t\tgenerator.cornerRadius(this.get(\"cornerRadius\", 0));\n\t\t\t}\n\t\t\tgenerator.context(this._display as any);\n\n\t\t\tlet radius = this.get(\"radius\", 0);\n\t\t\tlet innerRadius = this.get(\"innerRadius\", 0);\n\n\t\t\tlet dRadius = this.get(\"dRadius\", 0);\n\t\t\tlet dInnerRadius = this.get(\"dInnerRadius\", 0);\n\n\t\t\tradius += dRadius;\n\t\t\tinnerRadius += dInnerRadius;\t\t\t\n\n\t\t\tif (innerRadius < 0) {\n\t\t\t\tinnerRadius = radius + innerRadius;\n\t\t\t}\n\n\t\t\tgenerator({ innerRadius: innerRadius, outerRadius: radius, startAngle: (startAngle + 90) * $math.RADIANS, endAngle: (startAngle + arc + 90) * $math.RADIANS });\n\n\t\t\tlet middleAngle = startAngle + arc / 2;\n\n\t\t\tthis.ix = $math.cos(middleAngle);\n\t\t\tthis.iy = $math.sin(middleAngle);\n\t\t}\n\n\t\tif (this.isDirty(\"shiftRadius\")) {\n\t\t\tconst shiftRadius = this.get(\"shiftRadius\", 0);\n\t\t\tthis.setRaw(\"dx\", this.ix * shiftRadius);\n\t\t\tthis.setRaw(\"dy\", this.iy * shiftRadius);\n\t\t\tthis.markDirtyPosition();\n\t\t}\n\t}\n}\n", "import { Line, ILineSettings, ILinePrivate } from \"./Line\";\n\n\nexport interface ITickSettings extends ILineSettings {\n\n\t/**\n\t * Length in pixels.\n\t */\n\tlength?: number;\n\n\t/**\n\t * Location within target space. 0 - beginning, 1 - end.\n\t */\n\tlocation?: number;\n\n}\n\nexport interface ITickPrivate extends ILinePrivate {\n}\n\n/**\n * Draws a tick element (mostly used on axes).\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\n */\nexport class Tick extends Line {\n\n\tdeclare public _settings: ITickSettings;\n\tdeclare public _privateSettings: ITickPrivate;\n\n\tpublic static className: string = \"Tick\";\n\tpublic static classNames: Array<string> = Line.classNames.concat([Tick.className]);\n}\n", "import type { IGradient } from \"../backend/Renderer\";\nimport type { Sprite } from \"../Sprite\";\nimport type { Percent } from \"../../util/Percent\";\n\nimport { Gradient, IGradientSettings, IGradientPrivate } from \"./Gradient\";\nimport { Color } from \"../../util/Color\";\n\nimport * as $array from \"../../util/Array\";\nimport * as $type from \"../../util/Type\";\nimport * as $utils from \"../../util/Utils\";\n\n\nexport interface IRadialGradientSettings extends IGradientSettings {\n\n\t/**\n\t * Gradient radius in pixels or percent (relative to the `target`).\n\t */\n\tradius?: number | Percent;\n\n\t/**\n\t * X position.\n\t */\n\tx?: number | Percent;\n\n\t/**\n\t * Y position.\n\t */\n\ty?: number | Percent;\n\n}\n\nexport interface IRadialGradientPrivate extends IGradientPrivate {\n}\n\n/**\n * Radial gradient.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/gradients/} for more info\n */\nexport class RadialGradient extends Gradient {\n\n\tdeclare public _settings: IRadialGradientSettings;\n\tdeclare public _privateSettings: IRadialGradientPrivate;\n\n\tpublic static className: string = \"RadialGradient\";\n\tpublic static classNames: Array<string> = Gradient.classNames.concat([RadialGradient.className]);\n\n\t/**\n\t * @ignore\n\t */\n\tpublic getFill(target: Sprite): IGradient {\n\t\tconst bounds = this.getBounds(target);\n\n\t\tlet x = 0;\n\t\tlet y = 0;\n\n\t\tlet l = bounds.left || 0;\n\t\tlet r = bounds.right || 0;\n\t\tlet t = bounds.top || 0;\n\t\tlet b = bounds.bottom || 0;\n\n\t\tconst width = r - l;\n\t\tconst height = b - t;\n\n\t\tlet radius = target.get(\"radius\" as any);\n\t\tif ($type.isNumber(radius)) {\n\t\t\tx = 0;\n\t\t\ty = 0;\n\t\t}\n\t\telse {\n\t\t\tradius = Math.min(width, height) / 2;\n\t\t\tx = width / 2;\n\t\t\ty = height / 2;\n\t\t}\n\n\t\tlet ux = this.get(\"x\");\n\t\tlet uy = this.get(\"y\");\n\t\tif (ux != null) {\n\t\t\tx = $utils.relativeToValue(ux, width);\n\t\t}\n\n\t\tif (uy != null) {\n\t\t\ty = $utils.relativeToValue(uy, height);\n\t\t}\n\n\t\tconst gradient = this._root._renderer.createRadialGradient(x, y, 0, x, y, radius);\n\t\tconst stops = this.get(\"stops\")!;\n\t\tif (stops) {\n\t\t\tlet i = 0;\n\t\t\t$array.each(stops, (stop) => {\n\n\t\t\t\tlet offset = stop.offset;\n\n\t\t\t\tif (!$type.isNumber(offset)) {\n\t\t\t\t\toffset = i / (stops.length - 1);\n\t\t\t\t}\n\n\t\t\t\tlet opacity = stop.opacity;\n\n\t\t\t\tif (!$type.isNumber(opacity)) {\n\t\t\t\t\topacity = 1;\n\t\t\t\t}\n\n\t\t\t\tlet color = stop.color;\n\n\t\t\t\tif (color) {\n\n\t\t\t\t\tconst lighten = stop.lighten;\n\t\t\t\t\tif (lighten) {\n\t\t\t\t\t\tcolor = Color.lighten(color, lighten)\n\t\t\t\t\t}\n\n\t\t\t\t\tconst brighten = stop.brighten;\n\t\t\t\t\tif (brighten) {\n\t\t\t\t\t\tcolor = Color.brighten(color, brighten)\n\t\t\t\t\t}\n\n\t\t\t\t\tgradient.addColorStop(offset, 'rgba(' + color.r + ',' + color.g + ',' + color.b + ',' + opacity + ')');\n\t\t\t\t}\n\t\t\t\ti++;\n\t\t\t})\n\t\t}\n\n\t\treturn gradient\n\t}\n}\n", "import { Pattern, IPatternSettings, IPatternPrivate } from \"./Pattern\";\n\nimport * as $math from \"../../util/Math\";\n\nexport interface ICirclePatternSettings extends IPatternSettings {\n\n\t/**\n\t * Gap between circles, in pixels.\n\t *\n\t * @default 3\n\t */\n\tgap?: number;\n\n\t/**\n\t * Radius of the circles, in pixels.\n\t *\n\t * @default 3\n\t */\n\tradius?: number;\n\n\t/**\n\t * If set to `true`, will place every second circle, creating checkered\n\t * pattern.\n\t *\n\t * @default false\n\t */\n\tcheckered?: boolean;\n\n\t/**\n\t * Center circles.\n\t *\n\t * @default true\n\t */\n\tcentered?: boolean;\n\n}\n\nexport interface ICirclePatternPrivate extends IPatternPrivate {\n}\n\n/**\n * Circle pattern.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/patterns/} for more info\n */\nexport class CirclePattern extends Pattern {\n\n\tdeclare public _settings: ICirclePatternSettings;\n\tdeclare public _privateSettings: ICirclePatternPrivate;\n\n\tpublic static className: string = \"CirclePattern\";\n\tpublic static classNames: Array<string> = Pattern.classNames.concat([CirclePattern.className]);\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tif (this.isDirty(\"gap\")) {\n\t\t\tthis._clear = true;\n\t\t}\n\t}\n\n\tprotected _draw() {\n\t\tsuper._draw();\n\n\t\tconst checkered = this.get(\"checkered\", false);\n\t\tconst centered = this.get(\"centered\", true);\n\t\tconst gap = this.get(\"gap\", 0);\n\t\tconst rotation = this.get(\"rotation\", 0);\n\t\tlet w = this.get(\"width\", 100);\n\t\tlet h = this.get(\"height\", 100);\n\t\tlet radius = this.get(\"radius\", 3);\n\n\t\tlet cellW = radius * 2 + gap;\n\t\tlet cellH = radius * 2 + gap;\n\n\t\tlet cols = Math.round(w / cellW);\n\t\tlet rows = Math.round(h / cellH);\n\n\t\tcellW = w / cols;\n\t\tcellH = h / rows;\n\n\t\tif (rotation != 0) {\n\t\t\t// @todo this is probably not right\n\t\t\tthis._display.x = cellW * $math.cos(rotation);\n\t\t\tthis._display.y = cellH * $math.sin(rotation);\n\t\t}\n\n\t\tconst color = this.get(\"color\");\n\t\tconst colorOpacity = this.get(\"colorOpacity\");\n\t\tif (color || colorOpacity) {\n\t\t\tthis._display.beginFill(color, colorOpacity);\n\t\t}\n\n\t\tfor (let r = rotation == 0 ? 0 : -rows * 2; r < rows * 2; r++) {\n\t\t\tfor (let c = rotation == 0 ? 0 : -cols * 2; c < cols * 2; c++) {\n\t\t\t\tif (!checkered || ((r & 1) != 1 && (c & 1) != 1) || ((r & 1) == 1 && (c & 1) == 1)) {\n\t\t\t\t\tlet x = c * cellW;\n\t\t\t\t\tlet y = r * cellH;\n\t\t\t\t\tif (centered) {\n\t\t\t\t\t\tx += cellW + gap / 2;\n\t\t\t\t\t\ty += cellH + gap / 2;\n\t\t\t\t\t}\n\t\t\t\t\tthis._display.drawCircle(x - radius, y - radius, radius);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (checkered) {\n\t\t\tw = w / 2 - gap * 2;\n\t\t\th = h / 2 - gap * 2;\n\t\t}\n\t\telse {\n\t\t\tw -= gap;\n\t\t\th -= gap;\n\t\t}\n\n\t\tif (color || colorOpacity) {\n\t\t\tthis._display.endFill();\n\t\t}\n\n\t}\n}\n", "import { Pattern, IPatternSettings, IPatternPrivate } from \"./Pattern\";\nimport * as $type from \"../../util//Type\";\n\nexport interface ILinePatternSettings extends IPatternSettings {\n\n\t/**\n\t * Gap between  lines, in pixels.\n\t *\n\t * @default 6\n\t */\n\tgap?: number;\n\n}\n\nexport interface ILinePatternPrivate extends IPatternPrivate {\n}\n\n/**\n * Line pattern.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/patterns/} for more info\n */\nexport class LinePattern extends Pattern {\n\n\tdeclare public _settings: ILinePatternSettings;\n\tdeclare public _privateSettings: ILinePatternPrivate;\n\n\tpublic static className: string = \"LinePattern\";\n\tpublic static classNames: Array<string> = Pattern.classNames.concat([LinePattern.className]);\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tif (this.isDirty(\"gap\")) {\n\t\t\tthis._clear = true;\n\t\t}\n\t}\n\n\tprotected _draw() {\n\t\tsuper._draw();\n\n\t\tconst w = this.get(\"width\", 100);\n\t\tconst h = this.get(\"height\", 100);\n\t\tconst gap = this.get(\"gap\", 0);\n\t\tconst strokeWidth = this.get(\"strokeWidth\", 1);\n\n\t\tif (!gap) {\n\t\t\tthis._display.moveTo(0, 0);\n\t\t\tthis._display.lineTo(w, 0);\n\t\t}\n\t\telse {\n\t\t\tlet step = gap + strokeWidth;\n\t\t\tlet count = h / step;\n\n\t\t\tfor (let i = -count; i < count * 2; i++) {\n\t\t\t\tconst y = Math.round(i * step - step / 2) + 0.5;\n\t\t\t\tthis._display.moveTo(-w, y);\n\t\t\t\tthis._display.lineTo(w * 2, y);\n\t\t\t}\n\t\t}\n\n\t\tthis._display.lineStyle(strokeWidth, this.get(\"color\"), this.get(\"colorOpacity\"));\n\n\t\tlet strokeDasharray = this.get(\"strokeDasharray\");\n\t\tif ($type.isNumber(strokeDasharray)) {\n\t\t\tif (strokeDasharray < 0.5) {\n\t\t\t\tstrokeDasharray = [0];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tstrokeDasharray = [strokeDasharray]\n\t\t\t}\n\t\t}\n\t\tthis._display.setLineDash(strokeDasharray as number[]);\n\n\t\tconst strokeDashoffset = this.get(\"strokeDashoffset\");\n\t\tif (strokeDashoffset) {\n\t\t\tthis._display.setLineDashOffset(strokeDashoffset);\n\t\t}\n\n\t\tthis._display.endStroke();\n\t}\n}\n", "import { Pattern, IPatternSettings, IPatternPrivate } from \"./Pattern\";\n\nimport * as $math from \"../../util/Math\";\n\nexport interface IRectanglePatternSettings extends IPatternSettings {\n\n\t/**\n\t * Gap between rectangles, in pixels.\n\t *\n\t * @default 6\n\t */\n\tgap?: number;\n\n\t/**\n\t * Maximum width of the rectangle, in pixels.\n\t *\n\t * @default 5\n\t */\n\tmaxWidth?: number;\n\n\t/**\n\t * Maximum height of the rectangle, in pixels.\n\t *\n\t * @default 5\n\t */\n\tmaxHeight?: number;\n\n\t/**\n\t * If set to `true`, will place every second rectangle, creating checkered\n\t * pattern.\n\t *\n\t * @default false\n\t */\n\tcheckered?: boolean;\n\n\t/**\n\t * Center rectangles.\n\t *\n\t * @default true\n\t */\n\tcentered?: boolean;\n\n}\n\nexport interface IRectanglePatternPrivate extends IPatternPrivate {\n}\n\n/**\n * Rectangle pattern.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/patterns/} for more info\n */\nexport class RectanglePattern extends Pattern {\n\tdeclare public _settings: IRectanglePatternSettings;\n\tdeclare public _privateSettings: IRectanglePatternPrivate;\n\n\tpublic static className: string = \"RectanglePattern\";\n\tpublic static classNames: Array<string> = Pattern.classNames.concat([RectanglePattern.className]);\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tif (this.isDirty(\"gap\")) {\n\t\t\tthis._clear = true;\n\t\t}\n\t}\n\n\tprotected _draw() {\n\t\tsuper._draw();\n\n\t\tconst checkered = this.get(\"checkered\", false);\n\t\tconst centered = this.get(\"centered\", true);\n\t\tconst gap = this.get(\"gap\", 0);\n\t\tconst rotation = this.get(\"rotation\", 0);\n\t\tlet w = this.get(\"width\", 100);\n\t\tlet h = this.get(\"height\", 100);\n\t\tlet rectW = this.get(\"maxWidth\", 5);\n\t\tlet rectH = this.get(\"maxHeight\", 5);\n\n\n\t\tlet cellW = rectW + gap;\n\t\tlet cellH = rectH + gap;\n\n\t\tlet cols = Math.round(w / cellW);\n\t\tlet rows = Math.round(h / cellH);\n\n\t\tcellW = w / cols;\n\t\tcellH = h / rows;\n\n\t\tif (rotation != 0) {\n\t\t\t// @todo this is probably not right\n\t\t\tthis._display.x = cellW / 2 * $math.cos(rotation);\n\t\t\tthis._display.y = -cellH / 2 * $math.sin(rotation);\n\t\t}\n\n\t\tfor (let r = rotation == 0 ? 0 : -rows * 2; r < rows * 2; r++) {\n\t\t\tfor (let c = rotation == 0 ? 0 : -cols * 2; c < cols * 2; c++) {\n\t\t\t\tif (!checkered || ((r & 1) != 1 && (c & 1) != 1) || ((r & 1) == 1 && (c & 1) == 1)) {\n\t\t\t\t\tlet x = c * cellW;\n\t\t\t\t\tlet y = r * cellH;\n\t\t\t\t\tif (centered) {\n\t\t\t\t\t\tx += (cellW - rectW) / 2;\n\t\t\t\t\t\ty += (cellH - rectH) / 2;\n\t\t\t\t\t}\n\t\t\t\t\tthis._display.drawRect(x, y, rectW, rectH);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (checkered) {\n\t\t\tw = w / 2 - gap * 2;\n\t\t\th = h / 2 - gap * 2;\n\t\t}\n\t\telse {\n\t\t\tw -= gap;\n\t\t\th -= gap;\n\t\t}\n\n\t\tconst color = this.get(\"color\");\n\t\tconst colorOpacity = this.get(\"colorOpacity\");\n\t\tif (color || colorOpacity) {\n\t\t\t// this._display.lineStyle(strokeWidth, stroke, colorOpacity);\n\t\t\t// this._display.endStroke();\n\t\t\tthis._display.beginFill(color, colorOpacity);\n\t\t\tthis._display.endFill();\n\t\t}\n\n\t}\n}\n", "import { Entity, IEntitySettings, IEntityPrivate } from \"./Entity\";\nimport { Color } from \"./Color\";\n\n\nexport interface IColorSetSettings extends IEntitySettings {\n\n\t/**\n\t * List of colors in the set.\n\t */\n\tcolors?: Color[];\n\n\t/**\n\t * A step size when using `next()`.\n\t *\n\t * E.g. setting to `2` will make it return every second color in the list.\n\t *\n\t * @default 1\n\t */\n\tstep?: number;\n\n\t/**\n\t * Start iterating colors from specific index.\n\t */\n\tstartIndex?: number;\n\n\t/**\n\t * If set to `true`, color set will reuse existing colors from the list\n\t * inestead of generating new ones.\n\t *\n\t * @default false\n\t */\n\treuse?: boolean;\n\n\t/**\n\t * A base color to generate new colors from if `colors` is not specified.\n\t * @type {[type]}\n\t */\n\tbaseColor?: Color;\n\n\t/**\n\t * A set of tranformation to apply to base list of colors when the set runs\n\t * out of colors and generates additional ones.\n\t */\n\tpassOptions?: IColorSetStepOptions;\n\n\t/**\n\t * If set, each returned color will be applied saturation.\n\t */\n\tsaturation?: number;\n\n\t// count?: number;\n}\n\nexport interface IColorSetPrivate extends IEntityPrivate {\n\n\tcurrentStep?: number;\n\tcurrentPass?: number;\n\n\t/**\n\t * @ignore\n\t */\n\tnumColors?: number;\n\n}\n\nexport interface IColorSetStepOptions {\n\n\t/**\n\t * Value to add to \"hue\".\n\t */\n\thue?: number;\n\n\t/**\n\t * Value to add to \"saturation\".\n\t */\n\tsaturation?: number;\n\n\t/**\n\t * Value to add to \"lightness\".\n\t */\n\tlightness?: number;\n\n}\n\n\n/**\n * An object which holds list of colors and can generate new ones.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/#Color_sets} for more info\n */\nexport class ColorSet extends Entity {\n\tpublic static className: string = \"ColorSet\";\n\tpublic static classNames: Array<string> = Entity.classNames.concat([ColorSet.className]);\n\n\tdeclare public _settings: IColorSetSettings;\n\tdeclare public _privateSettings: IColorSetPrivate;\n\n\t//protected _currentPass: number = 0;\n\n\tprotected _afterNew() {\n\t\t// Applying themes because color set will not have parent\n\t\tsuper._afterNewApplyThemes();\n\t}\n\n\tpublic _beforeChanged(): void {\n\t\tif (this.isDirty(\"colors\")) {\n\t\t\tthis.reset();\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic generateColors(): void {\n\t\tthis.setPrivate(\"currentPass\", this.getPrivate(\"currentPass\", 0) + 1)\n\t\tconst pass = this.getPrivate(\"currentPass\");\n\t\tconst colors = this.get(\"colors\", [this.get(\"baseColor\", Color.fromHex(0xff0000))]);\n\t\tif (!this.getPrivate(\"numColors\")) {\n\t\t\tthis.setPrivate(\"numColors\", colors.length);\n\t\t}\n\t\t//const len = colors.length;\n\t\tconst len = this.getPrivate(\"numColors\")!;\n\t\t//const start = len - this.getPrivate(\"numColors\")!;\n\t\tconst start = 0;\n\t\tconst passOptions = this.get(\"passOptions\")!;\n\t\tconst reuse = this.get(\"reuse\");\n\t\tfor (let i = start; i < len; i++) {\n\t\t\tif (reuse) {\n\t\t\t\tcolors.push(colors[i])\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconst hsl = colors[i]!.toHSL();\n\t\t\t\tlet h = hsl.h + (passOptions.hue || 0) * pass!;\n\t\t\t\twhile (h > 1) h -= 1;\n\n\t\t\t\tlet s = hsl.s + (passOptions.saturation || 0) * pass!;\n\t\t\t\t//if (s > 1) s -= Math.floor(s);\n\t\t\t\tif (s > 1) s = 1;\n\t\t\t\tif (s < 0) s = 0;\n\n\t\t\t\tlet l = hsl.l + (passOptions.lightness || 0) * pass!;\n\t\t\t\t//if (l > 1) l -= Math.floor(l);\n\t\t\t\twhile (l > 1) l -= 1;\n\t\t\t\tcolors.push(Color.fromHSL(h, s, l));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns a [[Color]] at specific index.\n\t *\n\t * If there's no color at this index, a new color is generated.\n\t *\n\t * @param   index  Index\n\t * @return         Color\n\t */\n\tpublic getIndex(index: number): Color {\n\t\tconst colors = this.get(\"colors\", []);\n\t\tconst saturation = this.get(\"saturation\");\n\t\tif (index >= colors.length) {\n\t\t\tthis.generateColors();\n\t\t\treturn this.getIndex(index);\n\t\t}\n\n\t\treturn saturation != null ? Color.saturate(colors[index], saturation!) : colors[index];\n\t}\n\n\t/**\n\t * Returns next [[Color]] in the list.\n\t *\n\t * If the list is out of colors, new ones are generated dynamically.\n\t */\n\tpublic next() {\n\t\tlet currentStep = this.getPrivate(\"currentStep\", this.get(\"startIndex\", 0));\n\t\tthis.setPrivate(\"currentStep\", currentStep + this.get(\"step\", 1));\n\t\treturn this.getIndex(currentStep);\n\t}\n\n\t/**\n\t * Resets counter to the start of the list, so the next call for `next()` will\n\t * return the first color.\n\t */\n\tpublic reset() {\n\t\tthis.setPrivate(\"currentStep\", this.get(\"startIndex\", 0));\n\t\tthis.setPrivate(\"currentPass\", 0);\n\t}\n}\n", "import * as $type from \"./Type\"\nimport * as $object from \"./Object\"\n\nexport interface IJSONParserOptions {\n\n\t/**\n\t * Reverse the order of parsed data.\n\t */\n\treverse?: boolean;\n\n}\n\n/**\n * Tool to parse JSON string into structured data.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/data/#Parsing} for more info\n * @important\n */\nexport class JSONParser {\n\n\t/**\n\t * Parses JSON string.\n\t * \n\t * @param   input    JSON\n\t * @param   options  Options\n\t * @return           Data\n\t */\n\tpublic static parse(input: string, options?: IJSONParserOptions): any {\n\t\toptions = this._applyDefaults(options);\n\t\ttry {\n\t\t\tif ($type.isString(input)) {\n\t\t\t\tlet data  = JSON.parse(input);\n\t\t\t\tif (options.reverse && $type.isArray(data)) {\n\t\t\t\t\tdata.reverse();\n\t\t\t\t}\n\t\t\t\treturn data;\n\t\t\t}\n\t\t\telse if ($type.isArray(input) || $type.isObject(input)) {\n\t\t\t\treturn input;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthrow(\"Unable to parse JSON data\");\n\t\t\t}\n\t\t} catch (e) {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\n\tprotected static _applyDefaults(options?: IJSONParserOptions): IJSONParserOptions {\n\t\tconst normalized: IJSONParserOptions = {};\n\t\tconst defaults = {\n\t\t\treverse: false\n\t\t};\n\t\tif (!options) {\n\t\t\toptions = {};\n\t\t}\n\t\t$object.each(defaults, (key, val) => {\n\t\t\tnormalized[key] = options![key] || val;\n\t\t});\n\t\treturn normalized;\n\t}\n}\n\n\nexport interface ICSVParserOptions {\n\n\t/**\n\t * Delimiter used for columns.\n\t * \n\t * @default \",\"\n\t */\n\tdelimiter?: string;\n\n\t/**\n\t * Reverse the order of parsed data.\n\t */\n\treverse?: boolean;\n\n\t/**\n\t * Skip first X rows.\n\t *\n\t * @default 0\n\t */\n\tskipRows?: number;\n\n\t/**\n\t * Skip empty rows.\n\t *\n\t * @default true\n\t */\n\tskipEmpty?: boolean;\n\n\t/**\n\t * Use the first row to name the columns.\n\t * \n\t * @default false\n\t */\n\tuseColumnNames?: boolean;\n\n}\n\n/**\n * Tool to parse JSON string into structured data.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/data/#Parsing} for more info\n * @important\n */\nexport class CSVParser {\n\n\t/**\n\t * Parses CSV string.\n\t * \n\t * @param   input    CSV\n\t * @param   options  Options\n\t * @return           Data\n\t */\n\tpublic static parse(input: string, options?: ICSVParserOptions): any {\n\t\toptions = this._applyDefaults(options);\n\n\t\t// Get CSV data as array\n\t\tlet data = this.CSVToArray(input, options.delimiter!);\n\n\t\t// Init resuling array\n\t\tlet res: any[] = [],\n\t\t\tcols: string[] = [],\n\t\t\tcol: string,\n\t\t\ti: number;\n\n\t\t// Skip rows\n\t\tfor (i = 0; i < options.skipRows!; i++) {\n\t\t\tdata.shift();\n\t\t}\n\n\t\t// First row holds column names?\n\t\tif (options.useColumnNames) {\n\t\t\tcols = data.shift();\n\n\t\t\t// Normalize column names\n\t\t\tfor (let x = 0; x < cols.length; x++) {\n\t\t\t\t// trim\n\t\t\t\tcol = cols[x] != null ? cols[x].replace(/^\\s+|\\s+$/gm, \"\") : \"\";\n\n\t\t\t\t// Check for empty\n\t\t\t\tif (\"\" === col) {\n\t\t\t\t\tcol = \"col\" + x;\n\t\t\t\t}\n\n\t\t\t\tcols[x] = col;\n\t\t\t}\n\t\t}\n\n\t\t// Iterate through the result set\n\t\tlet row;\n\t\twhile (true) {\n\t\t\trow = options.reverse ? data.pop() : data.shift();\n\n\t\t\tif (!row) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (options.skipEmpty && row.length === 1 && row[0] === \"\") {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet dataPoint: any = {};\n\t\t\tfor (i = 0; i < row.length; i++) {\n\t\t\t\tcol = undefined === cols[i] ? \"col\" + i : cols[i];\n\t\t\t\tdataPoint[col] = row[i];\n\t\t\t}\n\t\t\tres.push(dataPoint);\n\t\t}\n\n\t\treturn res;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic static CSVToArray(data: string, delimiter: string): any[] {\n\n\t\t// Check to see if the delimiter is defined. If not,\n\t\t// then default to comma.\n\t\tdelimiter = (delimiter || ',');\n\n\t\t// Create a regular expression to parse the CSV values.\n\t\tlet objPattern = new RegExp(\n\t\t\t(\n\t\t\t\t// Delimiters.\n\t\t\t\t\"(\\\\\" + delimiter + \"|\\\\r?\\\\n|\\\\r|^)\" +\n\n\t\t\t\t// Quoted fields.\n\t\t\t\t\"(?:\\\"([^\\\"]*(?:\\\"\\\"[^\\\"]*)*)\\\"|\" +\n\n\t\t\t\t// Standard fields.\n\t\t\t\t\"([^\\\"\\\\\" + delimiter + \"\\\\r\\\\n]*))\"\n\t\t\t),\n\t\t\t\"gi\"\n\t\t);\n\n\n\t\t// Create an array to hold our data. Give the array\n\t\t// a default empty first row.\n\t\tlet arrData: any[] = [\n\t\t\t[]\n\t\t];\n\n\t\t// Create an array to hold our individual pattern\n\t\t// matching groups.\n\t\tlet arrMatches = null;\n\n\t\t// Keep looping over the regular expression matches\n\t\t// until we can no longer find a match.\n\t\twhile (true) {\n\t\t\tarrMatches = objPattern.exec(data);\n\n\t\t\tif (!arrMatches) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Get the delimiter that was found.\n\t\t\tlet strMatchedDelimiter = arrMatches[1];\n\n\t\t\t// Check to see if the given delimiter has a length\n\t\t\t// (is not the start of string) and if it matches\n\t\t\t// field delimiter. If id does not, then we know\n\t\t\t// that this delimiter is a row delimiter.\n\t\t\tif (\n\t\t\t\tstrMatchedDelimiter.length &&\n\t\t\t\t(strMatchedDelimiter !== delimiter)\n\t\t\t) {\n\n\t\t\t\t// Since we have reached a new row of data,\n\t\t\t\t// add an empty row to our data array.\n\t\t\t\tarrData.push([]);\n\n\t\t\t}\n\n\t\t\t// Now that we have our delimiter out of the way,\n\t\t\t// let's check to see which kind of value we\n\t\t\t// captured (quoted or unquoted).\n\t\t\tlet strMatchedValue;\n\t\t\tif (arrMatches[2]) {\n\n\t\t\t\t// We found a quoted value. When we capture\n\t\t\t\t// this value, unescape any double quotes.\n\t\t\t\tstrMatchedValue = arrMatches[2].replace(\n\t\t\t\t\tnew RegExp(\"\\\"\\\"\", \"g\"),\n\t\t\t\t\t\"\\\"\"\n\t\t\t\t);\n\n\t\t\t} else {\n\n\t\t\t\t// We found a non-quoted value.\n\t\t\t\tstrMatchedValue = arrMatches[3];\n\n\t\t\t}\n\n\t\t\t// Now that we have our value string, let's add\n\t\t\t// it to the data array.\n\t\t\tarrData[arrData.length - 1].push(strMatchedValue);\n\t\t}\n\n\t\t// Return the parsed data.\n\t\treturn (arrData);\n\t}\n\n\tprotected static _applyDefaults(options?: ICSVParserOptions): ICSVParserOptions {\n\t\tconst normalized: ICSVParserOptions = {};\n\t\tconst defaults = {\n\t\t\tdelimiter: \",\",\n\t\t\treverse: false,\n\t\t\tskipRows: 0,\n\t\t\tskipEmpty: true,\n\t\t\tuseColumnNames: false\n\t\t};\n\t\tif (!options) {\n\t\t\toptions = {};\n\t\t}\n\t\t$object.each(defaults, (key, val) => {\n\t\t\tnormalized[key] = options![key] || val;\n\t\t});\n\t\treturn normalized;\n\n\t}\n\n}", "import { Entity, IEntitySettings, IEntityPrivate, IEntityEvents } from \"./Entity\"\nimport { Color } from \"./Color\"\nimport * as $type from \"./Type\"\nimport * as $object from \"./Object\"\nimport * as $array from \"./Array\"\n\n\nexport interface IDataProcessorSettings extends IEntitySettings {\n\n\t/**\n\t * Date format used for parsing string-based dates.\n\t */\n\tdateFormat?: string;\n\n\t/**\n\t * A list of fields in data that need to be converted to tiemstamps.\n\t */\n\tdateFields?: string[];\n\n\t/**\n\t * A list of fields in data that need to be converted to numbers.\n\t */\n\tnumericFields?: string[];\n\n\t/**\n\t * A list of fields in data that need to be converted to [[Color]] objects.\n\t */\n\tcolorFields?: string[];\n\n\t/**\n\t * Replace empty values with this.\n\t */\n\temptyAs?: any;\n\n}\n\nexport interface IDataProcessorPrivate extends IEntityPrivate {\n\n\t/**\n\t * @ignore\n\t */\n\tdeepFields?: string[];\n}\n\nexport interface IDataProcessorEvents extends IEntityEvents {\n}\n\n/**\n * A tool that can process the data before it is being used in charts.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/data/#Pre_processing_data} for more info\n * @important\n */\nexport class DataProcessor extends Entity {\n\tdeclare public _settings: IDataProcessorSettings;\n\tdeclare public _privateSettings: IDataProcessorPrivate;\n\n\tprotected _checkDates: boolean = false;\n\tprotected _checkNumbers: boolean = false;\n\tprotected _checkColors: boolean = false;\n\tprotected _checkEmpty: boolean = false;\n\tprotected _checkDeep: boolean = false;\n\n\tprotected _afterNew() {\n\t\tsuper._afterNew();\n\t\tthis._checkFeatures();\n\t\tthis.on(\"dateFields\", () => this._checkFeatures());\n\t\tthis.on(\"dateFormat\", () => this._checkFeatures());\n\t\tthis.on(\"numericFields\", () => this._checkFeatures());\n\t\tthis.on(\"colorFields\", () => this._checkFeatures());\n\t\tthis.on(\"emptyAs\", () => this._checkFeatures());\n\t}\n\n\tprotected _checkFeatures(): void {\n\t\tif (this.isDirty(\"dateFields\") || this.isDirty(\"dateFormat\")) {\n\t\t\tthis._checkDates = this.get(\"dateFields\") && (this.get(\"dateFields\")!.length > 0);\n\t\t}\n\t\tif (this.isDirty(\"numericFields\")) {\n\t\t\tthis._checkNumbers = this.get(\"numericFields\") && (this.get(\"numericFields\")!.length > 0);\n\t\t}\n\t\tif (this.isDirty(\"colorFields\")) {\n\t\t\tthis._checkColors = this.get(\"colorFields\") && (this.get(\"colorFields\")!.length > 0);\n\t\t}\n\t\tif (this.isDirty(\"emptyAs\")) {\n\t\t\tthis._checkEmpty = this.get(\"emptyAs\") != null;\n\t\t}\n\t\tthis._checkDeepFeatures();\n\t}\n\n\tprotected _checkDeepFeatures(): void {\n\t\tconst deepFields: string[] = [];\n\t\t$array.each([\"dateFields\", \"numericFields\", \"colorFields\"], (where: any) => {\n\t\t\t$array.each(this.get(where, []), (field) => {\n\t\t\t\tconst steps = (<string>field).split(\".\");\n\t\t\t\tsteps.pop();\n\t\t\t\twhile (steps.length > 0) {\n\t\t\t\t\tdeepFields.push(steps.join(\".\"));\n\t\t\t\t\tsteps.pop();\n\t\t\t\t}\n\t\t\t});\n\t\t})\n\t\tthis._checkDeep = deepFields.length > 0;\n\t\tthis.setPrivate(\"deepFields\", deepFields);\n\t}\n\n\t/**\n\t * Processess entire array of data.\n\t *\n\t * NOTE: calling this will modify original array!\n\t */\n\tpublic processMany(data: { [index: string]: any }[]): void {\n\t\tif ($type.isArray(data) && (this._checkDates || this._checkNumbers || this._checkColors || this._checkEmpty)) {\n\t\t\t$array.each(data, (row) => {\n\t\t\t\tthis.processRow(row);\n\t\t\t})\n\t\t}\n\t}\n\n\t/**\n\t * Processes a row (object) of data.\n\t * \n\t * NOTE: calling this will modify values of the original object!\n\t */\n\tpublic processRow(row: { [index: string]: any }, prefix: string = \"\"): void {\n\t\t$object.each(row, (key: any, _value) => {\n\t\t\tconst lookupKey: string = prefix + key;\n\t\t\tif (this._checkEmpty) {\n\t\t\t\trow[key] = this._maybeToEmpty(row[key]);\n\t\t\t}\n\t\t\tif (this._checkNumbers) {\n\t\t\t\trow[key] = this._maybeToNumber(lookupKey, row[key]);\n\t\t\t}\n\t\t\tif (this._checkDates) {\n\t\t\t\trow[key] = this._maybeToDate(lookupKey, row[key]);\n\t\t\t}\n\t\t\tif (this._checkColors) {\n\t\t\t\trow[key] = this._maybeToColor(lookupKey, row[key]);\n\t\t\t}\n\t\t\tif (this._checkDeep && (<any>this).getPrivate(\"deepFields\", []).indexOf(lookupKey) !== -1 && $type.isObject(row[key])) {\n\t\t\t\tthis.processRow(row[key], lookupKey + \".\");\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected _maybeToNumber(field: string, value: any): any {\n\t\tif (this.get(\"numericFields\")!.indexOf(field) !== -1) {\n\t\t\treturn $type.toNumber(value);\n\t\t}\n\t\treturn value;\n\t}\n\n\tprotected _maybeToDate(field: string, value: any): any {\n\t\tif (this.get(\"dateFields\")!.indexOf(field) !== -1) {\n\t\t\treturn this._root.dateFormatter.parse(value, this.get(\"dateFormat\", \"\")).getTime();\n\t\t}\n\t\treturn value;\n\t}\n\n\tprotected _maybeToEmpty(value: any): any {\n\t\tif ((value == null || value == \"\") && this.get(\"emptyAs\") != null) {\n\t\t\treturn this.get(\"emptyAs\");\n\t\t}\n\t\treturn value;\n\t}\n\n\tprotected _maybeToColor(field: string, value: any): any {\n\t\tif (this.get(\"colorFields\")!.indexOf(field) !== -1) {\n\t\t\treturn Color.fromAny(value);\n\t\t}\n\t\treturn value;\n\t}\n\n}\n", "import type { Sprite, ISpritePointerEvent } from \"./Sprite\";\r\nimport type { IDisposer } from \"../util/Disposer\";\r\n\r\nimport { Container, IContainerPrivate, IContainerSettings, IContainerEvents } from \"./Container\";\r\nimport { p50, Percent } from \"../util/Percent\";\r\nimport { RoundedRectangle } from \"./RoundedRectangle\";\r\nimport { Rectangle } from \"./Rectangle\";\r\nimport { color } from \"../util/Color\";\r\n\r\nimport * as $math from \"../util/Math\";\r\n\r\nexport interface ISpriteResizerSettings extends IContainerSettings {\r\n\r\n\t/**\r\n\t * Target [[Sprite]] element.\r\n\t */\r\n\tsprite?: Sprite\r\n\r\n\t/**\r\n\t * Rotation increment in degrees.\r\n\t * \r\n\t * @default 10\r\n\t */\r\n\trotationStep?: number;\r\n\r\n}\r\n\r\nexport interface ISpriteResizerPrivate extends IContainerPrivate {\r\n\r\n}\r\n\r\nexport interface ISpriteResizerEvents extends IContainerEvents {\r\n\r\n}\r\n\r\nexport class SpriteResizer extends Container {\r\n\r\n\tdeclare public _settings: ISpriteResizerSettings;\r\n\tdeclare public _privateSettings: ISpriteResizerPrivate;\r\n\tdeclare public _events: ISpriteResizerEvents;\r\n\r\n\tpublic static className: string = \"SpriteResizer\";\r\n\tpublic static classNames: Array<string> = Container.classNames.concat([SpriteResizer.className]);\r\n\r\n\tpublic readonly rectangle: Rectangle = this.children.push(Rectangle.new(this._root, { themeTags: [\"rectangle\"], fillOpacity: 0, fill: color(0xFFFFFF) }));\r\n\tpublic readonly gripL: Container = this._createGrip(\"left\");\r\n\tpublic readonly gripR: Container = this._createGrip(\"right\");\r\n\tpublic readonly gripT: Container = this._createGrip(\"top\");\r\n\tpublic readonly gripB: Container = this._createGrip(\"bottom\");\r\n\r\n\tprotected _is: number = 1;\r\n\tprotected _ix: number = 0;\r\n\tprotected _iw: number = 0;\r\n\r\n\tprotected _positionDP?: IDisposer;\r\n\r\n\tprotected _isHover: boolean = false;\r\n\r\n\tprotected _afterNew() {\r\n\t\tsuper._afterNew();\r\n\t\tthis.addTag(\"resizer\");\r\n\t\tthis.set(\"visible\", false);\r\n\r\n\t\tthis.gripL.events.on(\"dragged\", (e) => {\r\n\t\t\tthis._resize(e.target, -1);\r\n\t\t})\r\n\r\n\t\tthis.gripR.events.on(\"dragged\", (e) => {\r\n\t\t\tthis._resize(e.target, 1);\r\n\t\t})\r\n\r\n\t\tthis.gripL.events.on(\"dragstart\", (e) => {\r\n\t\t\tthis._resizeStart(e.target);\r\n\t\t})\r\n\r\n\t\tthis.gripR.events.on(\"dragstart\", (e) => {\r\n\t\t\tthis._resizeStart(e.target);\r\n\t\t})\r\n\r\n\t\tthis.gripT.events.on(\"dragged\", (e) => {\r\n\t\t\tthis._rotate(e, 90);\r\n\t\t})\r\n\r\n\t\tthis.gripB.events.on(\"dragged\", (e) => {\r\n\t\t\tthis._rotate(e, -90);\r\n\t\t})\r\n\r\n\t\tthis.gripT.events.on(\"dragstart\", (e) => {\r\n\t\t\tthis._resizeStart(e.target);\r\n\t\t})\r\n\r\n\t\tthis.gripB.events.on(\"dragstart\", (e) => {\r\n\t\t\tthis._resizeStart(e.target);\r\n\t\t})\r\n\t}\r\n\r\n\tprotected _resizeStart(grip: Sprite) {\r\n\t\tconst sprite = this.get(\"sprite\");\r\n\t\tif (sprite) {\r\n\t\t\tthis._is = sprite.get(\"scale\", 1);\r\n\t\t\tthis._ix = grip.x();\r\n\t\t\tthis._iw = this.width() / 2;\r\n\t\t}\r\n\t}\r\n\r\n\tprotected _resize(grip: Sprite, c: number) {\r\n\t\tconst sprite = this.get(\"sprite\");\r\n\t\tif (sprite) {\r\n\r\n\t\t\tsprite.set(\"scale\", Math.max(0.01, this._is * (1 + c * (grip.x() - this._ix) / this._iw)));\r\n\t\t\tthis._updatePositions();\r\n\t\t}\r\n\t}\r\n\r\n\tprotected _rotate(e: ISpritePointerEvent, delta: number) {\r\n\t\tconst sprite = this.get(\"sprite\");\r\n\t\tif (sprite) {\r\n\t\t\tconst parent = this.parent;\r\n\t\t\tif (parent) {\r\n\r\n\t\t\t\tconst rotationStep = this.get(\"rotationStep\", 10);\r\n\t\t\t\tlet angle = Math.round((($math.getAngle({ x: this.x(), y: this.y() }, parent.toLocal(e.point)) + delta) / rotationStep)) * rotationStep;\r\n\t\t\t\tsprite.set(\"rotation\", angle);\r\n\t\t\t\tthis._updatePositions();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprotected _createGrip(themeTag: string) {\r\n\t\tconst container = this.children.push(Container.new(this._root, {\r\n\t\t\tthemeTags: [\"grip\", themeTag],\r\n\t\t\tsetStateOnChildren: true,\r\n\t\t\tdraggable: true\r\n\t\t}))\r\n\r\n\t\tcontainer.children.push(RoundedRectangle.new(this._root, {\r\n\t\t\tthemeTags: [\"outline\"],\r\n\t\t\tcenterX: p50,\r\n\t\t\tcenterY: p50\r\n\t\t}))\r\n\r\n\t\tcontainer.children.push(RoundedRectangle.new(this._root, {\r\n\t\t\tcenterX: p50,\r\n\t\t\tcenterY: p50\r\n\t\t}));\r\n\t\treturn container;\r\n\t}\r\n\r\n\tpublic _updateChildren() {\r\n\t\tsuper._updateChildren();\r\n\r\n\t\tif (this.isDirty(\"sprite\")) {\r\n\t\t\tconst sprite = this.get(\"sprite\");\r\n\t\t\tif (sprite) {\r\n\t\t\t\tthis.show(0);\r\n\t\t\t\tthis.setPrivate(\"visible\", true);\r\n\r\n\t\t\t\tthis._updatePositions();\r\n\r\n\t\t\t\tconst parent = sprite.parent;\r\n\r\n\t\t\t\tif (parent) {\r\n\t\t\t\t\tparent.children.moveValue(this, 0);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._positionDP = sprite.events.on(\"positionchanged\", () => {\r\n\t\t\t\t\tthis._updatePositions();\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.hide(0);\r\n\t\t\t\tthis.setPrivate(\"visible\", false);\r\n\r\n\t\t\t\tif (this._positionDP) {\r\n\t\t\t\t\tthis._positionDP.dispose();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.isDirty(\"width\") || this.isDirty(\"height\") || this.isDirty(\"rotation\")) {\r\n\t\t\tthis._updatePositions();\r\n\t\t}\r\n\t}\r\n\r\n\tprotected _updatePositions() {\r\n\t\tconst sprite = this.get(\"sprite\");\r\n\t\tif (sprite) {\r\n\t\t\tlet bounds = sprite.localBounds();\r\n\t\t\tlet scale = sprite.get(\"scale\", 1);\r\n\t\t\tlet d = 20\r\n\t\t\tlet w = (bounds.right - bounds.left) * scale + d;\r\n\t\t\tlet h = (bounds.bottom - bounds.top) * scale + d;\r\n\t\t\tlet a = sprite.get(\"rotation\", 0);\r\n\r\n\t\t\tconst rectangle = this.rectangle;\r\n\r\n\t\t\tlet cx = sprite.get(\"centerX\", p50);\r\n\t\t\tlet cy = sprite.get(\"centerY\", p50);\r\n\r\n\t\t\tlet cxr = 0;\r\n\t\t\tif (cx instanceof Percent) {\r\n\t\t\t\tcxr = cx.value;\r\n\t\t\t}\r\n\r\n\t\t\tlet cyr = 0;\r\n\t\t\tif (cy instanceof Percent) {\r\n\t\t\t\tcyr = cy.value;\r\n\t\t\t}\r\n\r\n\t\t\trectangle.setAll({ centerX: cx, centerY: cy, width: w, height: h });\r\n\t\t\tthis.setAll({ x: sprite.x() + d * (cxr - 0.5) * $math.cos(a) - d * (cyr - 0.5) * $math.sin(a), y: sprite.y() + d * (cyr - 0.5) * $math.cos(a) + d * (cxr - 0.5) * $math.sin(a), width: w, height: h, rotation: a });\r\n\r\n\t\t\tthis.gripT.setAll({ x: (0.5 - cxr) * w, y: -cyr * h });\r\n\t\t\tthis.gripB.setAll({ x: (0.5 - cxr) * w, y: (1 - cyr) * h });\r\n\t\t\tthis.gripL.setAll({ x: -cxr * w, y: (0.5 - cyr) * h });\r\n\t\t\tthis.gripR.setAll({ x: (1 - cxr) * w, y: (0.5 - cyr) * h });\r\n\r\n\t\t\tthis.rectangle.setAll({ width: w, height: h });\r\n\t\t}\r\n\t}\r\n}\r\n", "/**\n * A collection of network-related functions\n */\n\n/**\n * ============================================================================\n * IMPORTS\n * ============================================================================\n * @hidden\n */\nimport type { Optional } from \"./Type\";\n\n/**\n * Defines an interface for objects that hold a net request result.\n */\nexport interface INetLoadResult<A> {\n\n\t/**\n\t * A reference to original [[XMLHttpRequest]].\n\t */\n\txhr: XMLHttpRequest;\n\n\t/**\n\t * Request response body.\n\t */\n\tresponse?: string;\n\n\t/**\n\t * Request response as Blob. (if set `responseType = \"blob\"`)\n\t */\n\tblob?: Blob;\n\n\t/**\n\t * Response `Content-Type`.\n\t */\n\ttype: string | null;\n\n\t/**\n\t * Was there an error?\n\t */\n\terror: boolean;\n\n\t/**\n\t * A target object that made the net load request.\n\t */\n\ttarget?: A;\n\n}\n\nexport interface INetRequestOptions {\n\n\t/**\n\t * Custom request headers to be added to HTTP(S) request.\n\t */\n\trequestHeaders?: { key: string, value: string }[];\n\n\t/**\n\t * Specify expected response type.\n\t *\n\t * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseType} for more info\n\t */\n\tresponseType?: XMLHttpRequestResponseType;\n\n\t/**\n\t * Specify whether to send CORS credentials (defaults to `false`).\n\t *\n\t * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/withCredentials} for more info\n\t */\n\twithCredentials?: boolean;\n}\n\n/**\n * Loads an external file via its URL.\n *\n * Please note that this is an asynchronous function.\n *\n * It will not return the result, but rather a `Promise`.\n *\n * You can use the `await` notion, or `then()`.\n *\n * ```TypeScript\n * // Using await\n * let response = await Net.load( \"http://www.my.com/data.json\" );\n * console.log( response.response );\n *\n * // Using then()\n * Net.load( \"http://www.my.com/data.json\" ).then( ( response ) => {\n *   console.log( response.response );\n * } );\n * ```\n * ```JavaScript\n * // Using then()\n * Net.load( \"http://www.my.com/data.json\" ).then( function( response ) {\n *   console.log( response.response );\n * } );\n * ```\n *\n * @async\n * @see {@link https://www.amcharts.com/docs/v5/concepts/data/net-load-utility/} for more info\n * @param url      URL for the file to load\n * @param target   A target element that is requesting the net load\n * @param options  Request options\n * @return Result (Promise)\n */\nexport function load<A>(url: string, target?: A, options?: INetRequestOptions): Promise<INetLoadResult<A>> {\n\treturn new Promise<INetLoadResult<A>>((success, error) => {\n\n\t\t// Is return type Blob?\n\t\tlet isBlob = options != null && options.responseType == \"blob\";\n\n\t\t// Create request and set up handlers\n\t\tlet xhr = new XMLHttpRequest();\n\t\txhr.onload = () => {\n\t\t\tif (xhr.status === 200) {\n\n\t\t\t\tlet response: Optional<string>;\n\t\t\t\tlet blob: Optional<Blob>;\n\n\t\t\t\tif (isBlob) {\n\t\t\t\t\tblob = xhr.response;\n\t\t\t\t\treadBlob(blob!).then((response: any) => {\n\t\t\t\t\t\tlet output: INetLoadResult<A> = {\n\t\t\t\t\t\t\txhr: xhr,\n\t\t\t\t\t\t\terror: false,\n\t\t\t\t\t\t\tresponse: response,\n\t\t\t\t\t\t\tblob: blob,\n\t\t\t\t\t\t\ttype: xhr.getResponseHeader(\"Content-Type\"),\n\t\t\t\t\t\t\ttarget: target\n\t\t\t\t\t\t};\n\t\t\t\t\t\tsuccess(output);\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tresponse = xhr.responseText || xhr.response\n\t\t\t\t}\n\n\t\t\t\tlet output: INetLoadResult<A> = {\n\t\t\t\t\txhr: xhr,\n\t\t\t\t\terror: false,\n\t\t\t\t\tresponse: response,\n\t\t\t\t\tblob: blob,\n\t\t\t\t\ttype: xhr.getResponseHeader(\"Content-Type\"),\n\t\t\t\t\ttarget: target\n\t\t\t\t};\n\t\t\t\tsuccess(output);\n\t\t\t}\n\t\t\telse {\n\t\t\t\terror({\n\t\t\t\t\txhr: xhr,\n\t\t\t\t\terror: true,\n\t\t\t\t\ttype: xhr.getResponseHeader(\"Content-Type\"),\n\t\t\t\t\ttarget: target\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\txhr.onerror = () => {\n\t\t\terror({\n\t\t\t\txhr: xhr,\n\t\t\t\terror: true,\n\t\t\t\ttype: xhr.getResponseHeader(\"Content-Type\"),\n\t\t\t\ttarget: target\n\t\t\t});\n\t\t};\n\n\t\t// Open request\n\t\txhr.open(\"GET\", url, true);\n\n\t\tif (options && options.withCredentials) {\n\t\t\txhr.withCredentials = true;\n\t\t}\n\n\t\t// Process options\n\t\tif (options != null) {\n\n\t\t\tif (options.requestHeaders != null) {\n\t\t\t\tfor (let i = 0; i < options.requestHeaders.length; i++) {\n\t\t\t\t\tlet header = options.requestHeaders[i];\n\t\t\t\t\txhr.setRequestHeader(header.key, header.value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (options.responseType != null) {\n\t\t\t\txhr.responseType = options.responseType;\n\t\t\t}\n\t\t}\n\n\t\t// Send request\n\t\txhr.send();\n\n\t});\n\n}\n\n/**\n * Returns textual representation of a Blob object.\n *\n * @param   blob  Target blob\n * @return        Text promise\n */\nexport function readBlob(blob: Blob): Promise<string> {\n\treturn new Promise<string>((success, error) => {\n\t\tconst reader = new FileReader()\n\n\t\treader.onload = _event => {\n\t\t\tsuccess(<string>reader.result);\n\t\t}\n\n\t\treader.onerror = (e) => {\n\t\t\terror(e);\n\t\t}\n\n\t\treader.readAsText(blob);\n\t});\n}\n"],
  "mappings": "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",
  "names": ["Native", "x", "Raf", "ResizeSensor", "InterfaceColors", "PointedRectangle", "x", "y", "Tooltip", "fill", "x", "y", "NumberFormatter", "copy", "each", "a", "k", "x", "Timezone", "DateFormatter", "x", "DurationFormatter", "each", "x", "eachContinue", "Language", "x", "Matrix", "a", "x", "y", "mapToEllipse", "x", "y", "approxUnitArc", "a", "vectorAngle", "sign", "getArcCenter", "arcToBezier", "CanvasPivot", "CanvasDisplayObject", "point", "p0", "x", "CanvasContainer", "point", "Op", "BeginFill", "color", "EndFill", "EndStroke", "LineStyle", "LineDash", "LineDashOffset", "DrawRect", "x", "y", "DrawCircle", "DrawEllipse", "Arc", "ArcTo", "LineTo", "MoveTo", "ClosePath", "BezierCurveTo", "QuadraticCurveTo", "Shadow", "blur", "GraphicsImage", "CanvasGraphics", "path", "CanvasText", "line", "_index", "y", "x", "CanvasTextStyle", "CanvasRadialText", "line", "deltaAngle", "_index", "CanvasImage", "CanvasRendererEvent", "point", "CanvasRenderer", "each", "a", "color", "point", "x", "ev", "canvas", "Root", "a", "x", "y", "point", "each", "Modal", "Bullet", "Circle", "Ellipse", "Star", "Gradient", "p0", "LinearGradient", "cos", "sin", "color", "HeatLegend", "color", "Legend", "a", "s", "point", "Line", "point", "Picture", "RadialText", "RadialLabel", "sin", "cos", "x", "y", "Triangle", "Scrollbar", "point", "Slider", "x", "y", "x", "cos", "sin", "epsilon", "pi", "tau", "x", "epsilon", "tau", "cos", "sin", "p0", "pi", "a", "x", "y", "a", "sin", "pi", "tau", "cos", "sqrt3", "sqrt3", "x", "y", "x", "y", "x", "y", "x", "y", "beta", "point", "x", "y", "custom", "tension", "x", "y", "point", "custom", "tension", "x", "y", "point", "custom", "tension", "point", "x", "y", "x2", "y2", "epsilon", "a", "custom", "alpha", "x", "y", "point", "custom", "alpha", "x", "y", "point", "custom", "alpha", "x", "y", "x", "point", "y", "x", "y", "a", "x", "y", "Slice", "x", "y", "Tick", "RadialGradient", "x", "y", "color", "CirclePattern", "color", "x", "y", "LinePattern", "y", "RectanglePattern", "x", "y", "color", "ColorSet", "s", "JSONParser", "each", "CSVParser", "x", "each", "DataProcessor", "each", "SpriteResizer", "a", "response", "output"]
}
