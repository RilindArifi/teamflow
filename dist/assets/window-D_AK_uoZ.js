import{t as B,o as x,V,p as Q,w as M,y as W,h as G,c as J,f as X,P as Y,u as I,O as Z,F as _,a as $,b as m,R as E,l as C}from"./hidden-fO4vajOx.js";import{b as ee,x as te,a as O}from"./index-NG2poei0.js";import{j as w,p as h,m as A,v as j,A as ae,x as le,z as oe,q as ie,s as F,F as ne,B as ue,t as R,y as T}from"./index-rbxh5PlU.js";function N(t={},i=null,l=[]){for(let[f,e]of Object.entries(t))q(l,U(i,f),e);return l}function U(t,i){return t?t+"["+i+"]":i}function q(t,i,l){if(Array.isArray(l))for(let[f,e]of l.entries())q(t,U(i,f.toString()),e);else l instanceof Date?t.push([i,l.toISOString()]):typeof l=="boolean"?t.push([i,l?"1":"0"]):typeof l=="string"?t.push([i,l]):typeof l=="number"?t.push([i,`${l}`]):l==null?t.push([i,""]):N(l,i,t)}function re(t,i,l){let f=w(l==null?void 0:l.value),e=h(()=>t.value!==void 0);return[h(()=>e.value?t.value:f.value),function(s){return e.value||(f.value=s),i==null?void 0:i(s)}]}function se(t,i){return t===i}var de=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(de||{}),ve=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(ve||{}),pe=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(pe||{});function ce(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let H=Symbol("ListboxContext");function z(t){let i=ue(H,null);if(i===null){let l=new Error(`<${t} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,z),l}return i}let xe=A({name:"Listbox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>se},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:i,attrs:l,emit:f}){let e=w(1),s=w(null),d=w(null),g=w(null),v=w([]),y=w(""),a=w(null),o=w(1);function L(n=u=>u){let u=a.value!==null?v.value[a.value]:null,r=Z(n(v.value.slice()),S=>x(S.dataRef.domRef)),c=u?r.indexOf(u):null;return c===-1&&(c=null),{options:r,activeOptionIndex:c}}let P=h(()=>t.multiple?1:0),[k,p]=re(h(()=>t.modelValue),n=>f("update:modelValue",n),h(()=>t.defaultValue)),b={listboxState:e,value:k,mode:P,compare(n,u){if(typeof t.by=="string"){let r=t.by;return(n==null?void 0:n[r])===(u==null?void 0:u[r])}return t.by(n,u)},orientation:h(()=>t.horizontal?"horizontal":"vertical"),labelRef:s,buttonRef:d,optionsRef:g,disabled:h(()=>t.disabled),options:v,searchQuery:y,activeOptionIndex:a,activationTrigger:o,closeListbox(){t.disabled||e.value!==1&&(e.value=1,a.value=null)},openListbox(){t.disabled||e.value!==0&&(e.value=0)},goToOption(n,u,r){if(t.disabled||e.value===1)return;let c=L(),S=te(n===O.Specific?{focus:O.Specific,id:u}:{focus:n},{resolveItems:()=>c.options,resolveActiveIndex:()=>c.activeOptionIndex,resolveId:D=>D.id,resolveDisabled:D=>D.dataRef.disabled});y.value="",a.value=S,o.value=r??1,v.value=c.options},search(n){if(t.disabled||e.value===1)return;let u=y.value!==""?0:1;y.value+=n.toLowerCase();let r=(a.value!==null?v.value.slice(a.value+u).concat(v.value.slice(0,a.value+u)):v.value).find(S=>S.dataRef.textValue.startsWith(y.value)&&!S.dataRef.disabled),c=r?v.value.indexOf(r):-1;c===-1||c===a.value||(a.value=c,o.value=1)},clearSearch(){t.disabled||e.value!==1&&y.value!==""&&(y.value="")},registerOption(n,u){let r=L(c=>[...c,{id:n,dataRef:u}]);v.value=r.options,a.value=r.activeOptionIndex},unregisterOption(n){let u=L(r=>{let c=r.findIndex(S=>S.id===n);return c!==-1&&r.splice(c,1),r});v.value=u.options,a.value=u.activeOptionIndex,o.value=1},select(n){t.disabled||p(I(P.value,{0:()=>n,1:()=>{let u=R(b.value.value).slice(),r=R(n),c=u.findIndex(S=>b.compare(r,R(S)));return c===-1?u.push(r):u.splice(c,1),u}}))}};return W([d,g],(n,u)=>{var r;b.closeListbox(),G(u,_.Loose)||(n.preventDefault(),(r=x(d))==null||r.focus())},h(()=>e.value===0)),ie(H,b),J(h(()=>I(e.value,{0:C.Open,1:C.Closed}))),()=>{let{name:n,modelValue:u,disabled:r,...c}=t,S={open:e.value===0,disabled:r,value:k.value};return F(ne,[...n!=null&&k.value!=null?N({[n]:k.value}).map(([D,K])=>F(X,Y({features:$.Hidden,key:D,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:D,value:K}))):[],V({ourProps:{},theirProps:{...l,...M(c,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:S,slots:i,attrs:l,name:"Listbox"})])}}});A({name:"ListboxLabel",props:{as:{type:[Object,String],default:"label"}},setup(t,{attrs:i,slots:l}){let f=z("ListboxLabel"),e=`headlessui-listbox-label-${B()}`;function s(){var d;(d=x(f.buttonRef))==null||d.focus({preventScroll:!0})}return()=>{let d={open:f.listboxState.value===0,disabled:f.disabled.value},g={id:e,ref:f.labelRef,onClick:s};return V({ourProps:g,theirProps:t,slot:d,attrs:i,slots:l,name:"ListboxLabel"})}}});let he=A({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"}},setup(t,{attrs:i,slots:l,expose:f}){let e=z("ListboxButton"),s=`headlessui-listbox-button-${B()}`;f({el:e.buttonRef,$el:e.buttonRef});function d(a){switch(a.key){case m.Space:case m.Enter:case m.ArrowDown:a.preventDefault(),e.openListbox(),T(()=>{var o;(o=x(e.optionsRef))==null||o.focus({preventScroll:!0}),e.value.value||e.goToOption(O.First)});break;case m.ArrowUp:a.preventDefault(),e.openListbox(),T(()=>{var o;(o=x(e.optionsRef))==null||o.focus({preventScroll:!0}),e.value.value||e.goToOption(O.Last)});break}}function g(a){switch(a.key){case m.Space:a.preventDefault();break}}function v(a){e.disabled.value||(e.listboxState.value===0?(e.closeListbox(),T(()=>{var o;return(o=x(e.buttonRef))==null?void 0:o.focus({preventScroll:!0})})):(a.preventDefault(),e.openListbox(),ce(()=>{var o;return(o=x(e.optionsRef))==null?void 0:o.focus({preventScroll:!0})})))}let y=ee(h(()=>({as:t.as,type:i.type})),e.buttonRef);return()=>{var a,o;let L={open:e.listboxState.value===0,disabled:e.disabled.value,value:e.value.value},P={ref:e.buttonRef,id:s,type:y.value,"aria-haspopup":!0,"aria-controls":(a=x(e.optionsRef))==null?void 0:a.id,"aria-expanded":e.disabled.value?void 0:e.listboxState.value===0,"aria-labelledby":e.labelRef.value?[(o=x(e.labelRef))==null?void 0:o.id,s].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:d,onKeyup:g,onClick:v};return V({ourProps:P,theirProps:t,slot:L,attrs:i,slots:l,name:"ListboxButton"})}}}),Oe=A({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(t,{attrs:i,slots:l,expose:f}){let e=z("ListboxOptions"),s=`headlessui-listbox-options-${B()}`,d=w(null);f({el:e.optionsRef,$el:e.optionsRef});function g(a){switch(d.value&&clearTimeout(d.value),a.key){case m.Space:if(e.searchQuery.value!=="")return a.preventDefault(),a.stopPropagation(),e.search(a.key);case m.Enter:if(a.preventDefault(),a.stopPropagation(),e.activeOptionIndex.value!==null){let o=e.options.value[e.activeOptionIndex.value];e.select(o.dataRef.value)}e.mode.value===0&&(e.closeListbox(),T(()=>{var o;return(o=x(e.buttonRef))==null?void 0:o.focus({preventScroll:!0})}));break;case I(e.orientation.value,{vertical:m.ArrowDown,horizontal:m.ArrowRight}):return a.preventDefault(),a.stopPropagation(),e.goToOption(O.Next);case I(e.orientation.value,{vertical:m.ArrowUp,horizontal:m.ArrowLeft}):return a.preventDefault(),a.stopPropagation(),e.goToOption(O.Previous);case m.Home:case m.PageUp:return a.preventDefault(),a.stopPropagation(),e.goToOption(O.First);case m.End:case m.PageDown:return a.preventDefault(),a.stopPropagation(),e.goToOption(O.Last);case m.Escape:a.preventDefault(),a.stopPropagation(),e.closeListbox(),T(()=>{var o;return(o=x(e.buttonRef))==null?void 0:o.focus({preventScroll:!0})});break;case m.Tab:a.preventDefault(),a.stopPropagation();break;default:a.key.length===1&&(e.search(a.key),d.value=setTimeout(()=>e.clearSearch(),350));break}}let v=Q(),y=h(()=>v!==null?v.value===C.Open:e.listboxState.value===0);return()=>{var a,o,L,P;let k={open:e.listboxState.value===0},p={"aria-activedescendant":e.activeOptionIndex.value===null||(a=e.options.value[e.activeOptionIndex.value])==null?void 0:a.id,"aria-multiselectable":e.mode.value===1?!0:void 0,"aria-labelledby":(P=(o=x(e.labelRef))==null?void 0:o.id)!=null?P:(L=x(e.buttonRef))==null?void 0:L.id,"aria-orientation":e.orientation.value,id:s,onKeydown:g,role:"listbox",tabIndex:0,ref:e.optionsRef};return V({ourProps:p,theirProps:t,slot:k,attrs:i,slots:l,features:E.RenderStrategy|E.Static,visible:y.value,name:"ListboxOptions"})}}}),ge=A({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(t,{slots:i,attrs:l,expose:f}){let e=z("ListboxOption"),s=`headlessui-listbox-option-${B()}`,d=w(null);f({el:d,$el:d});let g=h(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===s:!1),v=h(()=>I(e.mode.value,{0:()=>e.compare(R(e.value.value),R(t.value)),1:()=>R(e.value.value).some(p=>e.compare(R(p),R(t.value)))})),y=h(()=>I(e.mode.value,{1:()=>{var p;let b=R(e.value.value);return((p=e.options.value.find(n=>b.some(u=>e.compare(R(u),R(n.dataRef.value)))))==null?void 0:p.id)===s},0:()=>v.value})),a=h(()=>({disabled:t.disabled,value:t.value,textValue:"",domRef:d}));j(()=>{var p,b;let n=(b=(p=x(d))==null?void 0:p.textContent)==null?void 0:b.toLowerCase().trim();n!==void 0&&(a.value.textValue=n)}),j(()=>e.registerOption(s,a)),ae(()=>e.unregisterOption(s)),j(()=>{le([e.listboxState,v],()=>{e.listboxState.value===0&&(!v.value||I(e.mode.value,{1:()=>{y.value&&e.goToOption(O.Specific,s)},0:()=>{e.goToOption(O.Specific,s)}}))},{immediate:!0})}),oe(()=>{e.listboxState.value===0&&(!g.value||e.activationTrigger.value!==0&&T(()=>{var p,b;return(b=(p=x(d))==null?void 0:p.scrollIntoView)==null?void 0:b.call(p,{block:"nearest"})}))});function o(p){if(t.disabled)return p.preventDefault();e.select(t.value),e.mode.value===0&&(e.closeListbox(),T(()=>{var b;return(b=x(e.buttonRef))==null?void 0:b.focus({preventScroll:!0})}))}function L(){if(t.disabled)return e.goToOption(O.Nothing);e.goToOption(O.Specific,s)}function P(){t.disabled||g.value||e.goToOption(O.Specific,s,0)}function k(){t.disabled||!g.value||e.goToOption(O.Nothing)}return()=>{let{disabled:p}=t,b={active:g.value,selected:v.value,disabled:p},n={id:s,ref:d,role:"option",tabIndex:p===!0?void 0:-1,"aria-disabled":p===!0?!0:void 0,"aria-selected":v.value,disabled:void 0,onClick:o,onFocus:L,onPointermove:P,onMousemove:P,onPointerleave:k,onMouseleave:k};return V({ourProps:n,theirProps:M(t,["value","disabled"]),slot:b,attrs:l,slots:i,name:"ListboxOption"})}}});const ye={data(){return{window:{width:0,height:0}}},methods:{handleResize(){this.window.width=window.innerWidth}},created(){window.addEventListener("resize",this.handleResize),this.handleResize()},destroyed(){window.removeEventListener("resize",this.handleResize)}};export{ge as A,he as I,xe as M,Oe as V,re as d,N as e,ye as w};
