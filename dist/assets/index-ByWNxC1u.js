import{D as C,S}from"./index-DazkXZ4Z.js";import{B as f}from"./index-33UJ4sER.js";import{C as P}from"./index-CUMv6eIO.js";import{I as _}from"./index-CaUUDcy2.js";import{I as R}from"./index-CEzm_PLY.js";import{P as B}from"./index-BJbFWv1T.js";import{w as I}from"./window-Ds9AqdYU.js";import{H as V,g as L,s as A,a0 as N,I as $,k as w,A as D,r as F,c as d,o as i,d as n,w as p,a as s,n as h,u as a,e as b,t as x,F as M,K as T,J as z}from"./index-DDNgua1v.js";import"./focus-management-BVcv6Qz0.js";import"./use-outside-click--EiZLOTR.js";import"./use-resolve-button-type-CBgqNcOC.js";import"./vue-cleave.min-zcIwREGt.js";function G(l,o,t){const u=Math.max(1,Math.ceil(t/o));l>u&&(l=u);const c=(l-1)*o,g=c+o-1;return{start:c,end:g}}const y=L(),O=V("roles",{state:()=>({data:[],isLoading:!1,total:0}),actions:{async add(){},async edit(){},async delete(l){},async getRoles(l){this.isLoading=!0;try{const{start:o,end:t}=G(l.current,l.perPage,this.total),{data:u,error:c,count:g}=await A.from("roles").select(`
                        id,
                        name,
                        company:companies(name)
                      `,{count:"exact"}).range(o,t);c?y.error(c.message):(this.data=u,this.total=g)}catch(o){y.error(o.message)}finally{this.isLoading=!1}}}}),j={class:"md:flex pb-6 items-center"},q={class:"-mx-6"},E={key:0,class:"flex items-center"},H={class:"w-7 h-7 rounded-full ltr:mr-3 rtl:ml-3 flex-none"},J=["src","alt"],K={class:"text-sm text-slate-600 dark:text-slate-300 capitalize font-medium"},Q={key:1,class:"font-medium"},U={key:2,class:"text-slate-500 dark:text-slate-400"},W={key:3,class:"block w-full"},X={key:4},Y={class:"text-xl"},Z=["onClick"],ee={class:"text-base"},te={class:"py-4 px-3"},be={__name:"index",setup(l){const o=O(),t=N({search:"",current:1,perPage:3,pageRange:1,options:[{value:5,label:"5/page"},{value:10,label:"10/page"},{value:50,label:"50/page"},{value:100,label:"100/page"}]}),u=$(),c=w([{label:"Name",field:"name"},{label:"Company",field:"company.name"},{label:"Action",field:"action"}]),g=w([{name:"edit",icon:"heroicons:pencil-square",doit:()=>u.push("/app/invoice-edit")},{name:"delete",icon:"heroicons-outline:trash",doit:()=>{}}]);return D(t,()=>o.getRoles(t),{immediate:!0}),(ae,m)=>{const v=F("vue-good-table");return i(),d("div",null,[n(a(P),{noborder:""},{default:p(()=>[s("div",j,[m[2]||(m[2]=s("h6",{class:"flex-1 md:mb-0 mb-3"},"Roles",-1)),s("div",{class:h(["md:flex md:space-x-3 items-center flex-none rtl:space-x-reverse",a(I).width<768?"space-x-rb":""])},[n(a(R),{modelValue:t.search,"onUpdate:modelValue":m[0]||(m[0]=e=>t.search=e),placeholder:"Search",type:"text",prependIcon:"heroicons-outline:search",merged:""},null,8,["modelValue"]),n(a(f),{icon:"heroicons-outline:calendar",text:"Select date",btnClass:" btn-outline-secondary dark:border-slate-700  text-slate-600 btn-sm font-normal dark:text-slate-300 ",iconClass:"text-lg"}),n(a(f),{icon:"heroicons-outline:filter",text:"Filter",btnClass:" btn-outline-secondary text-slate-600 dark:border-slate-700 dark:text-slate-300 font-normal btn-sm ",iconClass:"text-lg"}),n(a(f),{icon:"heroicons-outline:plus-sm",text:"Add Record",btnClass:" btn-dark font-normal btn-sm ",iconClass:"text-lg",link:"invoice-add"})],2)]),s("div",q,[n(v,{"is-loading":a(o).isLoading,columns:c.value,styleClass:" vgt-table  centered ",rows:a(o).data,"sort-options":{enabled:!1},"pagination-options":{enabled:!0},"search-options":{enabled:!0,externalQuery:t.search},"select-options":{enabled:!0,selectOnCheckboxOnly:!0,selectioninfoClass:"table-input-checkbox",selectionText:"rows selected",clearSelectionText:"clear",disableSelectinfo:!0,selectAllByGroup:!0}},{"table-row":p(e=>[e.column.field=="customer"?(i(),d("span",E,[s("span",H,[s("img",{src:e.row.customer.image,alt:e.row.customer.name,class:"object-cover w-full h-full rounded-full"},null,8,J)]),s("span",K,x(e.row.customer.name),1)])):b("",!0),e.column.field=="order"?(i(),d("span",Q,x("#"+e.row.order),1)):b("",!0),e.column.field=="date"?(i(),d("span",U,x(e.row.date),1)):b("",!0),e.column.field=="status"?(i(),d("span",W,[s("span",{class:h(["inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25",`${e.row.status==="paid"?"text-success-500 bg-success-500":""}
            ${e.row.status==="due"?"text-warning-500 bg-warning-500":""}
            ${e.row.status==="cancled"?"text-danger-500 bg-danger-500":""}

             `])},x(e.row.status),3)])):b("",!0),e.column.field=="action"?(i(),d("span",X,[n(a(C),{classMenuItems:" w-[140px]"},{menus:p(()=>[(i(!0),d(M,null,T(g.value,(r,k)=>(i(),z(a(S),{key:k},{default:p(()=>[s("div",{onClick:r.doit,class:h(`

                  ${r.name==="delete"?"bg-danger-500 text-danger-500 bg-opacity-30  hover:bg-opacity-100 hover:text-white":"hover:bg-slate-900 hover:text-white"}
                   w-full border-b border-b-gray-500 border-opacity-10 px-4 py-2 text-sm  last:mb-0 cursor-pointer first:rounded-t last:rounded-b flex  space-x-2 items-center rtl:space-x-reverse `)},[s("span",ee,[n(a(_),{icon:r.icon},null,8,["icon"])]),s("span",null,x(r.name),1)],10,Z)]),_:2},1024))),128))]),default:p(()=>[s("span",Y,[n(a(_),{icon:"heroicons-outline:dots-vertical"})])]),_:1})])):b("",!0)]),"pagination-bottom":p(e=>[s("div",te,[n(a(B),{total:a(o).total,current:t.current,"per-page":t.perPage,pageRange:t.pageRange,onPageChanged:m[1]||(m[1]=r=>t.current=r),perPageChanged:r=>t.perPage=r.currentPerPage,enableSearch:"",enableSelect:"",options:t.options},null,8,["total","current","per-page","pageRange","perPageChanged","options"])])]),_:1},8,["is-loading","columns","rows","search-options"])])]),_:1})])}}};export{be as default};
